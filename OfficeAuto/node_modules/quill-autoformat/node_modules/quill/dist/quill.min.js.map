{"version":3,"sources":["webpack://Quill/webpack/universalModuleDefinition","webpack://Quill/webpack/bootstrap","webpack://Quill/./node_modules/parchment/src/collection/linked-list.ts","webpack://Quill/./node_modules/parchment/src/scope.ts","webpack://Quill/./node_modules/parchment/src/error.ts","webpack://Quill/./node_modules/parchment/src/registry.ts","webpack://Quill/./node_modules/parchment/src/blot/abstract/shadow.ts","webpack://Quill/./node_modules/parchment/src/blot/abstract/parent.ts","webpack://Quill/./node_modules/parchment/src/blot/abstract/container.ts","webpack://Quill/./node_modules/parchment/src/blot/abstract/leaf.ts","webpack://Quill/./node_modules/parchment/src/attributor/attributor.ts","webpack://Quill/./node_modules/parchment/src/attributor/class.ts","webpack://Quill/./node_modules/parchment/src/attributor/style.ts","webpack://Quill/./node_modules/parchment/src/attributor/store.ts","webpack://Quill/./node_modules/parchment/src/blot/inline.ts","webpack://Quill/./node_modules/parchment/src/blot/block.ts","webpack://Quill/./node_modules/parchment/src/blot/scroll.ts","webpack://Quill/./node_modules/parchment/src/blot/embed.ts","webpack://Quill/./node_modules/parchment/src/blot/text.ts","webpack://Quill/./blots/block.js","webpack://Quill/./node_modules/extend/index.js","webpack://Quill/./blots/inline.js","webpack://Quill/./node_modules/quill-delta/lib/delta.js","webpack://Quill/./core/quill.js","webpack://Quill/./core/module.js","webpack://Quill/./blots/text.js","webpack://Quill/./core/emitter.js","webpack://Quill/./blots/break.js","webpack://Quill/./core/logger.js","webpack://Quill/./blots/container.js","webpack://Quill/./node_modules/deep-equal/index.js","webpack://Quill/./ui/picker.js","webpack://Quill/./formats/link.js","webpack://Quill/./blots/cursor.js","webpack://Quill/./ui/icons.js","webpack://Quill/./formats/code.js","webpack://Quill/./formats/color.js","webpack://Quill/./core/selection.js","webpack://Quill/./node_modules/clone/clone.js","webpack://Quill/./node_modules/quill-delta/lib/op.js","webpack://Quill/./themes/base.js","webpack://Quill/./ui/tooltip.js","webpack://Quill/./ui/icon-picker.js","webpack://Quill/./ui/color-picker.js","webpack://Quill/./formats/bold.js","webpack://Quill/./formats/size.js","webpack://Quill/./formats/font.js","webpack://Quill/./formats/direction.js","webpack://Quill/./formats/background.js","webpack://Quill/./formats/align.js","webpack://Quill/./modules/clipboard.js","webpack://Quill/./blots/embed.js","webpack://Quill/./core/theme.js","webpack://Quill/./core/instances.js","webpack://Quill/./themes/snow.js","webpack://Quill/./themes/bubble.js","webpack://Quill/./assets/icons/dropdown.svg","webpack://Quill/./assets/icons/video.svg","webpack://Quill/./assets/icons/underline.svg","webpack://Quill/./assets/icons/table.svg","webpack://Quill/./assets/icons/strike.svg","webpack://Quill/./assets/icons/superscript.svg","webpack://Quill/./assets/icons/subscript.svg","webpack://Quill/./assets/icons/list-ordered.svg","webpack://Quill/./assets/icons/list-check.svg","webpack://Quill/./assets/icons/list-bullet.svg","webpack://Quill/./assets/icons/link.svg","webpack://Quill/./assets/icons/outdent.svg","webpack://Quill/./assets/icons/indent.svg","webpack://Quill/./assets/icons/image.svg","webpack://Quill/./assets/icons/italic.svg","webpack://Quill/./assets/icons/header-2.svg","webpack://Quill/./assets/icons/header.svg","webpack://Quill/./assets/icons/formula.svg","webpack://Quill/./assets/icons/direction-rtl.svg","webpack://Quill/./assets/icons/direction-ltr.svg","webpack://Quill/./assets/icons/color.svg","webpack://Quill/./assets/icons/code.svg","webpack://Quill/./assets/icons/clean.svg","webpack://Quill/./assets/icons/bold.svg","webpack://Quill/./assets/icons/blockquote.svg","webpack://Quill/./assets/icons/background.svg","webpack://Quill/./assets/icons/align-justify.svg","webpack://Quill/./assets/icons/align-right.svg","webpack://Quill/./assets/icons/align-center.svg","webpack://Quill/./assets/icons/align-left.svg","webpack://Quill/./modules/toolbar.js","webpack://Quill/./formats/table.js","webpack://Quill/./modules/table.js","webpack://Quill/./modules/syntax.js","webpack://Quill/./formats/video.js","webpack://Quill/./formats/image.js","webpack://Quill/./formats/formula.js","webpack://Quill/./formats/underline.js","webpack://Quill/./formats/strike.js","webpack://Quill/./formats/script.js","webpack://Quill/./formats/italic.js","webpack://Quill/./formats/list.js","webpack://Quill/./formats/header.js","webpack://Quill/./formats/blockquote.js","webpack://Quill/./formats/indent.js","webpack://Quill/./modules/uploader.js","webpack://Quill/./modules/keyboard.js","webpack://Quill/./modules/history.js","webpack://Quill/./blots/scroll.js","webpack://Quill/./node_modules/eventemitter3/index.js","webpack://Quill/./core/editor.js","webpack://Quill/./node_modules/deep-equal/lib/is_arguments.js","webpack://Quill/./node_modules/deep-equal/lib/keys.js","webpack://Quill/./node_modules/fast-diff/diff.js","webpack://Quill/./core.js","webpack://Quill/./quill.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Scope","linked_list","[object Object]","this","head","tail","length","nodes","insertBefore","append","apply","slice","index","cur","next","iterator","node","refNode","prev","target","contains","curNode","ret","inclusive","callback","startNode","offset","find","curIndex","curLength","Math","min","reduce","memo","push","ParchmentError","Error","message","super","constructor","src_scope","registry_Registry","attributes","classes","tags","types","bubble","blots","has","parentNode","scroll","input","match","query","BlotClass","blot","Node","TEXT_NODE","set","domNode","scope","ANY","Text","LEVEL","BLOCK","INLINE","HTMLElement","names","getAttribute","split","tagName","TYPE","Definitions","map","register","Definition","blotName","attrName","keyName","className","Array","isArray","toUpperCase","forEach","tag","WeakMap","shadow_ShadowBlot","statics","parseInt","toString","document","createElement","indexOf","classList","add","cloneNode","parent","removeChild","delete","isolate","remove","BLOT","wrap","ATTRIBUTE","format","def","ref","undefined","children","context","requiredContainer","detach","replacement","force","mutations","wrapper","appendChild","shadow","parent_ParentBlot","uiNode","build","other","attach","child","setAttribute","firstChild","from","childNodes","filter","reverse","makeAttachedBlot","err","forEachAt","deleteAt","criteria","descendant","Number","MAX_VALUE","descendants","lengthLeft","concat","done","allowedChildren","some","BLOCK_BLOT","splitAfter","unwrap","formatAt","insertAt","childBlot","refBlot","refDomNode","nextSibling","targetParent","optimize","enforceAllowedChildren","defaultChild","position","path","moveChildren","replaceWith","after","clone","addedNodes","removedNodes","mutation","type","body","compareDocumentPosition","DOCUMENT_POSITION_CONTAINED_BY","sort","a","b","DOCUMENT_POSITION_FOLLOWING","e","replaceChild","abstract_parent","container_ContainerBlot","checkMerge","container","leaf_LeafBlot","INLINE_BLOT","leaf","attributor_Attributor","item","options","attributeBit","whitelist","canAdd","replace","removeAttribute","class_match","prefix","attributor_class","join","camelize","parts","rest","part","style","trim","store","attribute","keys","styles","attr","copy","inline_InlineBlot","toLowerCase","formats","values","obj1","obj2","prop","isEqual","update","move","inline","block_BlockBlot","block","OBSERVER_CONFIG","characterData","characterDataOldValue","childList","subtree","MAX_OPTIMIZE_ITERATIONS","scroll_ScrollBlot","registry","observer","MutationObserver","observe","disconnect","mutationsMap","records","takeRecords","pop","mark","markParent","remaining","previousSibling","grandChild","blot_scroll","blot_embed","text_TextBlot","text","createTextNode","data","splitText","blot_text","_parchment","NEWLINE_LENGTH","Block","BlockBlot","cache","delta","blockDelta","lines","shift","lineIndex","line","Break","Inline","EmbedBlot","TextBlot","BlockEmbed","AttributorStore","Delta","insert","_extend2","default","BLOCK_ATTRIBUTE","endsWith","LeafBlot","bubbleFormats","hasOwn","toStr","arr","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","extend","src","copyIsArray","arguments","deep","InlineBlot","self","selfIndex","order","otherIndex","compare","diff","equal","op","NULL_CHARACTER","String","fromCharCode","ops","newOp","retain","lastOp","unshift","splice","chop","predicate","partition","passed","failed","initial","changeLength","elem","start","end","Infinity","iter","hasNext","nextOp","compose","thisIter","otherIter","peekType","peekLength","thisOp","otherOp","strings","diffResult","component","opLength","INSERT","DELETE","EQUAL","eachLine","newline","peek","transform","priority","transformPosition","nextType","Parchment","_selection","debug","_logger2","globalRegistry","Registry","Quill","limit","logger","level","instances","imports","error","overwrite","warn","startsWith","expandConfig","html","innerHTML","addContainer","addEventListener","preventDefault","scrollingContainer","emitter","Emitter","ScrollBlot","editor","Editor","selection","Selection","theme","keyboard","addModule","clipboard","history","uploader","init","on","events","EDITOR_CHANGE","TEXT_CHANGE","toggle","isBlank","SCROLL_UPDATE","source","range","lastRange","modify","contents","convert","setContents","clear","placeholder","readOnly","disable","blur","setRange","deleteText","_overload","overload","_overload2","_slicedToArray","enable","enabled","focus","scrollTop","scrollIntoView","sources","API","getSelection","change","formatLine","formatText","setSelection","SILENT","_overload3","_overload4","_overload5","_overload6","getBounds","bounds","containerBounds","getBoundingClientRect","bottom","top","height","left","right","width","getContents","getLength","_overload7","_overload8","getFormat","getIndex","getLeaf","getLine","getLines","getModule","getRange","getSemanticHTML","_overload9","_overload10","getHTML","getText","_overload11","_overload12","hasFocus","insertEmbed","embed","insertText","_overload13","_overload14","isEnabled","off","args","once","removeFormat","_overload15","_overload16","deleted","applied","applyDelta","_overload17","_overload18","Range","max","setText","USER","updateContents","userConfig","DEFAULTS","import","Theme","themeConfig","config","moduleConfig","moduleClass","toolbar","querySelector","modifier","oldDelta","shiftRange","emit","_map","pos","_map2","_map3","_map4","version","parchment","core/module","Module","core/theme","quill","eventName","querySelectorAll","handleDOM","EventEmitter","listeners","log","event","handler","listenDOM","SCROLL_BEFORE_UPDATE","SCROLL_BLOT_MOUNT","SCROLL_BLOT_UNMOUNT","SCROLL_OPTIMIZE","SELECTION_CHANGE","levels","method","console","namespace","newLevel","ContainerBlot","pSlice","objectKeys","isArguments","deepEqual","actual","expected","opts","Date","getTime","strict","isUndefinedOrNull","isBuffer","ka","kb","objEquiv","x","_dropdown","optionsCounter","toggleAriaAttribute","element","select","buildPicker","display","label","togglePicker","escape","buildItem","option","tabIndex","hasAttribute","textContent","selectItem","buildLabel","DropdownIcon","buildOptions","id","selected","close","setTimeout","trigger","selectedIndex","dispatchEvent","Event","isActive","_inline","Link","sanitize","url","PROTOCOL_WHITELIST","SANITIZED_URL","protocols","anchor","href","protocol","_text","Cursor","textNode","CONTENTS","savedLength","restore","composing","getNativeRange","restoreText","_ref","lastChild","startOffset","endNode","endOffset","align","","alignLeftIcon","center","alignCenterIcon","alignRightIcon","justify","alignJustifyIcon","background","backgroundIcon","blockquote","blockquoteIcon","bold","boldIcon","clean","cleanIcon","code","codeIcon","code-block","color","colorIcon","direction","directionLeftToRightIcon","rtl","directionRightToLeftIcon","formula","formulaIcon","header","1","headerIcon","2","header2Icon","italic","italicIcon","image","imageIcon","indent","+1","indentIcon","-1","outdentIcon","link","linkIcon","list","bullet","listBulletIcon","check","listCheckIcon","ordered","listOrderedIcon","script","sub","subscriptIcon","superscriptIcon","strike","strikeIcon","table","tableIcon","underline","underlineIcon","video","videoIcon","CodeBlockContainer","Container","innerText","CodeBlock","Code","TAB","ColorAttributor","StyleAttributor","ColorClass","ClassAttributor","ColorStyle","mouseDown","cursor","savedRange","handleComposition","handleDragging","native","setNativeRange","ignored","_context$range","nativeRange","collapsed","scrollLength","_scroll$leaf","_scroll$leaf2","_leaf$position","_leaf$position2","createRange","setStart","_scroll$leaf3","_scroll$leaf4","_leaf$position3","_leaf$position4","setEnd","rect","side","rangeCount","getRangeAt","normalizeNative","info","normalized","normalizedToRange","activeElement","positions","indexes","_position","startContainer","endContainer","rangeToNative","_scroll$leaf5","_scroll$leaf6","leafOffset","_leaf$position5","_leaf$position6","_scroll$line","first","last","_scroll$line3","scrollBounds","removeAllRanges","addRange","oldRange","_getRange","_getRange2","_deepEqual2","_clone2","_instanceof","nativeMap","nativeSet","nativePromise","Map","_","Set","Promise","circular","depth","includeNonEnumerable","allParents","allChildren","useBuffer","Buffer","_clone","proto","resolve","reject","then","__isArray","__isRegExp","RegExp","__getRegExpFlags","lastIndex","__isDate","allocUnsafe","getPrototypeOf","keyChild","valueChild","entryChild","attrs","getOwnPropertyDescriptor","getOwnPropertySymbols","symbols","symbol","descriptor","allPropertyNames","getOwnPropertyNames","propertyName","__objToStr","re","flags","global","ignoreCase","multiline","clonePrototype","lib","keepNull","Iterator","retOp","substr","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","listener","tooltip","textbox","hide","pickers","picker","removeEventListener","extendToolbar","buildButtons","buttons","icons","button","buildPickers","selects","fillSelect","IconPicker","ColorPicker","Picker","handlers","edit","fileInput","mimetypes","upload","files","click","defaultValue","BaseTooltip","Tooltip","boundsContainer","listen","save","cancel","preview","restoreFocus","linkRange","extractVideoUrl","TEMPLATE","marginTop","reference","offsetWidth","rootBounds","verticalShift","show","_picker","defaultItem","backgroundColor","colorLabel","stroke","fill","Bold","SizeClass","SizeStyle","FontClass","FontStyle","DirectionAttribute","Attributor","DirectionClass","DirectionStyle","_color","BackgroundClass","BackgroundStyle","AlignAttribute","AlignClass","AlignStyle","_align","_background","_direction","_font","_size","CLIPBOARD_CONFIG","matchText","matchNewline","deltaEndsWith","ELEMENT_NODE","matchBlot","matchAttributor","fontStyle","fontWeight","applyFormat","parseFloat","textIndent","includes","language","row","matchAlias","ATTRIBUTE_ATTRIBUTORS","STYLE_ATTRIBUTORS","Clipboard","onCaptureCopy","onCaptureCut","onCapturePaste","matchers","selector","matcher","addMatcher","ownerDocument","nodeMatches","_prepareMatching","prepareMatching","_prepareMatching2","elementMatchers","textMatchers","traverse","dangerouslyPasteHTML","paste","defaultPrevented","_quill$selection$getR","onCopy","_quill$selection$getR3","clipboardData","onPaste","setData","getData","pastedDelta","pair","_pair","newDelta","endText","isLine","preNodes","nodeType","childNode","childrenDelta","reducedDelta","isPre","replacer","collapse","replaced","GUARD_TEXT","contentNode","leftGuard","rightGuard","prevLength","ModuleClass","themes","_base","TOOLBAR_CONFIG","SnowTooltip","_quill$scroll$descend","LinkBlot","_quill$scroll$descend2","SnowTheme","addBinding","shortKey","test","BubbleTooltip","lastLine","indexBounds","arrow","marginLeft","BubbleTheme","Toolbar","addControls","controls","addHandler","prompt","addButton","groups","group","control","addSelect","TableCell","tableId","TableRow","thisHead","thisTail","nextHead","nextTail","childFormats","nextFormats","TableBody","TableContainer","balanceCells","rows","maxColumns","deleteColumn","_descendant","cell","at","insertColumn","_descendant3","insertRow","_descendant5","random","_table","listenBalanceCells","balanceTables","_getTable","getTable","_getTable2","column","deleteRow","_getTable3","deleteTable","_getTable5","_quill$getLine","_quill$getLine2","_getTable7","_getTable8","insertColumnLeft","insertColumnRight","_getTable9","_getTable10","insertRowAbove","insertRowBelow","insertTable","columns","old","_block","_code","_clipboard","TokenAttributor","CodeToken","SyntaxCodeBlock","SyntaxCodeBlockContainer","forceNext","emitMount","highlight","forced","cachedText","CursorBlot","BreakBlot","Syntax","hljs","highlightBlot","initListener","initTimer","languages","attachUI","timer","clearTimeout","interval","&","<",">","\"","'","nodeText","_link","ATTRIBUTES","Video","Image","navigator","userAgent","execCommand","_embed","Formula","Embed","katex","render","throwOnError","errorColor","Underline","Strike","Script","_bold","Italic","ListContainer","ListItem","listEventHandler","Header","Blockquote","IndentClass","Uploader","caretRangeFromPoint","clientX","clientY","caretPositionFromPoint","offsetNode","dataTransfer","uploads","file","promises","reader","FileReader","onload","result","readAsDataURL","all","images","SHORTKEY","platform","Keyboard","evt","binding","which","bindings","shiftKey","handleEnter","metaKey","ctrlKey","altKey","handleBackspace","handleDelete","suffix","handleDeleteRange","keyBinding","normalize","singleBinding","matches","_quill$getLeaf","_quill$getLeaf2","leafStart","offsetStart","_ref2","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","every","_quill$getLine11","_quill$getLine13","curFormats","prevFormats","DeltaOp","nextLength","_quill$getLine15","_quill$getLine17","firstFormats","lastFormats","lineFormats","makeCodeBlockHandler","makeEmbedArrowHandler","_quill$getLeaf3","makeFormatHandler","makeTableArrowHandler","up","targetRow","targetCell","targetLine","outdent","outdent backspace","indent code-block","outdent code-block","remove tab","tab","cutoff","blockquote empty enter","list empty enter","checklist enter","_quill$getLine3","_quill$getLine4","header enter","_quill$getLine5","_quill$getLine6","table backspace","table delete","table enter","_module$getTable","_module$getTable2","tableSide","table tab","list autofill","_quill$getLine7","_quill$getLine8","code exit","_quill$getLine9","_quill$getLine10","numLines","embed left","embed left shift","embed right","embed right shift","table down","table up","History","lastRecorded","ignoreChange","userOnly","record","undo","redo","dest","stack","getLastChangeIndex","changeDelta","undoDelta","timestamp","now","delay","maxStack","deleteLength","changeIndex","endsWithNewlineChange","Scroll","batchStart","batch","batchEnd","emitUnmount","_line","_line2","_line3","blotIndex","blotLength","childIndex","childLength","Events","addListener","fn","TypeError","_events","_eventsCount","clearEvent","__proto__","eventNames","ee","listenerCount","a1","a2","a3","a4","a5","len","removeListener","j","removeAllListeners","prefixed","ASCII","convertListHTML","items","lastIndent","_getListType","getListType","endTag","_items","_items$","_getListType3","_getListType4","convertHTML","_getListType5","_getListType7","isRoot","_blot$domNode","outerHTML","_outerHTML$split","_outerHTML$split2","combineFormats","combined","merged","getDelta","consumeNextNewline","normalizedDelta","normalizeDelta","_scroll$line2","_line$descendant","leaves","formatsArr","_scroll$line4","lineOffset","_scroll$line5","_scroll$line6","suffixLength","cursorIndex","textBlot","oldValue","oldText","newText","supportsArgumentsClass","supported","unsupported","propertyIsEnumerable","shim","DIFF_DELETE","DIFF_INSERT","DIFF_EQUAL","diff_main","text1","text2","cursor_pos","commonlength","diff_commonPrefix","commonprefix","substring","diff_commonSuffix","commonsuffix","diffs","longtext","shorttext","hm","diff_halfMatchI_","best_longtext_a","best_longtext_b","best_shorttext_a","best_shorttext_b","seed","floor","best_common","prefixLength","text1_a","text1_b","text2_a","text2_b","hm1","ceil","hm2","mid_common","diff_halfMatch_","diffs_a","diffs_b","text1_length","text2_length","max_d","v_offset","v_length","v1","v2","front","k1start","k1end","k2start","k2end","k1","k1_offset","y1","x1","charAt","k2_offset","x2","diff_bisectSplit_","k2","y2","diff_bisect_","diff_compute_","diff_cleanupMerge","pointer","count_delete","count_insert","text_delete","text_insert","changes","norm","current_pos","next_pos","split_pos","d_left","d_right","cursor_normalize_diff","ndiffs","cursor_pointer","d_next","merge_tuples","fix_cursor","compact","starts_with_pair_end","str","charCodeAt","fixed_diffs","fix_emoji","y","text1a","text2a","text1b","text2b","diffsb","pointermin","pointermax","pointermid","pointerstart","pointerend","left_d","right_d","blots/block","blots/block/embed","blots/break","blots/container","blots/cursor","blots/embed","blots/inline","blots/scroll","blots/text","modules/clipboard","modules/history","modules/keyboard","modules/uploader","attributors/attribute/direction","attributors/class/align","attributors/class/background","attributors/class/color","attributors/class/direction","attributors/class/font","attributors/class/size","attributors/style/align","attributors/style/background","attributors/style/color","attributors/style/direction","attributors/style/font","attributors/style/size","formats/align","formats/direction","formats/indent","Indent","formats/background","formats/color","formats/font","formats/size","formats/blockquote","formats/code-block","formats/header","formats/list","List","formats/bold","formats/code","InlineCode","formats/italic","formats/link","formats/script","formats/strike","formats/underline","formats/formula","formats/image","formats/video","modules/syntax","modules/table","Table","modules/toolbar","themes/bubble","themes/snow","ui/icons","Icons","ui/picker","ui/icon-picker","ui/color-picker","ui/tooltip"],"mappings":"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","file":"quill.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Quill\"] = factory();\n\telse\n\t\troot[\"Quill\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 93);\n","import LinkedNode from './linked-node';\n\nclass LinkedList<T extends LinkedNode> {\n  head: T | null;\n  tail: T | null;\n  length: number;\n\n  constructor() {\n    this.head = this.tail = null;\n    this.length = 0;\n  }\n\n  append(...nodes: T[]): void {\n    this.insertBefore(nodes[0], null);\n    if (nodes.length > 1) {\n      this.append.apply(this, nodes.slice(1));\n    }\n  }\n\n  at(index: number): T | null {\n    let cur,\n      next = this.iterator();\n    while ((cur = next()) && index > 0) {\n      index -= 1;\n    }\n    return cur;\n  }\n\n  contains(node: T): boolean {\n    let cur,\n      next = this.iterator();\n    while ((cur = next())) {\n      if (cur === node) return true;\n    }\n    return false;\n  }\n\n  indexOf(node: T): number {\n    let cur,\n      next = this.iterator(),\n      index = 0;\n    while ((cur = next())) {\n      if (cur === node) return index;\n      index += 1;\n    }\n    return -1;\n  }\n\n  insertBefore(node: T | null, refNode: T | null): void {\n    if (!node) return;\n    node.next = refNode;\n    if (refNode != null) {\n      node.prev = refNode.prev;\n      if (refNode.prev != null) {\n        refNode.prev.next = node;\n      }\n      refNode.prev = node;\n      if (refNode === this.head) {\n        this.head = node;\n      }\n    } else if (this.tail != null) {\n      this.tail.next = node;\n      node.prev = this.tail;\n      this.tail = node;\n    } else {\n      node.prev = null;\n      this.head = this.tail = node;\n    }\n    this.length += 1;\n  }\n\n  offset(target: T): number {\n    let index = 0,\n      cur = this.head;\n    while (cur != null) {\n      if (cur === target) return index;\n      index += cur.length();\n      cur = <T>cur.next;\n    }\n    return -1;\n  }\n\n  remove(node: T): void {\n    if (!this.contains(node)) return;\n    if (node.prev != null) node.prev.next = node.next;\n    if (node.next != null) node.next.prev = node.prev;\n    if (node === this.head) this.head = <T>node.next;\n    if (node === this.tail) this.tail = <T>node.prev;\n    this.length -= 1;\n  }\n\n  iterator(curNode: T | null = this.head): () => T | null {\n    // TODO use yield when we can\n    return function(): T | null {\n      let ret = curNode;\n      if (curNode != null) curNode = <T>curNode.next;\n      return ret;\n    };\n  }\n\n  find(index: number, inclusive: boolean = false): [T | null, number] {\n    let cur,\n      next = this.iterator();\n    while ((cur = next())) {\n      let length = cur.length();\n      if (\n        index < length ||\n        (inclusive &&\n          index === length &&\n          (cur.next == null || cur.next.length() !== 0))\n      ) {\n        return [cur, index];\n      }\n      index -= length;\n    }\n    return [null, 0];\n  }\n\n  forEach(callback: (cur: T) => void): void {\n    let cur,\n      next = this.iterator();\n    while ((cur = next())) {\n      callback(cur);\n    }\n  }\n\n  forEachAt(\n    index: number,\n    length: number,\n    callback: (cur: T, offset: number, length: number) => void,\n  ): void {\n    if (length <= 0) return;\n    let [startNode, offset] = this.find(index);\n    let cur,\n      curIndex = index - offset,\n      next = this.iterator(startNode);\n    while ((cur = next()) && curIndex < index + length) {\n      let curLength = cur.length();\n      if (index > curIndex) {\n        callback(\n          cur,\n          index - curIndex,\n          Math.min(length, curIndex + curLength - index),\n        );\n      } else {\n        callback(cur, 0, Math.min(curLength, index + length - curIndex));\n      }\n      curIndex += curLength;\n    }\n  }\n\n  map(callback: (cur: T) => any): any[] {\n    return this.reduce(function(memo: T[], cur: T) {\n      memo.push(callback(cur));\n      return memo;\n    }, []);\n  }\n\n  reduce<M>(callback: (memo: M, cur: T) => M, memo: M): M {\n    let cur,\n      next = this.iterator();\n    while ((cur = next())) {\n      memo = callback(memo, cur);\n    }\n    return memo;\n  }\n}\n\nexport default LinkedList;\n","enum Scope {\n  TYPE = (1 << 2) - 1, // 0011 Lower two bits\n  LEVEL = ((1 << 2) - 1) << 2, // 1100 Higher two bits\n\n  ATTRIBUTE = (1 << 0) | LEVEL, // 1101\n  BLOT = (1 << 1) | LEVEL, // 1110\n  INLINE = (1 << 2) | TYPE, // 0111\n  BLOCK = (1 << 3) | TYPE, // 1011\n\n  BLOCK_BLOT = BLOCK & BLOT, // 1010\n  INLINE_BLOT = INLINE & BLOT, // 0110\n  BLOCK_ATTRIBUTE = BLOCK & ATTRIBUTE, // 1001\n  INLINE_ATTRIBUTE = INLINE & ATTRIBUTE, // 0101\n\n  ANY = TYPE | LEVEL,\n}\n\nexport default Scope;\n","export default class ParchmentError extends Error {\n  message: string;\n  name: string;\n  stack!: string;\n\n  constructor(message: string) {\n    message = '[Parchment] ' + message;\n    super(message);\n    this.message = message;\n    this.name = (<any>this.constructor).name;\n  }\n}\n","import Attributor from './attributor/attributor';\nimport { Blot, BlotConstructor, Formattable, Root } from './blot/abstract/blot';\nimport ParchmentError from './error';\nimport Scope from './scope';\n\nexport interface RegistryInterface {\n  create(sroll: Root, input: Node | string | Scope, value?: any): Blot;\n  query(\n    query: string | Node | Scope,\n    scope: Scope,\n  ): Attributor | BlotConstructor | null;\n  register(...Definitions: any[]): any;\n}\n\nexport default class Registry implements RegistryInterface {\n  static blots = new WeakMap<Node, Blot>();\n\n  static find(node: Node | null, bubble: boolean = false): Blot | null {\n    if (node == null) return null;\n    if (this.blots.has(node)) return this.blots.get(node) || null;\n    if (bubble) return this.find(node.parentNode, bubble);\n    return null;\n  }\n\n  attributes: { [key: string]: Attributor } = {};\n  classes: { [key: string]: BlotConstructor } = {};\n  tags: { [key: string]: BlotConstructor } = {};\n  types: { [key: string]: Attributor | BlotConstructor } = {};\n\n  create(scroll: Root, input: Node | string | Scope, value?: any): Blot {\n    const match = this.query(input);\n    if (match == null) {\n      throw new ParchmentError(`Unable to create ${input} blot`);\n    }\n    const BlotClass = <BlotConstructor>match;\n    const node =\n      // @ts-ignore\n      input instanceof Node || input['nodeType'] === Node.TEXT_NODE\n        ? input\n        : BlotClass.create(value);\n\n    const blot = new BlotClass(scroll, <Node>node, value);\n    Registry.blots.set(blot.domNode, blot);\n    return blot;\n  }\n\n  find(node: Node | null, bubble: boolean = false): Blot | null {\n    return Registry.find(node, bubble);\n  }\n\n  query(\n    query: string | Node | Scope,\n    scope: Scope = Scope.ANY,\n  ): Attributor | BlotConstructor | null {\n    let match;\n    if (typeof query === 'string') {\n      match = this.types[query] || this.attributes[query];\n      // @ts-ignore\n    } else if (query instanceof Text || query['nodeType'] === Node.TEXT_NODE) {\n      match = this.types['text'];\n    } else if (typeof query === 'number') {\n      if (query & Scope.LEVEL & Scope.BLOCK) {\n        match = this.types['block'];\n      } else if (query & Scope.LEVEL & Scope.INLINE) {\n        match = this.types['inline'];\n      }\n    } else if (query instanceof HTMLElement) {\n      let names = (query.getAttribute('class') || '').split(/\\s+/);\n      for (let i in names) {\n        match = this.classes[names[i]];\n        if (match) break;\n      }\n      match = match || this.tags[query.tagName];\n    }\n    if (match == null) return null;\n    // @ts-ignore\n    if (scope & Scope.LEVEL & match.scope && scope & Scope.TYPE & match.scope)\n      return match;\n    return null;\n  }\n\n  register(...Definitions: any[]): any {\n    if (Definitions.length > 1) {\n      return Definitions.map(d => {\n        return this.register(d);\n      });\n    }\n    let Definition = Definitions[0];\n    if (\n      typeof Definition.blotName !== 'string' &&\n      typeof Definition.attrName !== 'string'\n    ) {\n      throw new ParchmentError('Invalid definition');\n    } else if (Definition.blotName === 'abstract') {\n      throw new ParchmentError('Cannot register abstract class');\n    }\n    this.types[Definition.blotName || Definition.attrName] = Definition;\n    if (typeof Definition.keyName === 'string') {\n      this.attributes[Definition.keyName] = Definition;\n    } else {\n      if (Definition.className != null) {\n        this.classes[Definition.className] = Definition;\n      }\n      if (Definition.tagName != null) {\n        if (Array.isArray(Definition.tagName)) {\n          Definition.tagName = Definition.tagName.map(function(\n            tagName: string,\n          ) {\n            return tagName.toUpperCase();\n          });\n        } else {\n          Definition.tagName = Definition.tagName.toUpperCase();\n        }\n        let tagNames = Array.isArray(Definition.tagName)\n          ? Definition.tagName\n          : [Definition.tagName];\n        tagNames.forEach((tag: string) => {\n          if (this.tags[tag] == null || Definition.className == null) {\n            this.tags[tag] = Definition;\n          }\n        });\n      }\n    }\n    return Definition;\n  }\n}\n","import { Blot, BlotConstructor, Formattable, Parent, Root } from './blot';\nimport ParchmentError from '../../error';\nimport Scope from '../../scope';\nimport Registry from '../../registry';\n\nclass ShadowBlot implements Blot {\n  static blotName = 'abstract';\n  static className: string;\n  static requiredContainer: BlotConstructor;\n  static scope: Scope;\n  static tagName: string;\n\n  prev: Blot | null;\n  next: Blot | null;\n  // @ts-ignore\n  parent: Parent;\n\n  // Hack for accessing inherited static methods\n  get statics(): any {\n    return this.constructor;\n  }\n\n  static create(value: any): Node {\n    if (this.tagName == null) {\n      throw new ParchmentError('Blot definition missing tagName');\n    }\n    let node;\n    if (Array.isArray(this.tagName)) {\n      if (typeof value === 'string') {\n        value = value.toUpperCase();\n        if (parseInt(value).toString() === value) {\n          value = parseInt(value);\n        }\n      }\n      if (typeof value === 'number') {\n        node = document.createElement(this.tagName[value - 1]);\n      } else if (this.tagName.indexOf(value) > -1) {\n        node = document.createElement(value);\n      } else {\n        node = document.createElement(this.tagName[0]);\n      }\n    } else {\n      node = document.createElement(this.tagName);\n    }\n    if (this.className) {\n      node.classList.add(this.className);\n    }\n    return node;\n  }\n\n  constructor(public scroll: Root, public domNode: Node) {\n    Registry.blots.set(domNode, this);\n    this.prev = null;\n    this.next = null;\n  }\n\n  attach(): void {\n    // Nothing to do\n  }\n\n  clone(): Blot {\n    let domNode = this.domNode.cloneNode(false);\n    return this.scroll.create(domNode);\n  }\n\n  detach() {\n    if (this.parent != null) this.parent.removeChild(this);\n    Registry.blots.delete(this.domNode);\n  }\n\n  deleteAt(index: number, length: number): void {\n    let blot = this.isolate(index, length);\n    blot.remove();\n  }\n\n  formatAt(index: number, length: number, name: string, value: any): void {\n    let blot = this.isolate(index, length);\n    if (this.scroll.query(name, Scope.BLOT) != null && value) {\n      blot.wrap(name, value);\n    } else if (this.scroll.query(name, Scope.ATTRIBUTE) != null) {\n      let parent = <Parent & Formattable>this.scroll.create(this.statics.scope);\n      blot.wrap(parent);\n      parent.format(name, value);\n    }\n  }\n\n  insertAt(index: number, value: string, def?: any): void {\n    let blot =\n      def == null\n        ? this.scroll.create('text', value)\n        : this.scroll.create(value, def);\n    let ref = this.split(index);\n    this.parent.insertBefore(blot, ref || undefined);\n  }\n\n  isolate(index: number, length: number): Blot {\n    let target = this.split(index);\n    if (target == null) {\n      throw new Error('Attempt to isolate at end');\n    }\n    target.split(length);\n    return target;\n  }\n\n  length(): number {\n    return 1;\n  }\n\n  offset(root: Blot = this.parent): number {\n    if (this.parent == null || this == root) return 0;\n    return this.parent.children.offset(this) + this.parent.offset(root);\n  }\n\n  optimize(context: { [key: string]: any }): void {\n    if (\n      this.statics.requiredContainer &&\n      !(this.parent instanceof this.statics.requiredContainer)\n    ) {\n      this.wrap(this.statics.requiredContainer.blotName);\n    }\n  }\n\n  remove(): void {\n    if (this.domNode.parentNode != null) {\n      this.domNode.parentNode.removeChild(this.domNode);\n    }\n    this.detach();\n  }\n\n  replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement =\n      typeof name === 'string' ? this.scroll.create(name, value) : name;\n    if (this.parent != null) {\n      this.parent.insertBefore(replacement, this.next || undefined);\n      this.remove();\n    }\n    return replacement;\n  }\n\n  split(index: number, force?: boolean): Blot | null {\n    return index === 0 ? this : this.next;\n  }\n\n  update(mutations: MutationRecord[], context: { [key: string]: any }): void {\n    // Nothing to do by default\n  }\n\n  wrap(name: string | Parent, value?: any): Parent {\n    let wrapper =\n      typeof name === 'string' ? <Parent>this.scroll.create(name, value) : name;\n    if (this.parent != null) {\n      this.parent.insertBefore(wrapper, this.next || undefined);\n    }\n    wrapper.appendChild(this);\n    return wrapper;\n  }\n}\n\nexport default ShadowBlot;\n","import { Blot, BlotConstructor, Leaf, Parent, Root } from './blot';\nimport LinkedList from '../../collection/linked-list';\nimport ShadowBlot from './shadow';\nimport ParchmentError from '../../error';\nimport Registry from '../../registry';\nimport Scope from '../../scope';\n\nclass ParentBlot extends ShadowBlot implements Parent {\n  static defaultChild: BlotConstructor | null;\n  static allowedChildren: BlotConstructor[] | null;\n\n  children!: LinkedList<Blot>;\n  domNode!: HTMLElement;\n  uiNode: HTMLElement | null = null;\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.build();\n  }\n\n  appendChild(other: Blot): void {\n    this.insertBefore(other);\n  }\n\n  attach(): void {\n    super.attach();\n    this.children.forEach(child => {\n      child.attach();\n    });\n  }\n\n  attachUI(node: HTMLElement) {\n    if (this.uiNode != null) {\n      this.uiNode.remove();\n    }\n    this.uiNode = node;\n    this.uiNode.setAttribute('contenteditable', 'false');\n    this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n  }\n\n  build(): void {\n    this.children = new LinkedList<Blot>();\n    // Need to be reversed for if DOM nodes already in order\n    Array.from(this.domNode.childNodes)\n      .filter((node: Node) => node !== this.uiNode)\n      .reverse()\n      .forEach((node: Node) => {\n        try {\n          let child = makeAttachedBlot(node, this.scroll);\n          this.insertBefore(child, this.children.head || undefined);\n        } catch (err) {\n          if (err instanceof ParchmentError) return;\n          else throw err;\n        }\n      });\n  }\n\n  deleteAt(index: number, length: number): void {\n    if (index === 0 && length === this.length()) {\n      return this.remove();\n    }\n    this.children.forEachAt(index, length, function(child, offset, length) {\n      child.deleteAt(offset, length);\n    });\n  }\n\n  descendant(criteria: { new (): Blot }, index: number): [Blot | null, number];\n  descendant(\n    criteria: (blot: Blot) => boolean,\n    index: number,\n  ): [Blot | null, number];\n  descendant(criteria: any, index: number = 0): [Blot | null, number] {\n    let [child, offset] = this.children.find(index);\n    if (\n      (criteria.blotName == null && criteria(child)) ||\n      (criteria.blotName != null && child instanceof criteria)\n    ) {\n      return [<any>child, offset];\n    } else if (child instanceof ParentBlot) {\n      return child.descendant(criteria, offset);\n    } else {\n      return [null, -1];\n    }\n  }\n\n  descendants(\n    criteria: { new (): Blot },\n    index: number,\n    length: number,\n  ): Blot[];\n  descendants(\n    criteria: (blot: Blot) => boolean,\n    index: number,\n    length: number,\n  ): Blot[];\n  descendants(\n    criteria: any,\n    index: number = 0,\n    length: number = Number.MAX_VALUE,\n  ): Blot[] {\n    let descendants: Blot[] = [];\n    let lengthLeft = length;\n    this.children.forEachAt(index, length, function(\n      child: Blot,\n      index: number,\n      length: number,\n    ) {\n      if (\n        (criteria.blotName == null && criteria(child)) ||\n        (criteria.blotName != null && child instanceof criteria)\n      ) {\n        descendants.push(child);\n      }\n      if (child instanceof ParentBlot) {\n        descendants = descendants.concat(\n          child.descendants(criteria, index, lengthLeft),\n        );\n      }\n      lengthLeft -= length;\n    });\n    return descendants;\n  }\n\n  detach(): void {\n    this.children.forEach(function(child) {\n      child.detach();\n    });\n    super.detach();\n  }\n\n  enforceAllowedChildren() {\n    let done = false;\n    const children = this.children.forEach((child: Blot) => {\n      if (done) return;\n      const allowed = this.statics.allowedChildren.some(\n        (def: BlotConstructor) => child instanceof def,\n      );\n      if (allowed) return;\n      if (child.statics.scope === Scope.BLOCK_BLOT) {\n        if (child.next != null) {\n          this.splitAfter(child);\n        }\n        if (child.prev != null) {\n          this.splitAfter(child.prev);\n        }\n        child.parent.unwrap();\n        done = true;\n      } else if (child instanceof ParentBlot) {\n        child.unwrap();\n      } else {\n        child.remove();\n      }\n    });\n  }\n\n  formatAt(index: number, length: number, name: string, value: any): void {\n    this.children.forEachAt(index, length, function(child, offset, length) {\n      child.formatAt(offset, length, name, value);\n    });\n  }\n\n  insertAt(index: number, value: string, def?: any): void {\n    let [child, offset] = this.children.find(index);\n    if (child) {\n      child.insertAt(offset, value, def);\n    } else {\n      let blot =\n        def == null\n          ? this.scroll.create('text', value)\n          : this.scroll.create(value, def);\n      this.appendChild(blot);\n    }\n  }\n\n  insertBefore(childBlot: Blot, refBlot?: Blot | null): void {\n    if (childBlot.parent != null) {\n      childBlot.parent.children.remove(childBlot);\n    }\n    let refDomNode: Node | null = null;\n    this.children.insertBefore(childBlot, refBlot || null);\n    if (refBlot != null) {\n      refDomNode = refBlot.domNode;\n    }\n    if (\n      this.domNode.parentNode != childBlot.domNode ||\n      this.domNode.nextSibling != refDomNode\n    ) {\n      this.domNode.insertBefore(childBlot.domNode, refDomNode);\n    }\n    childBlot.parent = this;\n    childBlot.attach();\n  }\n\n  length(): number {\n    return this.children.reduce(function(memo, child) {\n      return memo + child.length();\n    }, 0);\n  }\n\n  moveChildren(targetParent: Parent, refNode?: Blot): void {\n    this.children.forEach(function(child) {\n      targetParent.insertBefore(child, refNode);\n    });\n  }\n\n  optimize(context: { [key: string]: any }) {\n    super.optimize(context);\n    this.enforceAllowedChildren();\n    if (this.uiNode != null && this.uiNode !== this.domNode.firstChild) {\n      this.domNode.insertBefore(this.uiNode, this.domNode.firstChild);\n    }\n    if (this.children.length === 0) {\n      if (this.statics.defaultChild != null) {\n        let child = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(child);\n        // TODO double check if necessary\n        // child.optimize(context);\n      } else {\n        this.remove();\n      }\n    }\n  }\n\n  path(index: number, inclusive: boolean = false): [Blot, number][] {\n    let [child, offset] = this.children.find(index, inclusive);\n    let position: [Blot, number][] = [[this, index]];\n    if (child instanceof ParentBlot) {\n      return position.concat(child.path(offset, inclusive));\n    } else if (child != null) {\n      position.push([child, offset]);\n    }\n    return position;\n  }\n\n  removeChild(child: Blot): void {\n    this.children.remove(child);\n  }\n\n  replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement =\n      typeof name === 'string' ? this.scroll.create(name, value) : name;\n    if (replacement instanceof ParentBlot) {\n      this.moveChildren(replacement);\n    }\n    return super.replaceWith(replacement);\n  }\n\n  split(index: number, force: boolean = false): Blot | null {\n    if (!force) {\n      if (index === 0) return this;\n      if (index === this.length()) return this.next;\n    }\n    let after = <ParentBlot>this.clone();\n    if (this.parent) {\n      this.parent.insertBefore(after, this.next || undefined);\n    }\n    this.children.forEachAt(index, this.length(), function(\n      child,\n      offset,\n      length,\n    ) {\n      const split = child.split(offset, force);\n      if (split != null) {\n        after.appendChild(split);\n      }\n    });\n    return after;\n  }\n\n  splitAfter(child: Blot): Parent {\n    let after = <ParentBlot>this.clone();\n    while (child.next != null) {\n      after.appendChild(child.next);\n    }\n    if (this.parent) {\n      this.parent.insertBefore(after, this.next || undefined);\n    }\n    return after;\n  }\n\n  unwrap(): void {\n    if (this.parent) {\n      this.moveChildren(this.parent, this.next || undefined);\n    }\n    this.remove();\n  }\n\n  update(mutations: MutationRecord[], context: { [key: string]: any }): void {\n    let addedNodes: Node[] = [];\n    let removedNodes: Node[] = [];\n    mutations.forEach(mutation => {\n      if (mutation.target === this.domNode && mutation.type === 'childList') {\n        addedNodes.push.apply(addedNodes, mutation.addedNodes);\n        removedNodes.push.apply(removedNodes, mutation.removedNodes);\n      }\n    });\n    removedNodes.forEach((node: Node) => {\n      // Check node has actually been removed\n      // One exception is Chrome does not immediately remove IFRAMEs\n      // from DOM but MutationRecord is correct in its reported removal\n      if (\n        node.parentNode != null &&\n        // @ts-ignore\n        node.tagName !== 'IFRAME' &&\n        document.body.compareDocumentPosition(node) &\n          Node.DOCUMENT_POSITION_CONTAINED_BY\n      ) {\n        return;\n      }\n      let blot = this.scroll.find(node);\n      if (blot == null) return;\n      if (\n        blot.domNode.parentNode == null ||\n        blot.domNode.parentNode === this.domNode\n      ) {\n        blot.detach();\n      }\n    });\n    addedNodes\n      .filter(node => {\n        return node.parentNode === this.domNode || node === this.uiNode;\n      })\n      .sort(function(a, b) {\n        if (a === b) return 0;\n        if (a.compareDocumentPosition(b) & Node.DOCUMENT_POSITION_FOLLOWING) {\n          return 1;\n        }\n        return -1;\n      })\n      .forEach(node => {\n        let refBlot: Blot | null = null;\n        if (node.nextSibling != null) {\n          refBlot = this.scroll.find(node.nextSibling);\n        }\n        let blot = makeAttachedBlot(node, this.scroll);\n        if (blot.next != refBlot || blot.next == null) {\n          if (blot.parent != null) {\n            blot.parent.removeChild(this);\n          }\n          this.insertBefore(blot, refBlot || undefined);\n        }\n      });\n    this.enforceAllowedChildren();\n  }\n}\n\nfunction makeAttachedBlot(node: Node, scroll: Root): Blot {\n  let blot = scroll.find(node);\n  if (blot == null) {\n    try {\n      blot = scroll.create(node);\n    } catch (e) {\n      blot = <Blot>scroll.create(Scope.INLINE);\n      Array.from(node.childNodes).forEach(function(child: Node) {\n        // @ts-ignore\n        blot.domNode.appendChild(child);\n      });\n      if (node.parentNode) {\n        node.parentNode.replaceChild(blot.domNode, node);\n      }\n      blot.attach();\n    }\n  }\n  return <Blot>blot;\n}\n\nexport default ParentBlot;\n","import { Blot } from './blot';\nimport ParentBlot from './parent';\nimport BlockBlot from '../block';\nimport Scope from '../../scope';\n\nclass ContainerBlot extends ParentBlot {\n  static blotName = 'container';\n  static scope = Scope.BLOCK_BLOT;\n  static tagName: string;\n\n  prev!: BlockBlot | ContainerBlot | null;\n  next!: BlockBlot | ContainerBlot | null;\n\n  checkMerge(): boolean {\n    return (\n      this.next !== null && this.next.statics.blotName === this.statics.blotName\n    );\n  }\n\n  deleteAt(index: number, length: number): void {\n    super.deleteAt(index, length);\n    this.enforceAllowedChildren();\n  }\n\n  formatAt(index: number, length: number, name: string, value: any): void {\n    super.formatAt(index, length, name, value);\n    this.enforceAllowedChildren();\n  }\n\n  insertAt(index: number, value: string, def?: any): void {\n    super.insertAt(index, value, def);\n    this.enforceAllowedChildren();\n  }\n\n  optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    if (this.children.length > 0 && this.next != null && this.checkMerge()) {\n      this.next.moveChildren(this);\n      this.next.remove();\n    }\n  }\n}\n\nexport default ContainerBlot;\n","import { Formattable, Leaf } from './blot';\nimport ShadowBlot from './shadow';\nimport Scope from '../../scope';\n\nclass LeafBlot extends ShadowBlot implements Leaf {\n  static scope = Scope.INLINE_BLOT;\n\n  static value(domNode: Node): any {\n    return true;\n  }\n\n  index(node: Node, offset: number): number {\n    if (\n      this.domNode === node ||\n      this.domNode.compareDocumentPosition(node) &\n        Node.DOCUMENT_POSITION_CONTAINED_BY\n    ) {\n      return Math.min(offset, 1);\n    }\n    return -1;\n  }\n\n  position(index: number, inclusive?: boolean): [Node, number] {\n    const childNodes: Node[] = Array.from(this.parent.domNode.childNodes);\n    let offset = childNodes.indexOf(this.domNode);\n    if (index > 0) offset += 1;\n    return [this.parent.domNode, offset];\n  }\n\n  value(): any {\n    return {\n      [this.statics.blotName]: this.statics.value(this.domNode) || true,\n    };\n  }\n}\n\nexport default LeafBlot;\n","import Registry from '../registry';\nimport Scope from '../scope';\n\nexport interface AttributorOptions {\n  scope?: Scope;\n  whitelist?: string[];\n}\n\nexport default class Attributor {\n  attrName: string;\n  keyName: string;\n  scope: Scope;\n  whitelist: string[] | undefined;\n\n  static keys(node: HTMLElement): string[] {\n    return Array.from(node.attributes).map(function(item: Attr) {\n      return item.name;\n    });\n  }\n\n  constructor(\n    attrName: string,\n    keyName: string,\n    options: AttributorOptions = {},\n  ) {\n    this.attrName = attrName;\n    this.keyName = keyName;\n    let attributeBit = Scope.TYPE & Scope.ATTRIBUTE;\n    if (options.scope != null) {\n      // Ignore type bits, force attribute bit\n      this.scope = (options.scope & Scope.LEVEL) | attributeBit;\n    } else {\n      this.scope = Scope.ATTRIBUTE;\n    }\n    if (options.whitelist != null) this.whitelist = options.whitelist;\n  }\n\n  add(node: HTMLElement, value: string): boolean {\n    if (!this.canAdd(node, value)) return false;\n    node.setAttribute(this.keyName, value);\n    return true;\n  }\n\n  canAdd(node: HTMLElement, value: any): boolean {\n    if (this.whitelist == null) return true;\n    if (typeof value === 'string') {\n      return this.whitelist.indexOf(value.replace(/[\"']/g, '')) > -1;\n    } else {\n      return this.whitelist.indexOf(value) > -1;\n    }\n  }\n\n  remove(node: HTMLElement): void {\n    node.removeAttribute(this.keyName);\n  }\n\n  value(node: HTMLElement): string {\n    let value = node.getAttribute(this.keyName);\n    if (this.canAdd(node, value) && value) {\n      return value;\n    }\n    return '';\n  }\n}\n","import Attributor from './attributor';\n\nfunction match(node: HTMLElement, prefix: string): string[] {\n  let className = node.getAttribute('class') || '';\n  return className.split(/\\s+/).filter(function(name) {\n    return name.indexOf(`${prefix}-`) === 0;\n  });\n}\n\nclass ClassAttributor extends Attributor {\n  static keys(node: HTMLElement): string[] {\n    return (node.getAttribute('class') || '').split(/\\s+/).map(function(name) {\n      return name\n        .split('-')\n        .slice(0, -1)\n        .join('-');\n    });\n  }\n\n  add(node: HTMLElement, value: string): boolean {\n    if (!this.canAdd(node, value)) return false;\n    this.remove(node);\n    node.classList.add(`${this.keyName}-${value}`);\n    return true;\n  }\n\n  remove(node: HTMLElement): void {\n    let matches = match(node, this.keyName);\n    matches.forEach(function(name) {\n      node.classList.remove(name);\n    });\n    if (node.classList.length === 0) {\n      node.removeAttribute('class');\n    }\n  }\n\n  value(node: HTMLElement): string {\n    let result = match(node, this.keyName)[0] || '';\n    let value = result.slice(this.keyName.length + 1); // +1 for hyphen\n    return this.canAdd(node, value) ? value : '';\n  }\n}\n\nexport default ClassAttributor;\n","import Attributor from './attributor';\n\nfunction camelize(name: string): string {\n  let parts = name.split('-');\n  let rest = parts\n    .slice(1)\n    .map(function(part: string) {\n      return part[0].toUpperCase() + part.slice(1);\n    })\n    .join('');\n  return parts[0] + rest;\n}\n\nclass StyleAttributor extends Attributor {\n  static keys(node: Element): string[] {\n    return (node.getAttribute('style') || '').split(';').map(function(value) {\n      let arr = value.split(':');\n      return arr[0].trim();\n    });\n  }\n\n  add(node: HTMLElement, value: string): boolean {\n    if (!this.canAdd(node, value)) return false;\n    // @ts-ignore\n    node.style[camelize(this.keyName)] = value;\n    return true;\n  }\n\n  remove(node: HTMLElement): void {\n    // @ts-ignore\n    node.style[camelize(this.keyName)] = '';\n    if (!node.getAttribute('style')) {\n      node.removeAttribute('style');\n    }\n  }\n\n  value(node: HTMLElement): string {\n    // @ts-ignore\n    let value = node.style[camelize(this.keyName)];\n    return this.canAdd(node, value) ? value : '';\n  }\n}\n\nexport default StyleAttributor;\n","import Attributor from './attributor';\nimport ClassAttributor from './class';\nimport StyleAttributor from './style';\nimport { Formattable } from '../blot/abstract/blot';\nimport Registry from '../registry';\nimport Scope from '../scope';\n\nclass AttributorStore {\n  private attributes: { [key: string]: Attributor } = {};\n  private domNode: HTMLElement;\n\n  constructor(domNode: HTMLElement) {\n    this.domNode = domNode;\n    this.build();\n  }\n\n  attribute(attribute: Attributor, value: any): void {\n    // verb\n    if (value) {\n      if (attribute.add(this.domNode, value)) {\n        if (attribute.value(this.domNode) != null) {\n          this.attributes[attribute.attrName] = attribute;\n        } else {\n          delete this.attributes[attribute.attrName];\n        }\n      }\n    } else {\n      attribute.remove(this.domNode);\n      delete this.attributes[attribute.attrName];\n    }\n  }\n\n  build(): void {\n    this.attributes = {};\n    const blot = Registry.find(this.domNode);\n    if (blot == null) return;\n    let attributes = Attributor.keys(this.domNode);\n    let classes = ClassAttributor.keys(this.domNode);\n    let styles = StyleAttributor.keys(this.domNode);\n    attributes\n      .concat(classes)\n      .concat(styles)\n      .forEach(name => {\n        let attr = blot.scroll.query(name, Scope.ATTRIBUTE);\n        if (attr instanceof Attributor) {\n          this.attributes[attr.attrName] = attr;\n        }\n      });\n  }\n\n  copy(target: Formattable): void {\n    Object.keys(this.attributes).forEach(key => {\n      let value = this.attributes[key].value(this.domNode);\n      target.format(key, value);\n    });\n  }\n\n  move(target: Formattable): void {\n    this.copy(target);\n    Object.keys(this.attributes).forEach(key => {\n      this.attributes[key].remove(this.domNode);\n    });\n    this.attributes = {};\n  }\n\n  values(): { [key: string]: any } {\n    return Object.keys(this.attributes).reduce(\n      (attributes: { [key: string]: any }, name: string) => {\n        attributes[name] = this.attributes[name].value(this.domNode);\n        return attributes;\n      },\n      {},\n    );\n  }\n}\n\nexport default AttributorStore;\n","import Attributor from '../attributor/attributor';\nimport AttributorStore from '../attributor/store';\nimport {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Parent,\n  Root,\n} from './abstract/blot';\nimport ParentBlot from './abstract/parent';\nimport LeafBlot from './abstract/leaf';\nimport ShadowBlot from './abstract/shadow';\nimport Scope from '../scope';\n\n// Shallow object comparison\nfunction isEqual(obj1: Object, obj2: Object): boolean {\n  if (Object.keys(obj1).length !== Object.keys(obj2).length) return false;\n  // @ts-ignore\n  for (let prop in obj1) {\n    // @ts-ignore\n    if (obj1[prop] !== obj2[prop]) return false;\n  }\n  return true;\n}\n\nclass InlineBlot extends ParentBlot implements Formattable {\n  static allowedChildren: BlotConstructor[] = [InlineBlot, LeafBlot];\n  static blotName = 'inline';\n  static scope = Scope.INLINE_BLOT;\n  static tagName = 'SPAN';\n  protected attributes: AttributorStore;\n\n  static formats(domNode: HTMLElement, scroll: Root): any {\n    const match = scroll.query(InlineBlot.blotName);\n    if (match != null && domNode.tagName === (<BlotConstructor>match).tagName) {\n      return undefined;\n    } else if (typeof this.tagName === 'string') {\n      return true;\n    } else if (Array.isArray(this.tagName)) {\n      return domNode.tagName.toLowerCase();\n    }\n    return undefined;\n  }\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  format(name: string, value: any) {\n    if (name === this.statics.blotName && !value) {\n      this.children.forEach(child => {\n        if (!(child instanceof InlineBlot)) {\n          child = child.wrap(InlineBlot.blotName, true);\n        }\n        this.attributes.copy(<InlineBlot>child);\n      });\n      this.unwrap();\n    } else {\n      const format = this.scroll.query(name, Scope.INLINE);\n      if (format == null) return;\n      if (format instanceof Attributor) {\n        this.attributes.attribute(format, value);\n      } else if (\n        value &&\n        (name !== this.statics.blotName || this.formats()[name] !== value)\n      ) {\n        this.replaceWith(name, value);\n      }\n    }\n  }\n\n  formats(): { [index: string]: any } {\n    let formats = this.attributes.values();\n    let format = this.statics.formats(this.domNode, this.scroll);\n    if (format != null) {\n      formats[this.statics.blotName] = format;\n    }\n    return formats;\n  }\n\n  formatAt(index: number, length: number, name: string, value: any): void {\n    if (\n      this.formats()[name] != null ||\n      this.scroll.query(name, Scope.ATTRIBUTE)\n    ) {\n      let blot = <InlineBlot>this.isolate(index, length);\n      blot.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    let formats = this.formats();\n    if (Object.keys(formats).length === 0) {\n      return this.unwrap(); // unformatted span\n    }\n    let next = this.next;\n    if (\n      next instanceof InlineBlot &&\n      next.prev === this &&\n      isEqual(formats, next.formats())\n    ) {\n      next.moveChildren(this);\n      next.remove();\n    }\n  }\n\n  replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement = <InlineBlot>super.replaceWith(name, value);\n    this.attributes.copy(replacement);\n    return replacement;\n  }\n\n  update(mutations: MutationRecord[], context: { [key: string]: any }): void {\n    super.update(mutations, context);\n    const attributeChanged = mutations.some(\n      mutation =>\n        mutation.target === this.domNode && mutation.type === 'attributes',\n    );\n    if (attributeChanged) {\n      this.attributes.build();\n    }\n  }\n\n  wrap(name: string | Parent, value?: any): Parent {\n    const wrapper = super.wrap(name, value);\n    if (wrapper instanceof InlineBlot) {\n      this.attributes.move(wrapper);\n    }\n    return wrapper;\n  }\n}\n\nexport default InlineBlot;\n","import Attributor from '../attributor/attributor';\nimport AttributorStore from '../attributor/store';\nimport {\n  Blot,\n  BlotConstructor,\n  Formattable,\n  Parent,\n  Root,\n} from './abstract/blot';\nimport ParentBlot from './abstract/parent';\nimport ShadowBlot from './abstract/shadow';\nimport LeafBlot from './abstract/leaf';\nimport InlineBlot from './inline';\nimport Scope from '../scope';\n\nclass BlockBlot extends ParentBlot implements Formattable {\n  static allowedChildren: BlotConstructor[] = [InlineBlot, BlockBlot, LeafBlot];\n  static blotName = 'block';\n  static scope = Scope.BLOCK_BLOT;\n  static tagName = 'P';\n  protected attributes: AttributorStore;\n\n  static formats(domNode: HTMLElement, scroll: Root): any {\n    const match = scroll.query(BlockBlot.blotName);\n    if (match != null && domNode.tagName === (<BlotConstructor>match).tagName) {\n      return undefined;\n    } else if (typeof this.tagName === 'string') {\n      return true;\n    } else if (Array.isArray(this.tagName)) {\n      return domNode.tagName.toLowerCase();\n    }\n  }\n\n  constructor(scroll: Root, domNode: Node) {\n    super(scroll, domNode);\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  format(name: string, value: any) {\n    const format = this.scroll.query(name, Scope.BLOCK);\n    if (format == null) {\n      return;\n    } else if (format instanceof Attributor) {\n      this.attributes.attribute(format, value);\n    } else if (name === this.statics.blotName && !value) {\n      this.replaceWith(BlockBlot.blotName);\n    } else if (\n      value &&\n      (name !== this.statics.blotName || this.formats()[name] !== value)\n    ) {\n      this.replaceWith(name, value);\n    }\n  }\n\n  formats(): { [index: string]: any } {\n    const formats = this.attributes.values();\n    const format = this.statics.formats(this.domNode, this.scroll);\n    if (format != null) {\n      formats[this.statics.blotName] = format;\n    }\n    return formats;\n  }\n\n  formatAt(index: number, length: number, name: string, value: any): void {\n    if (this.scroll.query(name, Scope.BLOCK) != null) {\n      this.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  insertAt(index: number, value: string, def?: any): void {\n    if (def == null || this.scroll.query(value, Scope.INLINE) != null) {\n      // Insert text or inline\n      super.insertAt(index, value, def);\n    } else {\n      const after = this.split(index);\n      if (after != null) {\n        const blot = this.scroll.create(value, def);\n        after.parent.insertBefore(blot, after);\n      } else {\n        throw new Error('Attempt to insertAt after block boundaries');\n      }\n    }\n  }\n\n  replaceWith(name: string | Blot, value?: any): Blot {\n    const replacement = <BlockBlot>super.replaceWith(name, value);\n    this.attributes.copy(replacement);\n    return replacement;\n  }\n\n  update(mutations: MutationRecord[], context: { [key: string]: any }): void {\n    super.update(mutations, context);\n    const attributeChanged = mutations.some(\n      mutation =>\n        mutation.target === this.domNode && mutation.type === 'attributes',\n    );\n    if (attributeChanged) {\n      this.attributes.build();\n    }\n  }\n}\n\nexport default BlockBlot;\n","import Attributor from '../attributor/attributor';\nimport { BlotConstructor, Blot, Root } from './abstract/blot';\nimport ParentBlot from './abstract/parent';\nimport ContainerBlot from './abstract/container';\nimport BlockBlot from './block';\nimport LinkedList from '../collection/linked-list';\nimport ParchmentError from '../error';\nimport Registry from '../registry';\nimport Scope from '../scope';\n\nconst OBSERVER_CONFIG = {\n  attributes: true,\n  characterData: true,\n  characterDataOldValue: true,\n  childList: true,\n  subtree: true,\n};\n\nconst MAX_OPTIMIZE_ITERATIONS = 100;\n\nclass ScrollBlot extends ParentBlot implements Root {\n  static blotName = 'scroll';\n  static defaultChild = BlockBlot;\n  static allowedChildren: BlotConstructor[] = [BlockBlot, ContainerBlot];\n  static scope = Scope.BLOCK_BLOT;\n  static tagName = 'DIV';\n\n  registry: Registry;\n  observer: MutationObserver;\n\n  constructor(registry: Registry, node: HTMLDivElement) {\n    // @ts-ignore\n    super(null, node);\n    this.registry = registry;\n    this.scroll = this;\n    this.build();\n    this.observer = new MutationObserver((mutations: MutationRecord[]) => {\n      this.update(mutations);\n    });\n    this.observer.observe(this.domNode, OBSERVER_CONFIG);\n    this.attach();\n  }\n\n  create(input: Node | string | Scope, value?: any): Blot {\n    return this.registry.create(this, input, value);\n  }\n\n  find(node: Node | null, bubble: boolean = false): Blot | null {\n    return this.registry.find(node, bubble);\n  }\n\n  query(\n    query: string | Node | Scope,\n    scope: Scope = Scope.ANY,\n  ): Attributor | BlotConstructor | null {\n    return this.registry.query(query, scope);\n  }\n\n  register(...Definitions: any[]): any {\n    return this.registry.register(...Definitions);\n  }\n\n  build() {\n    if (this.scroll == null) return;\n    super.build();\n  }\n\n  detach() {\n    super.detach();\n    this.observer.disconnect();\n  }\n\n  deleteAt(index: number, length: number): void {\n    this.update();\n    if (index === 0 && length === this.length()) {\n      this.children.forEach(function(child) {\n        child.remove();\n      });\n    } else {\n      super.deleteAt(index, length);\n    }\n  }\n\n  formatAt(index: number, length: number, name: string, value: any): void {\n    this.update();\n    super.formatAt(index, length, name, value);\n  }\n\n  insertAt(index: number, value: string, def?: any): void {\n    this.update();\n    super.insertAt(index, value, def);\n  }\n\n  optimize(context: { [key: string]: any }): void;\n  optimize(mutations: MutationRecord[], context: { [key: string]: any }): void;\n  optimize(mutations: any = [], context: any = {}): void {\n    super.optimize(context);\n    const mutationsMap = context.mutationsMap || new WeakMap();\n    // We must modify mutations directly, cannot make copy and then modify\n    let records = Array.from(this.observer.takeRecords());\n    // Array.push currently seems to be implemented by a non-tail recursive function\n    // so we cannot just mutations.push.apply(mutations, this.observer.takeRecords());\n    while (records.length > 0) mutations.push(records.pop());\n    let mark = (blot: Blot | null, markParent: boolean = true) => {\n      if (blot == null || blot === this) return;\n      if (blot.domNode.parentNode == null) return;\n      if (!mutationsMap.has(blot.domNode)) {\n        mutationsMap.set(blot.domNode, []);\n      }\n      if (markParent) mark(blot.parent);\n    };\n    let optimize = function(blot: Blot) {\n      // Post-order traversal\n      if (!mutationsMap.has(blot.domNode)) return;\n      if (blot instanceof ParentBlot) {\n        blot.children.forEach(optimize);\n      }\n      mutationsMap.delete(blot.domNode);\n      blot.optimize(context);\n    };\n    let remaining = mutations;\n    for (let i = 0; remaining.length > 0; i += 1) {\n      if (i >= MAX_OPTIMIZE_ITERATIONS) {\n        throw new Error('[Parchment] Maximum optimize iterations reached');\n      }\n      remaining.forEach((mutation: MutationRecord) => {\n        let blot = this.find(mutation.target, true);\n        if (blot == null) return;\n        if (blot.domNode === mutation.target) {\n          if (mutation.type === 'childList') {\n            mark(this.find(mutation.previousSibling, false));\n            Array.from(mutation.addedNodes).forEach((node: Node) => {\n              const child = this.find(node, false);\n              mark(child, false);\n              if (child instanceof ParentBlot) {\n                child.children.forEach(function(grandChild: Blot) {\n                  mark(grandChild, false);\n                });\n              }\n            });\n          } else if (mutation.type === 'attributes') {\n            mark(blot.prev);\n          }\n        }\n        mark(blot);\n      });\n      this.children.forEach(optimize);\n      remaining = Array.from(this.observer.takeRecords());\n      records = remaining.slice();\n      while (records.length > 0) mutations.push(records.pop());\n    }\n  }\n\n  update(\n    mutations?: MutationRecord[],\n    context: { [key: string]: any } = {},\n  ): void {\n    mutations = mutations || this.observer.takeRecords();\n    const mutationsMap = new WeakMap();\n    mutations\n      .map((mutation: MutationRecord) => {\n        let blot = Registry.find(mutation.target, true);\n        if (blot == null) return null;\n        if (mutationsMap.has(blot.domNode)) {\n          mutationsMap.get(blot.domNode).push(mutation);\n          return null;\n        } else {\n          mutationsMap.set(blot.domNode, [mutation]);\n          return blot;\n        }\n      })\n      .forEach((blot: Blot | null) => {\n        if (blot != null && blot !== this && mutationsMap.has(blot.domNode)) {\n          blot.update(mutationsMap.get(blot.domNode) || [], context);\n        }\n      });\n    context.mutationsMap = mutationsMap;\n    if (mutationsMap.has(this.domNode)) {\n      super.update(mutationsMap.get(this.domNode), context);\n    }\n    this.optimize(mutations, context);\n  }\n}\n\nexport default ScrollBlot;\n","import { Formattable, Root } from './abstract/blot';\nimport LeafBlot from './abstract/leaf';\n\nclass EmbedBlot extends LeafBlot implements Formattable {\n  static formats(domNode: HTMLElement, scroll: Root): any {\n    return undefined;\n  }\n\n  format(name: string, value: any): void {\n    // super.formatAt wraps, which is what we want in general,\n    // but this allows subclasses to overwrite for formats\n    // that just apply to particular embeds\n    super.formatAt(0, this.length(), name, value);\n  }\n\n  formatAt(index: number, length: number, name: string, value: any): void {\n    if (index === 0 && length === this.length()) {\n      this.format(name, value);\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  formats(): { [index: string]: any } {\n    return this.statics.formats(this.domNode, this.scroll);\n  }\n}\n\nexport default EmbedBlot;\n","import { Blot, Leaf, Root } from './abstract/blot';\nimport LeafBlot from './abstract/leaf';\nimport Scope from '../scope';\n\nclass TextBlot extends LeafBlot implements Leaf {\n  static blotName = 'text';\n  static scope = Scope.INLINE_BLOT;\n\n  public domNode!: Text;\n  protected text: string;\n\n  static create(value: string): Text {\n    return document.createTextNode(value);\n  }\n\n  static value(domNode: Text): string {\n    let text = domNode.data;\n    // @ts-ignore\n    if (text['normalize']) text = text['normalize']();\n    return text;\n  }\n\n  constructor(scroll: Root, node: Node) {\n    super(scroll, node);\n    this.text = this.statics.value(this.domNode);\n  }\n\n  deleteAt(index: number, length: number): void {\n    this.domNode.data = this.text =\n      this.text.slice(0, index) + this.text.slice(index + length);\n  }\n\n  index(node: Node, offset: number): number {\n    if (this.domNode === node) {\n      return offset;\n    }\n    return -1;\n  }\n\n  insertAt(index: number, value: string, def?: any): void {\n    if (def == null) {\n      this.text = this.text.slice(0, index) + value + this.text.slice(index);\n      this.domNode.data = this.text;\n    } else {\n      super.insertAt(index, value, def);\n    }\n  }\n\n  length(): number {\n    return this.text.length;\n  }\n\n  optimize(context: { [key: string]: any }): void {\n    super.optimize(context);\n    this.text = this.statics.value(this.domNode);\n    if (this.text.length === 0) {\n      this.remove();\n    } else if (this.next instanceof TextBlot && this.next.prev === this) {\n      this.insertAt(this.length(), (<TextBlot>this.next).value());\n      this.next.remove();\n    }\n  }\n\n  position(index: number, inclusive: boolean = false): [Node, number] {\n    return [this.domNode, index];\n  }\n\n  split(index: number, force: boolean = false): Blot | null {\n    if (!force) {\n      if (index === 0) return this;\n      if (index === this.length()) return this.next;\n    }\n    let after = this.scroll.create(this.domNode.splitText(index));\n    this.parent.insertBefore(after, this.next || undefined);\n    this.text = this.statics.value(this.domNode);\n    return after;\n  }\n\n  update(mutations: MutationRecord[], context: { [key: string]: any }): void {\n    if (\n      mutations.some(mutation => {\n        return (\n          mutation.type === 'characterData' && mutation.target === this.domNode\n        );\n      })\n    ) {\n      this.text = this.statics.value(this.domNode);\n    }\n  }\n\n  value(): string {\n    return this.text;\n  }\n}\n\nexport default TextBlot;\n","import extend from 'extend';\nimport Delta from 'quill-delta';\nimport {\n  AttributorStore,\n  BlockBlot,\n  EmbedBlot,\n  LeafBlot,\n  Scope,\n} from 'parchment';\nimport Break from './break';\nimport Inline from './inline';\nimport TextBlot from './text';\n\nconst NEWLINE_LENGTH = 1;\n\nclass Block extends BlockBlot {\n  constructor(scroll, domNode) {\n    super(scroll, domNode);\n    this.cache = {};\n  }\n\n  delta() {\n    if (this.cache.delta == null) {\n      this.cache.delta = blockDelta(this);\n    }\n    return this.cache.delta;\n  }\n\n  deleteAt(index, length) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n\n  formatAt(index, length, name, value) {\n    if (length <= 0) return;\n    if (this.scroll.query(name, Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(\n        index,\n        Math.min(length, this.length() - index - 1),\n        name,\n        value,\n      );\n    }\n    this.cache = {};\n  }\n\n  insertAt(index, value, def) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      return;\n    }\n    if (value.length === 0) return;\n    const lines = value.split('\\n');\n    const text = lines.shift();\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    let block = this;\n    lines.reduce((lineIndex, line) => {\n      block = block.split(lineIndex, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n\n  insertBefore(blot, ref) {\n    const { head } = this.children;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n\n  moveChildren(target, ref) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    this.cache = {};\n  }\n\n  path(index) {\n    return super.path(index, true);\n  }\n\n  removeChild(child) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n\n  split(index, force = false) {\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      const clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      }\n      this.parent.insertBefore(clone, this.next);\n      return clone;\n    }\n    const next = super.split(index, force);\n    this.cache = {};\n    return next;\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = Break;\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\n\nclass BlockEmbed extends EmbedBlot {\n  attach() {\n    super.attach();\n    this.attributes = new AttributorStore(this.domNode);\n  }\n\n  delta() {\n    return new Delta().insert(\n      this.value(),\n      extend(this.formats(), this.attributes.values()),\n    );\n  }\n\n  format(name, value) {\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      this.attributes.attribute(attribute, value);\n    }\n  }\n\n  formatAt(index, length, name, value) {\n    this.format(name, value);\n  }\n\n  insertAt(index, value, def) {\n    if (typeof value === 'string' && value.endsWith('\\n')) {\n      const block = this.scroll.create(Block.blotName);\n      this.parent.insertBefore(block, index === 0 ? this : this.next);\n      block.insertAt(0, value.slice(0, -1));\n    } else {\n      super.insertAt(index, value, def);\n    }\n  }\n}\nBlockEmbed.scope = Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\nfunction blockDelta(blot) {\n  return blot\n    .descendants(LeafBlot)\n    .reduce((delta, leaf) => {\n      if (leaf.length() === 0) {\n        return delta;\n      }\n      return delta.insert(leaf.value(), bubbleFormats(leaf));\n    }, new Delta())\n    .insert('\\n', bubbleFormats(blot));\n}\n\nfunction bubbleFormats(blot, formats = {}) {\n  if (blot == null) return formats;\n  if (typeof blot.formats === 'function') {\n    formats = extend(formats, blot.formats());\n  }\n  if (\n    blot.parent == null ||\n    blot.parent.blotName === 'scroll' ||\n    blot.parent.statics.scope !== blot.statics.scope\n  ) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats);\n}\n\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\ttarget[name] = extend(deep, clone, copy);\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","import { EmbedBlot, InlineBlot, Scope } from 'parchment';\nimport Break from './break';\nimport Text from './text';\n\nclass Inline extends InlineBlot {\n  static compare(self, other) {\n    const selfIndex = Inline.order.indexOf(self);\n    const otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    } else if (self === other) {\n      return 0;\n    } else if (self < other) {\n      return -1;\n    }\n    return 1;\n  }\n\n  formatAt(index, length, name, value) {\n    if (\n      Inline.compare(this.statics.blotName, name) < 0 &&\n      this.scroll.query(name, Scope.BLOT)\n    ) {\n      const blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    if (\n      this.parent instanceof Inline &&\n      Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0\n    ) {\n      const parent = this.parent.isolate(this.offset(), this.length());\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\nInline.allowedChildren = [Inline, Break, EmbedBlot, Text];\n// Lower index means deeper in the DOM tree, since not found (-1) is for embeds\nInline.order = [\n  'cursor',\n  'inline', // Must be lower\n  'underline',\n  'strike',\n  'italic',\n  'bold',\n  'script',\n  'link',\n  'code', // Must be higher\n];\n\nexport default Inline;\n","var diff = require('fast-diff');\nvar equal = require('deep-equal');\nvar extend = require('extend');\nvar op = require('./op');\n\n\nvar NULL_CHARACTER = String.fromCharCode(0);  // Placeholder char for embed in diff()\n\n\nvar Delta = function (ops) {\n  // Assume we are given a well formed ops\n  if (Array.isArray(ops)) {\n    this.ops = ops;\n  } else if (ops != null && Array.isArray(ops.ops)) {\n    this.ops = ops.ops;\n  } else {\n    this.ops = [];\n  }\n};\n\n\nDelta.prototype.insert = function (text, attributes) {\n  var newOp = {};\n  if (text.length === 0) return this;\n  newOp.insert = text;\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype['delete'] = function (length) {\n  if (length <= 0) return this;\n  return this.push({ 'delete': length });\n};\n\nDelta.prototype.retain = function (length, attributes) {\n  if (length <= 0) return this;\n  var newOp = { retain: length };\n  if (attributes != null && typeof attributes === 'object' && Object.keys(attributes).length > 0) {\n    newOp.attributes = attributes;\n  }\n  return this.push(newOp);\n};\n\nDelta.prototype.push = function (newOp) {\n  var index = this.ops.length;\n  var lastOp = this.ops[index - 1];\n  newOp = extend(true, {}, newOp);\n  if (typeof lastOp === 'object') {\n    if (typeof newOp['delete'] === 'number' && typeof lastOp['delete'] === 'number') {\n      this.ops[index - 1] = { 'delete': lastOp['delete'] + newOp['delete'] };\n      return this;\n    }\n    // Since it does not matter if we insert before or after deleting at the same index,\n    // always prefer to insert first\n    if (typeof lastOp['delete'] === 'number' && newOp.insert != null) {\n      index -= 1;\n      lastOp = this.ops[index - 1];\n      if (typeof lastOp !== 'object') {\n        this.ops.unshift(newOp);\n        return this;\n      }\n    }\n    if (equal(newOp.attributes, lastOp.attributes)) {\n      if (typeof newOp.insert === 'string' && typeof lastOp.insert === 'string') {\n        this.ops[index - 1] = { insert: lastOp.insert + newOp.insert };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      } else if (typeof newOp.retain === 'number' && typeof lastOp.retain === 'number') {\n        this.ops[index - 1] = { retain: lastOp.retain + newOp.retain };\n        if (typeof newOp.attributes === 'object') this.ops[index - 1].attributes = newOp.attributes\n        return this;\n      }\n    }\n  }\n  if (index === this.ops.length) {\n    this.ops.push(newOp);\n  } else {\n    this.ops.splice(index, 0, newOp);\n  }\n  return this;\n};\n\nDelta.prototype.chop = function () {\n  var lastOp = this.ops[this.ops.length - 1];\n  if (lastOp && lastOp.retain && !lastOp.attributes) {\n    this.ops.pop();\n  }\n  return this;\n};\n\nDelta.prototype.filter = function (predicate) {\n  return this.ops.filter(predicate);\n};\n\nDelta.prototype.forEach = function (predicate) {\n  this.ops.forEach(predicate);\n};\n\nDelta.prototype.map = function (predicate) {\n  return this.ops.map(predicate);\n};\n\nDelta.prototype.partition = function (predicate) {\n  var passed = [], failed = [];\n  this.forEach(function(op) {\n    var target = predicate(op) ? passed : failed;\n    target.push(op);\n  });\n  return [passed, failed];\n};\n\nDelta.prototype.reduce = function (predicate, initial) {\n  return this.ops.reduce(predicate, initial);\n};\n\nDelta.prototype.changeLength = function () {\n  return this.reduce(function (length, elem) {\n    if (elem.insert) {\n      return length + op.length(elem);\n    } else if (elem.delete) {\n      return length - elem.delete;\n    }\n    return length;\n  }, 0);\n};\n\nDelta.prototype.length = function () {\n  return this.reduce(function (length, elem) {\n    return length + op.length(elem);\n  }, 0);\n};\n\nDelta.prototype.slice = function (start, end) {\n  start = start || 0;\n  if (typeof end !== 'number') end = Infinity;\n  var ops = [];\n  var iter = op.iterator(this.ops);\n  var index = 0;\n  while (index < end && iter.hasNext()) {\n    var nextOp;\n    if (index < start) {\n      nextOp = iter.next(start - index);\n    } else {\n      nextOp = iter.next(end - index);\n      ops.push(nextOp);\n    }\n    index += op.length(nextOp);\n  }\n  return new Delta(ops);\n};\n\n\nDelta.prototype.compose = function (other) {\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else if (thisIter.peekType() === 'delete') {\n      delta.push(thisIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (typeof otherOp.retain === 'number') {\n        var newOp = {};\n        if (typeof thisOp.retain === 'number') {\n          newOp.retain = length;\n        } else {\n          newOp.insert = thisOp.insert;\n        }\n        // Preserve null when composing with a retain, otherwise remove it for inserts\n        var attributes = op.attributes.compose(thisOp.attributes, otherOp.attributes, typeof thisOp.retain === 'number');\n        if (attributes) newOp.attributes = attributes;\n        delta.push(newOp);\n      // Other op should be delete, we could be an insert or retain\n      // Insert + delete cancels out\n      } else if (typeof otherOp['delete'] === 'number' && typeof thisOp.retain === 'number') {\n        delta.push(otherOp);\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.concat = function (other) {\n  var delta = new Delta(this.ops.slice());\n  if (other.ops.length > 0) {\n    delta.push(other.ops[0]);\n    delta.ops = delta.ops.concat(other.ops.slice(1));\n  }\n  return delta;\n};\n\nDelta.prototype.diff = function (other, index) {\n  if (this.ops === other.ops) {\n    return new Delta();\n  }\n  var strings = [this, other].map(function (delta) {\n    return delta.map(function (op) {\n      if (op.insert != null) {\n        return typeof op.insert === 'string' ? op.insert : NULL_CHARACTER;\n      }\n      var prep = (delta === other) ? 'on' : 'with';\n      throw new Error('diff() called ' + prep + ' non-document');\n    }).join('');\n  });\n  var delta = new Delta();\n  var diffResult = diff(strings[0], strings[1], index);\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  diffResult.forEach(function (component) {\n    var length = component[1].length;\n    while (length > 0) {\n      var opLength = 0;\n      switch (component[0]) {\n        case diff.INSERT:\n          opLength = Math.min(otherIter.peekLength(), length);\n          delta.push(otherIter.next(opLength));\n          break;\n        case diff.DELETE:\n          opLength = Math.min(length, thisIter.peekLength());\n          thisIter.next(opLength);\n          delta['delete'](opLength);\n          break;\n        case diff.EQUAL:\n          opLength = Math.min(thisIter.peekLength(), otherIter.peekLength(), length);\n          var thisOp = thisIter.next(opLength);\n          var otherOp = otherIter.next(opLength);\n          if (equal(thisOp.insert, otherOp.insert)) {\n            delta.retain(opLength, op.attributes.diff(thisOp.attributes, otherOp.attributes));\n          } else {\n            delta.push(otherOp)['delete'](opLength);\n          }\n          break;\n      }\n      length -= opLength;\n    }\n  });\n  return delta.chop();\n};\n\nDelta.prototype.eachLine = function (predicate, newline) {\n  newline = newline || '\\n';\n  var iter = op.iterator(this.ops);\n  var line = new Delta();\n  var i = 0;\n  while (iter.hasNext()) {\n    if (iter.peekType() !== 'insert') return;\n    var thisOp = iter.peek();\n    var start = op.length(thisOp) - iter.peekLength();\n    var index = typeof thisOp.insert === 'string' ?\n      thisOp.insert.indexOf(newline, start) - start : -1;\n    if (index < 0) {\n      line.push(iter.next());\n    } else if (index > 0) {\n      line.push(iter.next(index));\n    } else {\n      if (predicate(line, iter.next(1).attributes || {}, i) === false) {\n        return;\n      }\n      i += 1;\n      line = new Delta();\n    }\n  }\n  if (line.length() > 0) {\n    predicate(line, {}, i);\n  }\n};\n\nDelta.prototype.transform = function (other, priority) {\n  priority = !!priority;\n  if (typeof other === 'number') {\n    return this.transformPosition(other, priority);\n  }\n  var thisIter = op.iterator(this.ops);\n  var otherIter = op.iterator(other.ops);\n  var delta = new Delta();\n  while (thisIter.hasNext() || otherIter.hasNext()) {\n    if (thisIter.peekType() === 'insert' && (priority || otherIter.peekType() !== 'insert')) {\n      delta.retain(op.length(thisIter.next()));\n    } else if (otherIter.peekType() === 'insert') {\n      delta.push(otherIter.next());\n    } else {\n      var length = Math.min(thisIter.peekLength(), otherIter.peekLength());\n      var thisOp = thisIter.next(length);\n      var otherOp = otherIter.next(length);\n      if (thisOp['delete']) {\n        // Our delete either makes their delete redundant or removes their retain\n        continue;\n      } else if (otherOp['delete']) {\n        delta.push(otherOp);\n      } else {\n        // We retain either their retain or insert\n        delta.retain(length, op.attributes.transform(thisOp.attributes, otherOp.attributes, priority));\n      }\n    }\n  }\n  return delta.chop();\n};\n\nDelta.prototype.transformPosition = function (index, priority) {\n  priority = !!priority;\n  var thisIter = op.iterator(this.ops);\n  var offset = 0;\n  while (thisIter.hasNext() && offset <= index) {\n    var length = thisIter.peekLength();\n    var nextType = thisIter.peekType();\n    thisIter.next();\n    if (nextType === 'delete') {\n      index -= Math.min(length, index - offset);\n      continue;\n    } else if (nextType === 'insert' && (offset < index || !priority)) {\n      index += length;\n    }\n    offset += length;\n  }\n  return index;\n};\n\n\nmodule.exports = Delta;\n","import Delta from 'quill-delta';\nimport * as Parchment from 'parchment';\nimport extend from 'extend';\nimport Editor from './editor';\nimport Emitter from './emitter';\nimport Module from './module';\nimport Selection, { Range } from './selection';\nimport instances from './instances';\nimport logger from './logger';\nimport Theme from './theme';\n\nconst debug = logger('quill');\n\nconst globalRegistry = new Parchment.Registry();\n\nclass Quill {\n  static debug(limit) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n\n  static find(node) {\n    return instances.get(node) || globalRegistry.find(node);\n  }\n\n  static import(name) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n\n  static register(path, target, overwrite = false) {\n    if (typeof path !== 'string') {\n      const name = path.attrName || path.blotName;\n      if (typeof name === 'string') {\n        // register(Blot | Attributor, overwrite)\n        this.register(`formats/${name}`, path, target);\n      } else {\n        Object.keys(path).forEach(key => {\n          this.register(key, path[key], target);\n        });\n      }\n    } else {\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if (\n        (path.startsWith('blots/') || path.startsWith('formats/')) &&\n        target.blotName !== 'abstract'\n      ) {\n        globalRegistry.register(target);\n      }\n      if (typeof target.register === 'function') {\n        target.register(globalRegistry);\n      }\n    }\n  }\n\n  constructor(container, options = {}) {\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      return debug.error('Invalid Quill container', container);\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    const html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    instances.set(this.container, this);\n    this.root = this.addContainer('ql-editor');\n    this.root.addEventListener('dragstart', e => {\n      e.preventDefault();\n    });\n    this.root.classList.add('ql-blank');\n    this.root.setAttribute('data-gramm', false);\n    this.scrollingContainer = this.options.scrollingContainer || this.root;\n    this.emitter = new Emitter();\n    const ScrollBlot = this.options.registry.query(\n      Parchment.ScrollBlot.blotName,\n    );\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\n      emitter: this.emitter,\n    });\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.uploader = this.theme.addModule('uploader');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, type => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      const range = this.selection.lastRange;\n      const index = range && range.length === 0 ? range.index : undefined;\n      modify.call(\n        this,\n        () => this.editor.update(null, mutations, index),\n        source,\n      );\n    });\n    const contents = this.clipboard.convert({\n      html: `${html}<p><br></p>`,\n      text: '\\n',\n    });\n    this.setContents(contents);\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n  }\n\n  addContainer(container, refNode = null) {\n    if (typeof container === 'string') {\n      const className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n\n  blur() {\n    this.selection.setRange(null);\n  }\n\n  deleteText(index, length, source) {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.deleteText(index, length);\n      },\n      source,\n      index,\n      -1 * length,\n    );\n  }\n\n  disable() {\n    this.enable(false);\n  }\n\n  enable(enabled = true) {\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n\n  focus() {\n    const { scrollTop } = this.scrollingContainer;\n    this.selection.focus();\n    this.scrollingContainer.scrollTop = scrollTop;\n    this.scrollIntoView();\n  }\n\n  format(name, value, source = Emitter.sources.API) {\n    return modify.call(\n      this,\n      () => {\n        const range = this.getSelection(true);\n        let change = new Delta();\n        if (range == null) {\n          return change;\n        } else if (this.scroll.query(name, Parchment.Scope.BLOCK)) {\n          change = this.editor.formatLine(range.index, range.length, {\n            [name]: value,\n          });\n        } else if (range.length === 0) {\n          this.selection.format(name, value);\n          return change;\n        } else {\n          change = this.editor.formatText(range.index, range.length, {\n            [name]: value,\n          });\n        }\n        this.setSelection(range, Emitter.sources.SILENT);\n        return change;\n      },\n      source,\n    );\n  }\n\n  formatLine(index, length, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n      index,\n      length,\n      name,\n      value,\n      source,\n    );\n    return modify.call(\n      this,\n      () => {\n        return this.editor.formatLine(index, length, formats);\n      },\n      source,\n      index,\n      0,\n    );\n  }\n\n  formatText(index, length, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n      index,\n      length,\n      name,\n      value,\n      source,\n    );\n    return modify.call(\n      this,\n      () => {\n        return this.editor.formatText(index, length, formats);\n      },\n      source,\n      index,\n      0,\n    );\n  }\n\n  getBounds(index, length = 0) {\n    let bounds;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    const containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width,\n    };\n  }\n\n  getContents(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n\n  getFormat(index = this.getSelection(true), length = 0) {\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    }\n    return this.editor.getFormat(index.index, index.length);\n  }\n\n  getIndex(blot) {\n    return blot.offset(this.scroll);\n  }\n\n  getLength() {\n    return this.scroll.length();\n  }\n\n  getLeaf(index) {\n    return this.scroll.leaf(index);\n  }\n\n  getLine(index) {\n    return this.scroll.line(index);\n  }\n\n  getLines(index = 0, length = Number.MAX_VALUE) {\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    }\n    return this.scroll.lines(index, length);\n  }\n\n  getModule(name) {\n    return this.theme.modules[name];\n  }\n\n  getSelection(focus = false) {\n    if (focus) this.focus();\n    this.update(); // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n\n  getSemanticHTML(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getHTML(index, length);\n  }\n\n  getText(index = 0, length = this.getLength() - index) {\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n\n  insertEmbed(index, embed, value, source = Quill.sources.API) {\n    return modify.call(\n      this,\n      () => {\n        return this.editor.insertEmbed(index, embed, value);\n      },\n      source,\n      index,\n    );\n  }\n\n  insertText(index, text, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    [index, , formats, source] = overload(index, 0, name, value, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.insertText(index, text, formats);\n      },\n      source,\n      index,\n      text.length,\n    );\n  }\n\n  isEnabled() {\n    return !this.container.classList.contains('ql-disabled');\n  }\n\n  off(...args) {\n    return this.emitter.off(...args);\n  }\n\n  on(...args) {\n    return this.emitter.on(...args);\n  }\n\n  once(...args) {\n    return this.emitter.once(...args);\n  }\n\n  removeFormat(index, length, source) {\n    [index, length, , source] = overload(index, length, source);\n    return modify.call(\n      this,\n      () => {\n        return this.editor.removeFormat(index, length);\n      },\n      source,\n      index,\n    );\n  }\n\n  scrollIntoView() {\n    this.selection.scrollIntoView(this.scrollingContainer);\n  }\n\n  setContents(delta, source = Emitter.sources.API) {\n    return modify.call(\n      this,\n      () => {\n        delta = new Delta(delta);\n        const length = this.getLength();\n        const deleted = this.editor.deleteText(0, length);\n        const applied = this.editor.applyDelta(delta);\n        const lastOp = applied.ops[applied.ops.length - 1];\n        if (\n          lastOp != null &&\n          typeof lastOp.insert === 'string' &&\n          lastOp.insert[lastOp.insert.length - 1] === '\\n'\n        ) {\n          this.editor.deleteText(this.getLength() - 1, 1);\n          applied.delete(1);\n        }\n        return deleted.compose(applied);\n      },\n      source,\n    );\n  }\n\n  setSelection(index, length, source) {\n    if (index == null) {\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      [index, length, , source] = overload(index, length, source);\n      this.selection.setRange(new Range(Math.max(0, index), length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.selection.scrollIntoView(this.scrollingContainer);\n      }\n    }\n  }\n\n  setText(text, source = Emitter.sources.API) {\n    const delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n\n  update(source = Emitter.sources.USER) {\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    // TODO this is usually undefined\n    return change;\n  }\n\n  updateContents(delta, source = Emitter.sources.API) {\n    return modify.call(\n      this,\n      () => {\n        delta = new Delta(delta);\n        return this.editor.applyDelta(delta, source);\n      },\n      source,\n      true,\n    );\n  }\n}\nQuill.DEFAULTS = {\n  bounds: null,\n  modules: {},\n  placeholder: '',\n  readOnly: false,\n  registry: globalRegistry,\n  scrollingContainer: null,\n  theme: 'default',\n};\nQuill.events = Emitter.events;\nQuill.sources = Emitter.sources;\n// eslint-disable-next-line no-undef\nQuill.version = typeof QUILL_VERSION === 'undefined' ? 'dev' : QUILL_VERSION;\n\nQuill.imports = {\n  delta: Delta,\n  parchment: Parchment,\n  'core/module': Module,\n  'core/theme': Theme,\n};\n\nfunction expandConfig(container, userConfig) {\n  userConfig = extend(\n    true,\n    {\n      container,\n      modules: {\n        clipboard: true,\n        keyboard: true,\n        history: true,\n        uploader: true,\n      },\n    },\n    userConfig,\n  );\n  if (!userConfig.theme || userConfig.theme === Quill.DEFAULTS.theme) {\n    userConfig.theme = Theme;\n  } else {\n    userConfig.theme = Quill.import(`themes/${userConfig.theme}`);\n    if (userConfig.theme == null) {\n      throw new Error(\n        `Invalid theme ${userConfig.theme}. Did you register it?`,\n      );\n    }\n  }\n  const themeConfig = extend(true, {}, userConfig.theme.DEFAULTS);\n  [themeConfig, userConfig].forEach(config => {\n    config.modules = config.modules || {};\n    Object.keys(config.modules).forEach(module => {\n      if (config.modules[module] === true) {\n        config.modules[module] = {};\n      }\n    });\n  });\n  const moduleNames = Object.keys(themeConfig.modules).concat(\n    Object.keys(userConfig.modules),\n  );\n  const moduleConfig = moduleNames.reduce((config, name) => {\n    const moduleClass = Quill.import(`modules/${name}`);\n    if (moduleClass == null) {\n      debug.error(\n        `Cannot load ${name} module. Are you sure you registered it?`,\n      );\n    } else {\n      config[name] = moduleClass.DEFAULTS || {};\n    }\n    return config;\n  }, {});\n  // Special case toolbar shorthand\n  if (\n    userConfig.modules != null &&\n    userConfig.modules.toolbar &&\n    userConfig.modules.toolbar.constructor !== Object\n  ) {\n    userConfig.modules.toolbar = {\n      container: userConfig.modules.toolbar,\n    };\n  }\n  userConfig = extend(\n    true,\n    {},\n    Quill.DEFAULTS,\n    { modules: moduleConfig },\n    themeConfig,\n    userConfig,\n  );\n  ['bounds', 'container', 'scrollingContainer'].forEach(key => {\n    if (typeof userConfig[key] === 'string') {\n      userConfig[key] = document.querySelector(userConfig[key]);\n    }\n  });\n  userConfig.modules = Object.keys(userConfig.modules).reduce(\n    (config, name) => {\n      if (userConfig.modules[name]) {\n        config[name] = userConfig.modules[name];\n      }\n      return config;\n    },\n    {},\n  );\n  return userConfig;\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(modifier, source, index, shift) {\n  if (!this.isEnabled() && source === Emitter.sources.USER) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  const oldDelta = this.editor.delta;\n  const change = modifier();\n  if (range != null) {\n    if (index === true) {\n      index = range.index; // eslint-disable-line prefer-destructuring\n    }\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    const args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\n\nfunction overload(index, length, name, value, source) {\n  let formats = {};\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      source = value;\n      value = name;\n      name = length;\n      length = index.length; // eslint-disable-line prefer-destructuring\n      index = index.index; // eslint-disable-line prefer-destructuring\n    } else {\n      length = index.length; // eslint-disable-line prefer-destructuring\n      index = index.index; // eslint-disable-line prefer-destructuring\n    }\n  } else if (typeof length !== 'number') {\n    source = value;\n    value = name;\n    name = length;\n    length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    formats = name;\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  return [index, length, formats, source];\n}\n\nfunction shiftRange(range, index, length, source) {\n  if (range == null) return null;\n  let start;\n  let end;\n  if (index instanceof Delta) {\n    [start, end] = [range.index, range.index + range.length].map(pos =>\n      index.transformPosition(pos, source !== Emitter.sources.USER),\n    );\n  } else {\n    [start, end] = [range.index, range.index + range.length].map(pos => {\n      if (pos < index || (pos === index && source === Emitter.sources.USER))\n        return pos;\n      if (length >= 0) {\n        return pos + length;\n      }\n      return Math.max(index, pos + length);\n    });\n  }\n  return new Range(start, end - start);\n}\n\nexport { globalRegistry, expandConfig, overload, Quill as default };\n","class Module {\n  constructor(quill, options = {}) {\n    this.quill = quill;\n    this.options = options;\n  }\n}\nModule.DEFAULTS = {};\n\nexport default Module;\n","import { TextBlot } from 'parchment';\n\nclass Text extends TextBlot {}\n\nexport default Text;\n","import EventEmitter from 'eventemitter3';\nimport instances from './instances';\nimport logger from './logger';\n\nconst debug = logger('quill:events');\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\n\nEVENTS.forEach(eventName => {\n  document.addEventListener(eventName, (...args) => {\n    Array.from(document.querySelectorAll('.ql-container')).forEach(node => {\n      const quill = instances.get(node);\n      if (quill && quill.emitter) {\n        quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\n\nclass Emitter extends EventEmitter {\n  constructor() {\n    super();\n    this.listeners = {};\n    this.on('error', debug.error);\n  }\n\n  emit(...args) {\n    debug.log.call(debug, ...args);\n    super.emit(...args);\n  }\n\n  handleDOM(event, ...args) {\n    (this.listeners[event.type] || []).forEach(({ node, handler }) => {\n      if (event.target === node || node.contains(event.target)) {\n        handler(event, ...args);\n      }\n    });\n  }\n\n  listenDOM(eventName, node, handler) {\n    if (!this.listeners[eventName]) {\n      this.listeners[eventName] = [];\n    }\n    this.listeners[eventName].push({ node, handler });\n  }\n}\n\nEmitter.events = {\n  EDITOR_CHANGE: 'editor-change',\n  SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n  SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\n  SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\n  SCROLL_OPTIMIZE: 'scroll-optimize',\n  SCROLL_UPDATE: 'scroll-update',\n  SELECTION_CHANGE: 'selection-change',\n  TEXT_CHANGE: 'text-change',\n};\nEmitter.sources = {\n  API: 'api',\n  SILENT: 'silent',\n  USER: 'user',\n};\n\nexport default Emitter;\n","import { EmbedBlot } from 'parchment';\n\nclass Break extends EmbedBlot {\n  static value() {\n    return undefined;\n  }\n\n  optimize() {\n    if (this.prev || this.next) {\n      this.remove();\n    }\n  }\n\n  length() {\n    return 0;\n  }\n\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\n\nexport default Break;\n","const levels = ['error', 'warn', 'log', 'info'];\nlet level = 'warn';\n\nfunction debug(method, ...args) {\n  if (levels.indexOf(method) <= levels.indexOf(level)) {\n    console[method](...args); // eslint-disable-line no-console\n  }\n}\n\nfunction namespace(ns) {\n  return levels.reduce((logger, method) => {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\n\nnamespace.level = newLevel => {\n  level = newLevel;\n};\ndebug.level = namespace.level;\n\nexport default namespace;\n","import { ContainerBlot } from 'parchment';\n\nclass Container extends ContainerBlot {}\n\nexport default Container;\n","var pSlice = Array.prototype.slice;\nvar objectKeys = require('./lib/keys.js');\nvar isArguments = require('./lib/is_arguments.js');\n\nvar deepEqual = module.exports = function (actual, expected, opts) {\n  if (!opts) opts = {};\n  // 7.1. All identical values are equivalent, as determined by ===.\n  if (actual === expected) {\n    return true;\n\n  } else if (actual instanceof Date && expected instanceof Date) {\n    return actual.getTime() === expected.getTime();\n\n  // 7.3. Other pairs that do not both pass typeof value == 'object',\n  // equivalence is determined by ==.\n  } else if (!actual || !expected || typeof actual != 'object' && typeof expected != 'object') {\n    return opts.strict ? actual === expected : actual == expected;\n\n  // 7.4. For all other Object pairs, including Array objects, equivalence is\n  // determined by having the same number of owned properties (as verified\n  // with Object.prototype.hasOwnProperty.call), the same set of keys\n  // (although not necessarily the same order), equivalent values for every\n  // corresponding key, and an identical 'prototype' property. Note: this\n  // accounts for both named and indexed properties on Arrays.\n  } else {\n    return objEquiv(actual, expected, opts);\n  }\n}\n\nfunction isUndefinedOrNull(value) {\n  return value === null || value === undefined;\n}\n\nfunction isBuffer (x) {\n  if (!x || typeof x !== 'object' || typeof x.length !== 'number') return false;\n  if (typeof x.copy !== 'function' || typeof x.slice !== 'function') {\n    return false;\n  }\n  if (x.length > 0 && typeof x[0] !== 'number') return false;\n  return true;\n}\n\nfunction objEquiv(a, b, opts) {\n  var i, key;\n  if (isUndefinedOrNull(a) || isUndefinedOrNull(b))\n    return false;\n  // an identical 'prototype' property.\n  if (a.prototype !== b.prototype) return false;\n  //~~~I've managed to break Object.keys through screwy arguments passing.\n  //   Converting to array solves the problem.\n  if (isArguments(a)) {\n    if (!isArguments(b)) {\n      return false;\n    }\n    a = pSlice.call(a);\n    b = pSlice.call(b);\n    return deepEqual(a, b, opts);\n  }\n  if (isBuffer(a)) {\n    if (!isBuffer(b)) {\n      return false;\n    }\n    if (a.length !== b.length) return false;\n    for (i = 0; i < a.length; i++) {\n      if (a[i] !== b[i]) return false;\n    }\n    return true;\n  }\n  try {\n    var ka = objectKeys(a),\n        kb = objectKeys(b);\n  } catch (e) {//happens when one is a string literal and the other isn't\n    return false;\n  }\n  // having the same number of owned properties (keys incorporates\n  // hasOwnProperty)\n  if (ka.length != kb.length)\n    return false;\n  //the same set of keys (although not necessarily the same order),\n  ka.sort();\n  kb.sort();\n  //~~~cheap key test\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i])\n      return false;\n  }\n  //equivalent values for every corresponding key, and\n  //~~~possibly expensive deep test\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!deepEqual(a[key], b[key], opts)) return false;\n  }\n  return typeof a === typeof b;\n}\n","import DropdownIcon from '../assets/icons/dropdown.svg';\n\nlet optionsCounter = 0;\n\nfunction toggleAriaAttribute(element, attribute) {\n  element.setAttribute(\n    attribute,\n    !(element.getAttribute(attribute) === 'true'),\n  );\n}\n\nclass Picker {\n  constructor(select) {\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    this.select.parentNode.insertBefore(this.container, this.select);\n\n    this.label.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.label.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n          this.togglePicker();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n\n  togglePicker() {\n    this.container.classList.toggle('ql-expanded');\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\n    toggleAriaAttribute(this.label, 'aria-expanded');\n    toggleAriaAttribute(this.options, 'aria-hidden');\n  }\n\n  buildItem(option) {\n    const item = document.createElement('span');\n    item.tabIndex = '0';\n    item.setAttribute('role', 'button');\n    item.classList.add('ql-picker-item');\n    if (option.hasAttribute('value')) {\n      item.setAttribute('data-value', option.getAttribute('value'));\n    }\n    if (option.textContent) {\n      item.setAttribute('data-label', option.textContent);\n    }\n    item.addEventListener('click', () => {\n      this.selectItem(item, true);\n    });\n    item.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n          this.selectItem(item, true);\n          event.preventDefault();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n\n    return item;\n  }\n\n  buildLabel() {\n    const label = document.createElement('span');\n    label.classList.add('ql-picker-label');\n    label.innerHTML = DropdownIcon;\n    label.tabIndex = '0';\n    label.setAttribute('role', 'button');\n    label.setAttribute('aria-expanded', 'false');\n    this.container.appendChild(label);\n    return label;\n  }\n\n  buildOptions() {\n    const options = document.createElement('span');\n    options.classList.add('ql-picker-options');\n\n    // Don't want screen readers to read this until options are visible\n    options.setAttribute('aria-hidden', 'true');\n    options.tabIndex = '-1';\n\n    // Need a unique id for aria-controls\n    options.id = `ql-picker-options-${optionsCounter}`;\n    optionsCounter += 1;\n    this.label.setAttribute('aria-controls', options.id);\n\n    this.options = options;\n\n    Array.from(this.select.options).forEach(option => {\n      const item = this.buildItem(option);\n      options.appendChild(item);\n      if (option.selected === true) {\n        this.selectItem(item);\n      }\n    });\n    this.container.appendChild(options);\n  }\n\n  buildPicker() {\n    Array.from(this.select.attributes).forEach(item => {\n      this.container.setAttribute(item.name, item.value);\n    });\n    this.container.classList.add('ql-picker');\n    this.label = this.buildLabel();\n    this.buildOptions();\n  }\n\n  escape() {\n    // Close menu and return focus to trigger label\n    this.close();\n    // Need setTimeout for accessibility to ensure that the browser executes\n    // focus on the next process thread and after any DOM content changes\n    setTimeout(() => this.label.focus(), 1);\n  }\n\n  close() {\n    this.container.classList.remove('ql-expanded');\n    this.label.setAttribute('aria-expanded', 'false');\n    this.options.setAttribute('aria-hidden', 'true');\n  }\n\n  selectItem(item, trigger = false) {\n    const selected = this.container.querySelector('.ql-selected');\n    if (item === selected) return;\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(\n      item,\n    );\n    if (item.hasAttribute('data-value')) {\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.close();\n    }\n  }\n\n  update() {\n    let option;\n    if (this.select.selectedIndex > -1) {\n      const item = this.container.querySelector('.ql-picker-options').children[\n        this.select.selectedIndex\n      ];\n      option = this.select.options[this.select.selectedIndex];\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    const isActive =\n      option != null &&\n      option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n  }\n}\n\nexport default Picker;\n","import Inline from '../blots/inline';\n\nclass Link extends Inline {\n  static create(value) {\n    const node = super.create(value);\n    node.setAttribute('href', this.sanitize(value));\n    node.setAttribute('target', '_blank');\n    return node;\n  }\n\n  static formats(domNode) {\n    return domNode.getAttribute('href');\n  }\n\n  static sanitize(url) {\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n  }\n\n  format(name, value) {\n    if (name !== this.statics.blotName || !value) {\n      super.format(name, value);\n    } else {\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\n    }\n  }\n}\nLink.blotName = 'link';\nLink.tagName = 'A';\nLink.SANITIZED_URL = 'about:blank';\nLink.PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel'];\n\nfunction sanitize(url, protocols) {\n  const anchor = document.createElement('a');\n  anchor.href = url;\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\n\nexport { Link as default, sanitize };\n","import { EmbedBlot, Scope } from 'parchment';\nimport TextBlot from './text';\n\nclass Cursor extends EmbedBlot {\n  static value() {\n    return undefined;\n  }\n\n  constructor(scroll, domNode, selection) {\n    super(scroll, domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this.savedLength = 0;\n  }\n\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n\n  format(name, value) {\n    if (this.savedLength !== 0) {\n      super.format(name, value);\n      return;\n    }\n    let target = this;\n    let index = 0;\n    while (target != null && target.statics.scope !== Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this.savedLength = Cursor.CONTENTS.length;\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this.savedLength = 0;\n    }\n  }\n\n  index(node, offset) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n\n  length() {\n    return this.savedLength;\n  }\n\n  position() {\n    return [this.textNode, this.textNode.data.length];\n  }\n\n  remove() {\n    super.remove();\n    this.parent = null;\n  }\n\n  restore() {\n    if (this.selection.composing || this.parent == null) return null;\n    const range = this.selection.getNativeRange();\n    let restoreText;\n    let start;\n    let end;\n    if (\n      range != null &&\n      range.start.node === this.textNode &&\n      range.end.node === this.textNode\n    ) {\n      [restoreText, start, end] = [\n        this.textNode,\n        range.start.offset,\n        range.end.offset,\n      ];\n    }\n    // Link format will insert text outside of anchor tag\n    while (\n      this.domNode.lastChild != null &&\n      this.domNode.lastChild !== this.textNode\n    ) {\n      this.domNode.parentNode.insertBefore(\n        this.domNode.lastChild,\n        this.domNode,\n      );\n    }\n    if (this.textNode.data !== Cursor.CONTENTS) {\n      const text = this.textNode.data.split(Cursor.CONTENTS).join('');\n      if (this.next instanceof TextBlot) {\n        restoreText = this.next.domNode;\n        this.next.insertAt(0, text);\n        this.textNode.data = Cursor.CONTENTS;\n      } else {\n        this.textNode.data = text;\n        this.parent.insertBefore(this.scroll.create(this.textNode), this);\n        this.textNode = document.createTextNode(Cursor.CONTENTS);\n        this.domNode.appendChild(this.textNode);\n      }\n    }\n    this.remove();\n    if (start != null) {\n      [start, end] = [start, end].map(offset => {\n        return Math.max(0, Math.min(restoreText.data.length, offset - 1));\n      });\n      return {\n        startNode: restoreText,\n        startOffset: start,\n        endNode: restoreText,\n        endOffset: end,\n      };\n    }\n    return null;\n  }\n\n  update(mutations, context) {\n    if (\n      mutations.some(mutation => {\n        return (\n          mutation.type === 'characterData' && mutation.target === this.textNode\n        );\n      })\n    ) {\n      const range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  value() {\n    return '';\n  }\n}\nCursor.blotName = 'cursor';\nCursor.className = 'ql-cursor';\nCursor.tagName = 'span';\nCursor.CONTENTS = '\\uFEFF'; // Zero width no break space\n\nexport default Cursor;\n","import alignLeftIcon from '../assets/icons/align-left.svg';\nimport alignCenterIcon from '../assets/icons/align-center.svg';\nimport alignRightIcon from '../assets/icons/align-right.svg';\nimport alignJustifyIcon from '../assets/icons/align-justify.svg';\nimport backgroundIcon from '../assets/icons/background.svg';\nimport blockquoteIcon from '../assets/icons/blockquote.svg';\nimport boldIcon from '../assets/icons/bold.svg';\nimport cleanIcon from '../assets/icons/clean.svg';\nimport codeIcon from '../assets/icons/code.svg';\nimport colorIcon from '../assets/icons/color.svg';\nimport directionLeftToRightIcon from '../assets/icons/direction-ltr.svg';\nimport directionRightToLeftIcon from '../assets/icons/direction-rtl.svg';\nimport formulaIcon from '../assets/icons/formula.svg';\nimport headerIcon from '../assets/icons/header.svg';\nimport header2Icon from '../assets/icons/header-2.svg';\nimport italicIcon from '../assets/icons/italic.svg';\nimport imageIcon from '../assets/icons/image.svg';\nimport indentIcon from '../assets/icons/indent.svg';\nimport outdentIcon from '../assets/icons/outdent.svg';\nimport linkIcon from '../assets/icons/link.svg';\nimport listBulletIcon from '../assets/icons/list-bullet.svg';\nimport listCheckIcon from '../assets/icons/list-check.svg';\nimport listOrderedIcon from '../assets/icons/list-ordered.svg';\nimport subscriptIcon from '../assets/icons/subscript.svg';\nimport superscriptIcon from '../assets/icons/superscript.svg';\nimport strikeIcon from '../assets/icons/strike.svg';\nimport tableIcon from '../assets/icons/table.svg';\nimport underlineIcon from '../assets/icons/underline.svg';\nimport videoIcon from '../assets/icons/video.svg';\n\nmodule.exports = {\n  align: {\n    '': alignLeftIcon,\n    center: alignCenterIcon,\n    right: alignRightIcon,\n    justify: alignJustifyIcon,\n  },\n  background: backgroundIcon,\n  blockquote: blockquoteIcon,\n  bold: boldIcon,\n  clean: cleanIcon,\n  code: codeIcon,\n  'code-block': codeIcon,\n  color: colorIcon,\n  direction: {\n    '': directionLeftToRightIcon,\n    rtl: directionRightToLeftIcon,\n  },\n  formula: formulaIcon,\n  header: {\n    '1': headerIcon,\n    '2': header2Icon,\n  },\n  italic: italicIcon,\n  image: imageIcon,\n  indent: {\n    '+1': indentIcon,\n    '-1': outdentIcon,\n  },\n  link: linkIcon,\n  list: {\n    bullet: listBulletIcon,\n    check: listCheckIcon,\n    ordered: listOrderedIcon,\n  },\n  script: {\n    sub: subscriptIcon,\n    super: superscriptIcon,\n  },\n  strike: strikeIcon,\n  table: tableIcon,\n  underline: underlineIcon,\n  video: videoIcon,\n};\n","import Block from '../blots/block';\nimport Break from '../blots/break';\nimport Cursor from '../blots/cursor';\nimport Inline from '../blots/inline';\nimport TextBlot from '../blots/text';\nimport Container from '../blots/container';\nimport Quill from '../core/quill';\n\nclass CodeBlockContainer extends Container {\n  static create(value) {\n    const domNode = super.create(value);\n    domNode.setAttribute('spellcheck', false);\n    return domNode;\n  }\n\n  html(index, length) {\n    const html = this.domNode.innerText.slice(index, index + length);\n    return `<pre>${html}</pre>`;\n  }\n}\n\nclass CodeBlock extends Block {\n  static register() {\n    Quill.register(CodeBlockContainer);\n  }\n}\n\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\n\nCodeBlock.blotName = 'code-block';\nCodeBlock.className = 'ql-code-block';\nCodeBlock.tagName = 'DIV';\nCodeBlockContainer.blotName = 'code-block-container';\nCodeBlockContainer.className = 'ql-code-block-container';\nCodeBlockContainer.tagName = 'DIV';\n\nCodeBlockContainer.allowedChildren = [CodeBlock];\n\nCodeBlock.allowedChildren = [TextBlot, Break, Cursor];\nCodeBlock.requiredContainer = CodeBlockContainer;\nCodeBlock.TAB = '  ';\n\nexport { Code, CodeBlockContainer, CodeBlock as default };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nclass ColorAttributor extends StyleAttributor {\n  value(domNode) {\n    let value = super.value(domNode);\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    const hex = value\n      .split(',')\n      .map(component => `00${parseInt(component, 10).toString(16)}`.slice(-2))\n      .join('');\n    return `#${hex}`;\n  }\n}\n\nconst ColorClass = new ClassAttributor('color', 'ql-color', {\n  scope: Scope.INLINE,\n});\nconst ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Scope.INLINE,\n});\n\nexport { ColorAttributor, ColorClass, ColorStyle };\n","import { ContainerBlot, LeafBlot, Scope } from 'parchment';\nimport clone from 'clone';\nimport equal from 'deep-equal';\nimport Emitter from './emitter';\nimport logger from './logger';\n\nconst debug = logger('quill:selection');\n\nclass Range {\n  constructor(index, length = 0) {\n    this.index = index;\n    this.length = length;\n  }\n}\n\nclass Selection {\n  constructor(scroll, emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    this.cursor = this.scroll.create('cursor', this);\n    // savedRange is last non-null range\n    this.savedRange = new Range(0, 0);\n    this.lastRange = this.savedRange;\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, () => {\n      if (!this.mouseDown) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      const native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\n      this.emitter.once(Emitter.events.SCROLL_UPDATE, () => {\n        try {\n          this.setNativeRange(\n            native.start.node,\n            native.start.offset,\n            native.end.node,\n            native.end.offset,\n          );\n          this.update(Emitter.sources.SILENT);\n        } catch (ignored) {\n          // ignore\n        }\n      });\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const { startNode, startOffset, endNode, endOffset } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n\n  handleComposition() {\n    this.root.addEventListener('compositionstart', () => {\n      this.composing = true;\n    });\n    this.root.addEventListener('compositionend', () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(\n            range.startNode,\n            range.startOffset,\n            range.endNode,\n            range.endOffset,\n          );\n        }, 1);\n      }\n    });\n  }\n\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus();\n    this.setRange(this.savedRange);\n  }\n\n  format(format, value) {\n    this.scroll.update();\n    const nativeRange = this.getNativeRange();\n    if (\n      nativeRange == null ||\n      !nativeRange.native.collapsed ||\n      this.scroll.query(format, Scope.BLOCK)\n    )\n      return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      const blot = this.scroll.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof LeafBlot) {\n        const after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n\n  getBounds(index, length = 0) {\n    const scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node;\n    let [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    [node, offset] = leaf.position(offset, true);\n    const range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    }\n    let side = 'left';\n    let rect;\n    if (node instanceof Text) {\n      if (offset < node.data.length) {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + 1);\n      } else {\n        range.setStart(node, offset - 1);\n        range.setEnd(node, offset);\n        side = 'right';\n      }\n      rect = range.getBoundingClientRect();\n    } else {\n      rect = leaf.domNode.getBoundingClientRect();\n      if (offset > 0) side = 'right';\n    }\n    return {\n      bottom: rect.top + rect.height,\n      height: rect.height,\n      left: rect[side],\n      right: rect[side],\n      top: rect.top,\n      width: 0,\n    };\n  }\n\n  getNativeRange() {\n    const selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    const nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    const range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n\n  getRange() {\n    const normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    const range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n\n  hasFocus() {\n    return (\n      document.activeElement === this.root ||\n      contains(this.root, document.activeElement)\n    );\n  }\n\n  normalizedToRange(range) {\n    const positions = [[range.start.node, range.start.offset]];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    const indexes = positions.map(position => {\n      const [node, offset] = position;\n      const blot = this.scroll.find(node, true);\n      const index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      } else if (blot instanceof ContainerBlot) {\n        return index + blot.length();\n      }\n      return index + blot.index(node, offset);\n    });\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    const start = Math.min(end, ...indexes);\n    return new Range(start, end - start);\n  }\n\n  normalizeNative(nativeRange) {\n    if (\n      !contains(this.root, nativeRange.startContainer) ||\n      (!nativeRange.collapsed && !contains(this.root, nativeRange.endContainer))\n    ) {\n      return null;\n    }\n    const range = {\n      start: {\n        node: nativeRange.startContainer,\n        offset: nativeRange.startOffset,\n      },\n      end: { node: nativeRange.endContainer, offset: nativeRange.endOffset },\n      native: nativeRange,\n    };\n    [range.start, range.end].forEach(position => {\n      let { node, offset } = position;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          node = node.lastChild;\n          if (node instanceof Text) {\n            offset = node.data.length;\n          } else if (node.childNodes.length > 0) {\n            // Container case\n            offset = node.childNodes.length;\n          } else {\n            // Embed case\n            offset = node.childNodes.length + 1;\n          }\n        } else {\n          break;\n        }\n      }\n      position.node = node;\n      position.offset = offset;\n    });\n    return range;\n  }\n\n  rangeToNative(range) {\n    const indexes = range.collapsed\n      ? [range.index]\n      : [range.index, range.index + range.length];\n    const args = [];\n    const scrollLength = this.scroll.length();\n    indexes.forEach((index, i) => {\n      index = Math.min(scrollLength - 1, index);\n      const [leaf, leafOffset] = this.scroll.leaf(index);\n      const [node, offset] = leaf.position(leafOffset, i !== 0);\n      args.push(node, offset);\n    });\n    if (args.length < 2) {\n      return args.concat(args);\n    }\n    return args;\n  }\n\n  scrollIntoView(scrollingContainer) {\n    const range = this.lastRange;\n    if (range == null) return;\n    const bounds = this.getBounds(range.index, range.length);\n    if (bounds == null) return;\n    const limit = this.scroll.length() - 1;\n    const [first] = this.scroll.line(Math.min(range.index, limit));\n    let last = first;\n    if (range.length > 0) {\n      [last] = this.scroll.line(Math.min(range.index + range.length, limit));\n    }\n    if (first == null || last == null) return;\n    const scrollBounds = scrollingContainer.getBoundingClientRect();\n    if (bounds.top < scrollBounds.top) {\n      scrollingContainer.scrollTop -= scrollBounds.top - bounds.top;\n    } else if (bounds.bottom > scrollBounds.bottom) {\n      scrollingContainer.scrollTop += bounds.bottom - scrollBounds.bottom;\n    }\n  }\n\n  setNativeRange(\n    startNode,\n    startOffset,\n    endNode = startNode,\n    endOffset = startOffset,\n    force = false,\n  ) {\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (\n      startNode != null &&\n      (this.root.parentNode == null ||\n        startNode.parentNode == null ||\n        endNode.parentNode == null)\n    ) {\n      return;\n    }\n    const selection = document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus();\n      const { native } = this.getNativeRange() || {};\n      if (\n        native == null ||\n        force ||\n        startNode !== native.startContainer ||\n        startOffset !== native.startOffset ||\n        endNode !== native.endContainer ||\n        endOffset !== native.endOffset\n      ) {\n        if (startNode.tagName === 'BR') {\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(\n            startNode,\n          );\n          startNode = startNode.parentNode;\n        }\n        if (endNode.tagName === 'BR') {\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(\n            endNode,\n          );\n          endNode = endNode.parentNode;\n        }\n        const range = document.createRange();\n        range.setStart(startNode, startOffset);\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n    }\n  }\n\n  setRange(range, force = false, source = Emitter.sources.API) {\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      const args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n\n  update(source = Emitter.sources.USER) {\n    const oldRange = this.lastRange;\n    const [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!equal(oldRange, this.lastRange)) {\n      if (\n        !this.composing &&\n        nativeRange != null &&\n        nativeRange.native.collapsed &&\n        nativeRange.start.node !== this.cursor.textNode\n      ) {\n        this.cursor.restore();\n      }\n      const args = [\n        Emitter.events.SELECTION_CHANGE,\n        clone(this.lastRange),\n        clone(oldRange),\n        source,\n      ];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\n\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode; // eslint-disable-line no-unused-expressions\n  } catch (e) {\n    return false;\n  }\n  return parent.contains(descendant);\n}\n\nexport { Range, Selection as default };\n","var clone = (function() {\n'use strict';\n\nfunction _instanceof(obj, type) {\n  return type != null && obj instanceof type;\n}\n\nvar nativeMap;\ntry {\n  nativeMap = Map;\n} catch(_) {\n  // maybe a reference error because no `Map`. Give it a dummy value that no\n  // value will ever be an instanceof.\n  nativeMap = function() {};\n}\n\nvar nativeSet;\ntry {\n  nativeSet = Set;\n} catch(_) {\n  nativeSet = function() {};\n}\n\nvar nativePromise;\ntry {\n  nativePromise = Promise;\n} catch(_) {\n  nativePromise = function() {};\n}\n\n/**\n * Clones (copies) an Object using deep copying.\n *\n * This function supports circular references by default, but if you are certain\n * there are no circular references in your object, you can save some CPU time\n * by calling clone(obj, false).\n *\n * Caution: if `circular` is false and `parent` contains circular references,\n * your program may enter an infinite loop and crash.\n *\n * @param `parent` - the object to be cloned\n * @param `circular` - set to true if the object to be cloned may contain\n *    circular references. (optional - true by default)\n * @param `depth` - set to a number if the object is only to be cloned to\n *    a particular depth. (optional - defaults to Infinity)\n * @param `prototype` - sets the prototype to be used when cloning an object.\n *    (optional - defaults to parent prototype).\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\n *    should be cloned as well. Non-enumerable properties on the prototype\n *    chain will be ignored. (optional - false by default)\n*/\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\n  if (typeof circular === 'object') {\n    depth = circular.depth;\n    prototype = circular.prototype;\n    includeNonEnumerable = circular.includeNonEnumerable;\n    circular = circular.circular;\n  }\n  // maintain two arrays for circular references, where corresponding parents\n  // and children have the same index\n  var allParents = [];\n  var allChildren = [];\n\n  var useBuffer = typeof Buffer != 'undefined';\n\n  if (typeof circular == 'undefined')\n    circular = true;\n\n  if (typeof depth == 'undefined')\n    depth = Infinity;\n\n  // recurse this function so we don't reset allParents and allChildren\n  function _clone(parent, depth) {\n    // cloning null always returns null\n    if (parent === null)\n      return null;\n\n    if (depth === 0)\n      return parent;\n\n    var child;\n    var proto;\n    if (typeof parent != 'object') {\n      return parent;\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      child = new nativeMap();\n    } else if (_instanceof(parent, nativeSet)) {\n      child = new nativeSet();\n    } else if (_instanceof(parent, nativePromise)) {\n      child = new nativePromise(function (resolve, reject) {\n        parent.then(function(value) {\n          resolve(_clone(value, depth - 1));\n        }, function(err) {\n          reject(_clone(err, depth - 1));\n        });\n      });\n    } else if (clone.__isArray(parent)) {\n      child = [];\n    } else if (clone.__isRegExp(parent)) {\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\n    } else if (clone.__isDate(parent)) {\n      child = new Date(parent.getTime());\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\n      if (Buffer.allocUnsafe) {\n        // Node.js >= 4.5.0\n        child = Buffer.allocUnsafe(parent.length);\n      } else {\n        // Older Node.js versions\n        child = new Buffer(parent.length);\n      }\n      parent.copy(child);\n      return child;\n    } else if (_instanceof(parent, Error)) {\n      child = Object.create(parent);\n    } else {\n      if (typeof prototype == 'undefined') {\n        proto = Object.getPrototypeOf(parent);\n        child = Object.create(proto);\n      }\n      else {\n        child = Object.create(prototype);\n        proto = prototype;\n      }\n    }\n\n    if (circular) {\n      var index = allParents.indexOf(parent);\n\n      if (index != -1) {\n        return allChildren[index];\n      }\n      allParents.push(parent);\n      allChildren.push(child);\n    }\n\n    if (_instanceof(parent, nativeMap)) {\n      parent.forEach(function(value, key) {\n        var keyChild = _clone(key, depth - 1);\n        var valueChild = _clone(value, depth - 1);\n        child.set(keyChild, valueChild);\n      });\n    }\n    if (_instanceof(parent, nativeSet)) {\n      parent.forEach(function(value) {\n        var entryChild = _clone(value, depth - 1);\n        child.add(entryChild);\n      });\n    }\n\n    for (var i in parent) {\n      var attrs;\n      if (proto) {\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\n      }\n\n      if (attrs && attrs.set == null) {\n        continue;\n      }\n      child[i] = _clone(parent[i], depth - 1);\n    }\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(parent);\n      for (var i = 0; i < symbols.length; i++) {\n        // Don't need to worry about cloning a symbol because it is a primitive,\n        // like a number or string.\n        var symbol = symbols[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\n          continue;\n        }\n        child[symbol] = _clone(parent[symbol], depth - 1);\n        if (!descriptor.enumerable) {\n          Object.defineProperty(child, symbol, {\n            enumerable: false\n          });\n        }\n      }\n    }\n\n    if (includeNonEnumerable) {\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\n      for (var i = 0; i < allPropertyNames.length; i++) {\n        var propertyName = allPropertyNames[i];\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\n        if (descriptor && descriptor.enumerable) {\n          continue;\n        }\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\n        Object.defineProperty(child, propertyName, {\n          enumerable: false\n        });\n      }\n    }\n\n    return child;\n  }\n\n  return _clone(parent, depth);\n}\n\n/**\n * Simple flat clone using prototype, accepts only objects, usefull for property\n * override on FLAT configuration object (no nested props).\n *\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\n * works.\n */\nclone.clonePrototype = function clonePrototype(parent) {\n  if (parent === null)\n    return null;\n\n  var c = function () {};\n  c.prototype = parent;\n  return new c();\n};\n\n// private utility functions\n\nfunction __objToStr(o) {\n  return Object.prototype.toString.call(o);\n}\nclone.__objToStr = __objToStr;\n\nfunction __isDate(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\n}\nclone.__isDate = __isDate;\n\nfunction __isArray(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\n}\nclone.__isArray = __isArray;\n\nfunction __isRegExp(o) {\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\n}\nclone.__isRegExp = __isRegExp;\n\nfunction __getRegExpFlags(re) {\n  var flags = '';\n  if (re.global) flags += 'g';\n  if (re.ignoreCase) flags += 'i';\n  if (re.multiline) flags += 'm';\n  return flags;\n}\nclone.__getRegExpFlags = __getRegExpFlags;\n\nreturn clone;\n})();\n\nif (typeof module === 'object' && module.exports) {\n  module.exports = clone;\n}\n","var equal = require('deep-equal');\nvar extend = require('extend');\n\n\nvar lib = {\n  attributes: {\n    compose: function (a, b, keepNull) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = extend(true, {}, b);\n      if (!keepNull) {\n        attributes = Object.keys(attributes).reduce(function (copy, key) {\n          if (attributes[key] != null) {\n            copy[key] = attributes[key];\n          }\n          return copy;\n        }, {});\n      }\n      for (var key in a) {\n        if (a[key] !== undefined && b[key] === undefined) {\n          attributes[key] = a[key];\n        }\n      }\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    diff: function(a, b) {\n      if (typeof a !== 'object') a = {};\n      if (typeof b !== 'object') b = {};\n      var attributes = Object.keys(a).concat(Object.keys(b)).reduce(function (attributes, key) {\n        if (!equal(a[key], b[key])) {\n          attributes[key] = b[key] === undefined ? null : b[key];\n        }\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    },\n\n    transform: function (a, b, priority) {\n      if (typeof a !== 'object') return b;\n      if (typeof b !== 'object') return undefined;\n      if (!priority) return b;  // b simply overwrites us without priority\n      var attributes = Object.keys(b).reduce(function (attributes, key) {\n        if (a[key] === undefined) attributes[key] = b[key];  // null is a valid value\n        return attributes;\n      }, {});\n      return Object.keys(attributes).length > 0 ? attributes : undefined;\n    }\n  },\n\n  iterator: function (ops) {\n    return new Iterator(ops);\n  },\n\n  length: function (op) {\n    if (typeof op['delete'] === 'number') {\n      return op['delete'];\n    } else if (typeof op.retain === 'number') {\n      return op.retain;\n    } else {\n      return typeof op.insert === 'string' ? op.insert.length : 1;\n    }\n  }\n};\n\n\nfunction Iterator(ops) {\n  this.ops = ops;\n  this.index = 0;\n  this.offset = 0;\n};\n\nIterator.prototype.hasNext = function () {\n  return this.peekLength() < Infinity;\n};\n\nIterator.prototype.next = function (length) {\n  if (!length) length = Infinity;\n  var nextOp = this.ops[this.index];\n  if (nextOp) {\n    var offset = this.offset;\n    var opLength = lib.length(nextOp)\n    if (length >= opLength - offset) {\n      length = opLength - offset;\n      this.index += 1;\n      this.offset = 0;\n    } else {\n      this.offset += length;\n    }\n    if (typeof nextOp['delete'] === 'number') {\n      return { 'delete': length };\n    } else {\n      var retOp = {};\n      if (nextOp.attributes) {\n        retOp.attributes = nextOp.attributes;\n      }\n      if (typeof nextOp.retain === 'number') {\n        retOp.retain = length;\n      } else if (typeof nextOp.insert === 'string') {\n        retOp.insert = nextOp.insert.substr(offset, length);\n      } else {\n        // offset should === 0, length should === 1\n        retOp.insert = nextOp.insert;\n      }\n      return retOp;\n    }\n  } else {\n    return { retain: Infinity };\n  }\n};\n\nIterator.prototype.peek = function () {\n  return this.ops[this.index];\n};\n\nIterator.prototype.peekLength = function () {\n  if (this.ops[this.index]) {\n    // Should never return 0 if our index is being managed correctly\n    return lib.length(this.ops[this.index]) - this.offset;\n  } else {\n    return Infinity;\n  }\n};\n\nIterator.prototype.peekType = function () {\n  if (this.ops[this.index]) {\n    if (typeof this.ops[this.index]['delete'] === 'number') {\n      return 'delete';\n    } else if (typeof this.ops[this.index].retain === 'number') {\n      return 'retain';\n    } else {\n      return 'insert';\n    }\n  }\n  return 'retain';\n};\n\n\nmodule.exports = lib;\n","import extend from 'extend';\nimport Emitter from '../core/emitter';\nimport Theme from '../core/theme';\nimport ColorPicker from '../ui/color-picker';\nimport IconPicker from '../ui/icon-picker';\nimport Picker from '../ui/picker';\nimport Tooltip from '../ui/tooltip';\n\nconst ALIGNS = [false, 'center', 'right', 'justify'];\n\nconst COLORS = [\n  '#000000',\n  '#e60000',\n  '#ff9900',\n  '#ffff00',\n  '#008a00',\n  '#0066cc',\n  '#9933ff',\n  '#ffffff',\n  '#facccc',\n  '#ffebcc',\n  '#ffffcc',\n  '#cce8cc',\n  '#cce0f5',\n  '#ebd6ff',\n  '#bbbbbb',\n  '#f06666',\n  '#ffc266',\n  '#ffff66',\n  '#66b966',\n  '#66a3e0',\n  '#c285ff',\n  '#888888',\n  '#a10000',\n  '#b26b00',\n  '#b2b200',\n  '#006100',\n  '#0047b2',\n  '#6b24b2',\n  '#444444',\n  '#5c0000',\n  '#663d00',\n  '#666600',\n  '#003700',\n  '#002966',\n  '#3d1466',\n];\n\nconst FONTS = [false, 'serif', 'monospace'];\n\nconst HEADERS = ['1', '2', '3', false];\n\nconst SIZES = ['small', false, 'large', 'huge'];\n\nclass BaseTheme extends Theme {\n  constructor(quill, options) {\n    super(quill, options);\n    const listener = e => {\n      if (!document.body.contains(quill.root)) {\n        document.body.removeEventListener('click', listener);\n        return;\n      }\n      if (\n        this.tooltip != null &&\n        !this.tooltip.root.contains(e.target) &&\n        document.activeElement !== this.tooltip.textbox &&\n        !this.quill.hasFocus()\n      ) {\n        this.tooltip.hide();\n      }\n      if (this.pickers != null) {\n        this.pickers.forEach(picker => {\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n  }\n\n  addModule(name) {\n    const module = super.addModule(name);\n    if (name === 'toolbar') {\n      this.extendToolbar(module);\n    }\n    return module;\n  }\n\n  buildButtons(buttons, icons) {\n    Array.from(buttons).forEach(button => {\n      const className = button.getAttribute('class') || '';\n      className.split(/\\s+/).forEach(name => {\n        if (!name.startsWith('ql-')) return;\n        name = name.slice('ql-'.length);\n        if (icons[name] == null) return;\n        if (name === 'direction') {\n          button.innerHTML = icons[name][''] + icons[name].rtl;\n        } else if (typeof icons[name] === 'string') {\n          button.innerHTML = icons[name];\n        } else {\n          const value = button.value || '';\n          if (value != null && icons[name][value]) {\n            button.innerHTML = icons[name][value];\n          }\n        }\n      });\n    });\n  }\n\n  buildPickers(selects, icons) {\n    this.pickers = Array.from(selects).map(select => {\n      if (select.classList.contains('ql-align')) {\n        if (select.querySelector('option') == null) {\n          fillSelect(select, ALIGNS);\n        }\n        return new IconPicker(select, icons.align);\n      } else if (\n        select.classList.contains('ql-background') ||\n        select.classList.contains('ql-color')\n      ) {\n        const format = select.classList.contains('ql-background')\n          ? 'background'\n          : 'color';\n        if (select.querySelector('option') == null) {\n          fillSelect(\n            select,\n            COLORS,\n            format === 'background' ? '#ffffff' : '#000000',\n          );\n        }\n        return new ColorPicker(select, icons[format]);\n      }\n      if (select.querySelector('option') == null) {\n        if (select.classList.contains('ql-font')) {\n          fillSelect(select, FONTS);\n        } else if (select.classList.contains('ql-header')) {\n          fillSelect(select, HEADERS);\n        } else if (select.classList.contains('ql-size')) {\n          fillSelect(select, SIZES);\n        }\n      }\n      return new Picker(select);\n    });\n    const update = () => {\n      this.pickers.forEach(picker => {\n        picker.update();\n      });\n    };\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\n  }\n}\nBaseTheme.DEFAULTS = extend(true, {}, Theme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image() {\n          let fileInput = this.container.querySelector(\n            'input.ql-image[type=file]',\n          );\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute(\n              'accept',\n              this.quill.uploader.options.mimetypes.join(', '),\n            );\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', () => {\n              const range = this.quill.getSelection(true);\n              this.quill.uploader.upload(range, fileInput.files);\n              fileInput.value = '';\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video() {\n          this.quill.theme.tooltip.edit('video');\n        },\n      },\n    },\n  },\n});\n\nclass BaseTooltip extends Tooltip {\n  constructor(quill, boundsContainer) {\n    super(quill, boundsContainer);\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\n    this.listen();\n  }\n\n  listen() {\n    this.textbox.addEventListener('keydown', event => {\n      if (event.key === 'Enter') {\n        this.save();\n        event.preventDefault();\n      } else if (event.key === 'Escape') {\n        this.cancel();\n        event.preventDefault();\n      }\n    });\n  }\n\n  cancel() {\n    this.hide();\n  }\n\n  edit(mode = 'link', preview = null) {\n    this.root.classList.remove('ql-hidden');\n    this.root.classList.add('ql-editing');\n    if (preview != null) {\n      this.textbox.value = preview;\n    } else if (mode !== this.root.getAttribute('data-mode')) {\n      this.textbox.value = '';\n    }\n    this.position(this.quill.getBounds(this.quill.selection.savedRange));\n    this.textbox.select();\n    this.textbox.setAttribute(\n      'placeholder',\n      this.textbox.getAttribute(`data-${mode}`) || '',\n    );\n    this.root.setAttribute('data-mode', mode);\n  }\n\n  restoreFocus() {\n    const { scrollTop } = this.quill.scrollingContainer;\n    this.quill.focus();\n    this.quill.scrollingContainer.scrollTop = scrollTop;\n  }\n\n  save() {\n    let { value } = this.textbox;\n    switch (this.root.getAttribute('data-mode')) {\n      case 'link': {\n        const { scrollTop } = this.quill.root;\n        if (this.linkRange) {\n          this.quill.formatText(\n            this.linkRange,\n            'link',\n            value,\n            Emitter.sources.USER,\n          );\n          delete this.linkRange;\n        } else {\n          this.restoreFocus();\n          this.quill.format('link', value, Emitter.sources.USER);\n        }\n        this.quill.root.scrollTop = scrollTop;\n        break;\n      }\n      case 'video': {\n        value = extractVideoUrl(value);\n      } // eslint-disable-next-line no-fallthrough\n      case 'formula': {\n        if (!value) break;\n        const range = this.quill.getSelection(true);\n        if (range != null) {\n          const index = range.index + range.length;\n          this.quill.insertEmbed(\n            index,\n            this.root.getAttribute('data-mode'),\n            value,\n            Emitter.sources.USER,\n          );\n          if (this.root.getAttribute('data-mode') === 'formula') {\n            this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\n          }\n          this.quill.setSelection(index + 2, Emitter.sources.USER);\n        }\n        break;\n      }\n      default:\n    }\n    this.textbox.value = '';\n    this.hide();\n  }\n}\n\nfunction extractVideoUrl(url) {\n  let match =\n    url.match(\n      /^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/,\n    ) ||\n    url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return `${match[1] || 'https'}://www.youtube.com/embed/${\n      match[2]\n    }?showinfo=0`;\n  }\n  // eslint-disable-next-line no-cond-assign\n  if ((match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/))) {\n    return `${match[1] || 'https'}://player.vimeo.com/video/${match[2]}/`;\n  }\n  return url;\n}\n\nfunction fillSelect(select, values, defaultValue = false) {\n  values.forEach(value => {\n    const option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', value);\n    }\n    select.appendChild(option);\n  });\n}\n\nexport { BaseTooltip, BaseTheme as default };\n","class Tooltip {\n  constructor(quill, boundsContainer) {\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (this.quill.root === this.quill.scrollingContainer) {\n      this.quill.root.addEventListener('scroll', () => {\n        this.root.style.marginTop = `${-1 * this.quill.root.scrollTop}px`;\n      });\n    }\n    this.hide();\n  }\n\n  hide() {\n    this.root.classList.add('ql-hidden');\n  }\n\n  position(reference) {\n    const left =\n      reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n    // root.scrollTop should be 0 if scrollContainer !== root\n    const top = reference.bottom + this.quill.root.scrollTop;\n    this.root.style.left = `${left}px`;\n    this.root.style.top = `${top}px`;\n    this.root.classList.remove('ql-flip');\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\n    const rootBounds = this.root.getBoundingClientRect();\n    let shift = 0;\n    if (rootBounds.right > containerBounds.right) {\n      shift = containerBounds.right - rootBounds.right;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.left < containerBounds.left) {\n      shift = containerBounds.left - rootBounds.left;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.bottom > containerBounds.bottom) {\n      const height = rootBounds.bottom - rootBounds.top;\n      const verticalShift = reference.bottom - reference.top + height;\n      this.root.style.top = `${top - verticalShift}px`;\n      this.root.classList.add('ql-flip');\n    }\n    return shift;\n  }\n\n  show() {\n    this.root.classList.remove('ql-editing');\n    this.root.classList.remove('ql-hidden');\n  }\n}\n\nexport default Tooltip;\n","import Picker from './picker';\n\nclass IconPicker extends Picker {\n  constructor(select, icons) {\n    super(select);\n    this.container.classList.add('ql-icon-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(\n      item => {\n        item.innerHTML = icons[item.getAttribute('data-value') || ''];\n      },\n    );\n    this.defaultItem = this.container.querySelector('.ql-selected');\n    this.selectItem(this.defaultItem);\n  }\n\n  selectItem(target, trigger) {\n    super.selectItem(target, trigger);\n    const item = target || this.defaultItem;\n    this.label.innerHTML = item.innerHTML;\n  }\n}\n\nexport default IconPicker;\n","import Picker from './picker';\n\nclass ColorPicker extends Picker {\n  constructor(select, label) {\n    super(select);\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item'))\n      .slice(0, 7)\n      .forEach(item => {\n        item.classList.add('ql-primary');\n      });\n  }\n\n  buildItem(option) {\n    const item = super.buildItem(option);\n    item.style.backgroundColor = option.getAttribute('value') || '';\n    return item;\n  }\n\n  selectItem(item, trigger) {\n    super.selectItem(item, trigger);\n    const colorLabel = this.label.querySelector('.ql-color-label');\n    const value = item ? item.getAttribute('data-value') || '' : '';\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n  }\n}\n\nexport default ColorPicker;\n","import Inline from '../blots/inline';\n\nclass Bold extends Inline {\n  static create() {\n    return super.create();\n  }\n\n  static formats() {\n    return true;\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n}\nBold.blotName = 'bold';\nBold.tagName = ['STRONG', 'B'];\n\nexport default Bold;\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst SizeClass = new ClassAttributor('size', 'ql-size', {\n  scope: Scope.INLINE,\n  whitelist: ['small', 'large', 'huge'],\n});\nconst SizeStyle = new StyleAttributor('size', 'font-size', {\n  scope: Scope.INLINE,\n  whitelist: ['10px', '18px', '32px'],\n});\n\nexport { SizeClass, SizeStyle };\n","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.INLINE,\n  whitelist: ['serif', 'monospace'],\n};\n\nconst FontClass = new ClassAttributor('font', 'ql-font', config);\n\nclass FontStyleAttributor extends StyleAttributor {\n  value(node) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\n\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\n\nexport { FontStyle, FontClass };\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['rtl'],\n};\n\nconst DirectionAttribute = new Attributor('direction', 'dir', config);\nconst DirectionClass = new ClassAttributor('direction', 'ql-direction', config);\nconst DirectionStyle = new StyleAttributor('direction', 'direction', config);\n\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n","import { ClassAttributor, Scope } from 'parchment';\nimport { ColorAttributor } from './color';\n\nconst BackgroundClass = new ClassAttributor('background', 'ql-bg', {\n  scope: Scope.INLINE,\n});\nconst BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Scope.INLINE,\n});\n\nexport { BackgroundClass, BackgroundStyle };\n","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\n\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify'],\n};\n\nconst AlignAttribute = new Attributor('align', 'align', config);\nconst AlignClass = new ClassAttributor('align', 'ql-align', config);\nconst AlignStyle = new StyleAttributor('align', 'text-align', config);\n\nexport { AlignAttribute, AlignClass, AlignStyle };\n","import extend from 'extend';\nimport Delta from 'quill-delta';\nimport {\n  Attributor,\n  ClassAttributor,\n  EmbedBlot,\n  Scope,\n  StyleAttributor,\n} from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nimport { AlignAttribute, AlignStyle } from '../formats/align';\nimport { BackgroundStyle } from '../formats/background';\nimport CodeBlock from '../formats/code';\nimport { ColorStyle } from '../formats/color';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction';\nimport { FontStyle } from '../formats/font';\nimport { SizeStyle } from '../formats/size';\n\nconst debug = logger('quill:clipboard');\n\nconst CLIPBOARD_CONFIG = [\n  [Node.TEXT_NODE, matchText],\n  [Node.TEXT_NODE, matchNewline],\n  ['br', matchBreak],\n  [Node.ELEMENT_NODE, matchNewline],\n  [Node.ELEMENT_NODE, matchBlot],\n  [Node.ELEMENT_NODE, matchAttributor],\n  [Node.ELEMENT_NODE, matchStyles],\n  ['li', matchIndent],\n  ['ol, ul', matchList],\n  ['pre', matchCodeBlock],\n  ['tr', matchTable],\n  ['b', matchAlias.bind(matchAlias, 'bold')],\n  ['i', matchAlias.bind(matchAlias, 'italic')],\n  ['style', matchIgnore],\n];\n\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce(\n  (memo, attr) => {\n    memo[attr.keyName] = attr;\n    return memo;\n  },\n  {},\n);\n\nconst STYLE_ATTRIBUTORS = [\n  AlignStyle,\n  BackgroundStyle,\n  ColorStyle,\n  DirectionStyle,\n  FontStyle,\n  SizeStyle,\n].reduce((memo, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\n\nclass Clipboard extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.root.addEventListener('copy', this.onCaptureCopy.bind(this));\n    this.quill.root.addEventListener('cut', this.onCaptureCut.bind(this));\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers).forEach(\n      ([selector, matcher]) => {\n        this.addMatcher(selector, matcher);\n      },\n    );\n  }\n\n  addMatcher(selector, matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n\n  convert({ html, text }) {\n    const formats = this.quill.getFormat(this.quill.selection.savedRange.index);\n    if (formats[CodeBlock.blotName]) {\n      return new Delta().insert(text, {\n        [CodeBlock.blotName]: formats[CodeBlock.blotName],\n      });\n    } else if (!html) {\n      return new Delta().insert(text || '');\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.innerHTML = html.replace(/>\\r?\\n +</g, '><'); // Remove spaces between tags\n    const nodeMatches = new WeakMap();\n    const [elementMatchers, textMatchers] = this.prepareMatching(\n      container,\n      nodeMatches,\n    );\n    const delta = traverse(\n      this.quill.scroll,\n      container,\n      elementMatchers,\n      textMatchers,\n      nodeMatches,\n    );\n    // Remove trailing newline\n    if (\n      deltaEndsWith(delta, '\\n') &&\n      delta.ops[delta.ops.length - 1].attributes == null\n    ) {\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    return delta;\n  }\n\n  dangerouslyPasteHTML(index, html, source = Quill.sources.API) {\n    if (typeof index === 'string') {\n      const delta = this.convert({ html: index, text: '' });\n      this.quill.setContents(delta, html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      const paste = this.convert({ html, text: '' });\n      this.quill.updateContents(\n        new Delta().retain(index).concat(paste),\n        source,\n      );\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n\n  onCaptureCopy(e) {\n    if (e.defaultPrevented) return;\n    this.quill.update();\n    const [range] = this.quill.selection.getRange();\n    if (range) {\n      this.onCopy(e, range);\n      e.preventDefault();\n    }\n  }\n\n  onCaptureCut(e) {\n    if (e.defaultPrevented) return;\n    this.quill.update();\n    const [range] = this.quill.selection.getRange();\n    if (range) {\n      this.onCopy(e, range);\n      this.quill.deleteText(range, Quill.sources.USER);\n      e.preventDefault();\n    }\n  }\n\n  onCapturePaste(e) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    const range = this.quill.getSelection(true);\n    const files = Array.from(e.clipboardData.files || []);\n    if (files.length > 0) {\n      this.quill.uploader.upload(range, files);\n    } else {\n      this.onPaste(e, range);\n    }\n    e.preventDefault();\n  }\n\n  onCopy(e, range) {\n    const text = this.quill.getText(range);\n    const html = this.quill.getSemanticHTML(range);\n    e.clipboardData.setData('text/plain', text);\n    e.clipboardData.setData('text/html', html);\n  }\n\n  onPaste(e, range) {\n    const html = e.clipboardData.getData('text/html');\n    const text = e.clipboardData.getData('text/plain');\n    const pastedDelta = this.convert({ text, html });\n    debug.log('onPaste', pastedDelta, { text, html });\n    const delta = new Delta()\n      .retain(range.index)\n      .delete(range.length)\n      .concat(pastedDelta);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    // range.length contributes to delta.length()\n    this.quill.setSelection(\n      delta.length() - range.length,\n      Quill.sources.SILENT,\n    );\n    this.quill.scrollIntoView();\n  }\n\n  prepareMatching(container, nodeMatches) {\n    const elementMatchers = [];\n    const textMatchers = [];\n    this.matchers.forEach(pair => {\n      const [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          Array.from(container.querySelectorAll(selector)).forEach(node => {\n            if (nodeMatches.has(node)) {\n              const matches = nodeMatches.get(node);\n              matches.push(matcher);\n            } else {\n              nodeMatches.set(node, [matcher]);\n            }\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\nClipboard.DEFAULTS = {\n  matchers: [],\n};\n\nfunction applyFormat(delta, format, value) {\n  if (typeof format === 'object') {\n    return Object.keys(format).reduce((newDelta, key) => {\n      return applyFormat(newDelta, key, format[key]);\n    }, delta);\n  }\n  return delta.reduce((newDelta, op) => {\n    if (op.attributes && op.attributes[format]) {\n      return newDelta.push(op);\n    }\n    return newDelta.insert(\n      op.insert,\n      extend({}, { [format]: value }, op.attributes),\n    );\n  }, new Delta());\n}\n\nfunction deltaEndsWith(delta, text) {\n  let endText = '';\n  for (\n    let i = delta.ops.length - 1;\n    i >= 0 && endText.length < text.length;\n    --i // eslint-disable-line no-plusplus\n  ) {\n    const op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\n\nfunction isLine(node) {\n  if (node.childNodes.length === 0) return false; // Exclude embed blocks\n  return [\n    'address',\n    'article',\n    'blockquote',\n    'canvas',\n    'dd',\n    'div',\n    'dl',\n    'dt',\n    'fieldset',\n    'figcaption',\n    'figure',\n    'footer',\n    'form',\n    'h1',\n    'h2',\n    'h3',\n    'h4',\n    'h5',\n    'h6',\n    'header',\n    'iframe',\n    'li',\n    'main',\n    'nav',\n    'ol',\n    'output',\n    'p',\n    'pre',\n    'section',\n    'table',\n    'td',\n    'tr',\n    'ul',\n    'video',\n  ].includes(node.tagName.toLowerCase());\n}\n\nconst preNodes = new WeakMap();\nfunction isPre(node) {\n  if (node == null) return false;\n  if (!preNodes.has(node)) {\n    if (node.tagName === 'PRE') {\n      preNodes.set(node, true);\n    } else {\n      preNodes.set(node, isPre(node.parentNode));\n    }\n  }\n  return preNodes.get(node);\n}\n\nfunction traverse(scroll, node, elementMatchers, textMatchers, nodeMatches) {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce((delta, matcher) => {\n      return matcher(node, delta, scroll);\n    }, new Delta());\n  } else if (node.nodeType === node.ELEMENT_NODE) {\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\n      let childrenDelta = traverse(\n        scroll,\n        childNode,\n        elementMatchers,\n        textMatchers,\n        nodeMatches,\n      );\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\n          return matcher(childNode, reducedDelta, scroll);\n        }, childrenDelta);\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce(\n          (reducedDelta, matcher) => {\n            return matcher(childNode, reducedDelta, scroll);\n          },\n          childrenDelta,\n        );\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  }\n  return new Delta();\n}\n\nfunction matchAlias(format, node, delta) {\n  return applyFormat(delta, format, true);\n}\n\nfunction matchAttributor(node, delta, scroll) {\n  const attributes = Attributor.keys(node);\n  const classes = ClassAttributor.keys(node);\n  const styles = StyleAttributor.keys(node);\n  const formats = {};\n  attributes\n    .concat(classes)\n    .concat(styles)\n    .forEach(name => {\n      let attr = scroll.query(name, Scope.ATTRIBUTE);\n      if (attr != null) {\n        formats[attr.attrName] = attr.value(node);\n        if (formats[attr.attrName]) return;\n      }\n      attr = ATTRIBUTE_ATTRIBUTORS[name];\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n        formats[attr.attrName] = attr.value(node) || undefined;\n      }\n      attr = STYLE_ATTRIBUTORS[name];\n      if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n        attr = STYLE_ATTRIBUTORS[name];\n        formats[attr.attrName] = attr.value(node) || undefined;\n      }\n    });\n  if (Object.keys(formats).length > 0) {\n    return applyFormat(delta, formats);\n  }\n  return delta;\n}\n\nfunction matchBlot(node, delta, scroll) {\n  const match = scroll.query(node);\n  if (match == null) return delta;\n  if (match.prototype instanceof EmbedBlot) {\n    const embed = {};\n    const value = match.value(node);\n    if (value != null) {\n      embed[match.blotName] = value;\n      return new Delta().insert(embed, match.formats(node, scroll));\n    }\n  } else if (typeof match.formats === 'function') {\n    return applyFormat(delta, match.blotName, match.formats(node, scroll));\n  }\n  return delta;\n}\n\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\n\nfunction matchCodeBlock(node, delta, scroll) {\n  const match = scroll.query('code-block');\n  const language = match ? match.formats(node, scroll) : true;\n  return applyFormat(delta, 'code-block', language);\n}\n\nfunction matchIgnore() {\n  return new Delta();\n}\n\nfunction matchIndent(node, delta, scroll) {\n  const match = scroll.query(node);\n  if (\n    match == null ||\n    match.blotName !== 'list' ||\n    !deltaEndsWith(delta, '\\n')\n  ) {\n    return delta;\n  }\n  let indent = -1;\n  let parent = node.parentNode;\n  while (parent != null) {\n    if (['OL', 'UL'].includes(parent.tagName)) {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.compose(\n    new Delta().retain(delta.length() - 1).retain(1, { indent }),\n  );\n}\n\nfunction matchList(node, delta) {\n  const list = node.tagName === 'OL' ? 'ordered' : 'bullet';\n  return applyFormat(delta, 'list', list);\n}\n\nfunction matchNewline(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (\n      isLine(node) ||\n      (delta.length() > 0 && node.nextSibling && isLine(node.nextSibling))\n    ) {\n      delta.insert('\\n');\n    }\n  }\n  return delta;\n}\n\nfunction matchStyles(node, delta) {\n  const formats = {};\n  const style = node.style || {};\n  if (style.fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (\n    style.fontWeight.startsWith('bold') ||\n    parseInt(style.fontWeight, 10) >= 700\n  ) {\n    formats.bold = true;\n  }\n  if (Object.keys(formats).length > 0) {\n    delta = applyFormat(delta, formats);\n  }\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    return new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\n\nfunction matchTable(node, delta) {\n  const table =\n    node.parentNode.tagName === 'TABLE'\n      ? node.parentNode\n      : node.parentNode.parentNode;\n  const rows = Array.from(table.querySelectorAll('tr'));\n  const row = rows.indexOf(node) + 1;\n  return applyFormat(delta, 'table', row);\n}\n\nfunction matchText(node, delta) {\n  let text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentNode.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (text.trim().length === 0 && node.parentNode == null) {\n    return delta;\n  }\n  if (!isPre(node)) {\n    const replacer = (collapse, match) => {\n      const replaced = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\n      return replaced.length < 1 && collapse ? ' ' : replaced;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\n    if (\n      (node.previousSibling == null && isLine(node.parentNode)) ||\n      (node.previousSibling != null && isLine(node.previousSibling))\n    ) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if (\n      (node.nextSibling == null && isLine(node.parentNode)) ||\n      (node.nextSibling != null && isLine(node.nextSibling))\n    ) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\n\nexport {\n  Clipboard as default,\n  matchAttributor,\n  matchBlot,\n  matchNewline,\n  matchText,\n  traverse,\n};\n","import { EmbedBlot } from 'parchment';\nimport TextBlot from './text';\n\nconst GUARD_TEXT = '\\uFEFF';\n\nclass Embed extends EmbedBlot {\n  constructor(scroll, node) {\n    super(scroll, node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', false);\n    Array.from(this.domNode.childNodes).forEach(childNode => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n\n  index(node, offset) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n\n  restore(node) {\n    let range;\n    let textNode;\n    const text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        const prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length,\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length,\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length,\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length,\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n\n  update(mutations, context) {\n    mutations.forEach(mutation => {\n      if (\n        mutation.type === 'characterData' &&\n        (mutation.target === this.leftGuard ||\n          mutation.target === this.rightGuard)\n      ) {\n        const range = this.restore(mutation.target);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\n\nexport default Embed;\n","class Theme {\n  constructor(quill, options) {\n    this.quill = quill;\n    this.options = options;\n    this.modules = {};\n  }\n\n  init() {\n    Object.keys(this.options.modules).forEach(name => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n\n  addModule(name) {\n    const ModuleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new ModuleClass(\n      this.quill,\n      this.options.modules[name] || {},\n    );\n    return this.modules[name];\n  }\n}\nTheme.DEFAULTS = {\n  modules: {},\n};\nTheme.themes = {\n  default: Theme,\n};\n\nexport default Theme;\n","export default new WeakMap();\n","import extend from 'extend';\nimport Emitter from '../core/emitter';\nimport BaseTheme, { BaseTooltip } from './base';\nimport LinkBlot from '../formats/link';\nimport { Range } from '../core/selection';\nimport icons from '../ui/icons';\n\nconst TOOLBAR_CONFIG = [\n  [{ header: ['1', '2', '3', false] }],\n  ['bold', 'italic', 'underline', 'link'],\n  [{ list: 'ordered' }, { list: 'bullet' }],\n  ['clean'],\n];\n\nclass SnowTooltip extends BaseTooltip {\n  constructor(quill, bounds) {\n    super(quill, bounds);\n    this.preview = this.root.querySelector('a.ql-preview');\n  }\n\n  listen() {\n    super.listen();\n    this.root.querySelector('a.ql-action').addEventListener('click', event => {\n      if (this.root.classList.contains('ql-editing')) {\n        this.save();\n      } else {\n        this.edit('link', this.preview.textContent);\n      }\n      event.preventDefault();\n    });\n    this.root.querySelector('a.ql-remove').addEventListener('click', event => {\n      if (this.linkRange != null) {\n        const range = this.linkRange;\n        this.restoreFocus();\n        this.quill.formatText(range, 'link', false, Emitter.sources.USER);\n        delete this.linkRange;\n      }\n      event.preventDefault();\n      this.hide();\n    });\n    this.quill.on(\n      Emitter.events.SELECTION_CHANGE,\n      (range, oldRange, source) => {\n        if (range == null) return;\n        if (range.length === 0 && source === Emitter.sources.USER) {\n          const [link, offset] = this.quill.scroll.descendant(\n            LinkBlot,\n            range.index,\n          );\n          if (link != null) {\n            this.linkRange = new Range(range.index - offset, link.length());\n            const preview = LinkBlot.formats(link.domNode);\n            this.preview.textContent = preview;\n            this.preview.setAttribute('href', preview);\n            this.show();\n            this.position(this.quill.getBounds(this.linkRange));\n            return;\n          }\n        } else {\n          delete this.linkRange;\n        }\n        this.hide();\n      },\n    );\n  }\n\n  show() {\n    super.show();\n    this.root.removeAttribute('data-mode');\n  }\n}\nSnowTooltip.TEMPLATE = [\n  '<a class=\"ql-preview\" target=\"_blank\" href=\"about:blank\"></a>',\n  '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n  '<a class=\"ql-action\"></a>',\n  '<a class=\"ql-remove\"></a>',\n].join('');\n\nclass SnowTheme extends BaseTheme {\n  constructor(quill, options) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-snow');\n  }\n\n  extendToolbar(toolbar) {\n    toolbar.container.classList.add('ql-snow');\n    this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n    this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n    this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n    if (toolbar.container.querySelector('.ql-link')) {\n      this.quill.keyboard.addBinding(\n        { key: 'k', shortKey: true },\n        (range, context) => {\n          toolbar.handlers.link.call(toolbar, !context.format.link);\n        },\n      );\n    }\n  }\n}\nSnowTheme.DEFAULTS = extend(true, {}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value) {\n          if (value) {\n            const range = this.quill.getSelection();\n            if (range == null || range.length === 0) return;\n            let preview = this.quill.getText(range);\n            if (\n              /^\\S+@\\S+\\.\\S+$/.test(preview) &&\n              preview.indexOf('mailto:') !== 0\n            ) {\n              preview = `mailto:${preview}`;\n            }\n            const { tooltip } = this.quill.theme;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false);\n          }\n        },\n      },\n    },\n  },\n});\n\nexport default SnowTheme;\n","import extend from 'extend';\nimport Emitter from '../core/emitter';\nimport BaseTheme, { BaseTooltip } from './base';\nimport { Range } from '../core/selection';\nimport icons from '../ui/icons';\n\nconst TOOLBAR_CONFIG = [\n  ['bold', 'italic', 'link'],\n  [{ header: 1 }, { header: 2 }, 'blockquote'],\n];\n\nclass BubbleTooltip extends BaseTooltip {\n  constructor(quill, bounds) {\n    super(quill, bounds);\n    this.quill.on(\n      Emitter.events.EDITOR_CHANGE,\n      (type, range, oldRange, source) => {\n        if (type !== Emitter.events.SELECTION_CHANGE) return;\n        if (\n          range != null &&\n          range.length > 0 &&\n          source === Emitter.sources.USER\n        ) {\n          this.show();\n          // Lock our width so we will expand beyond our offsetParent boundaries\n          this.root.style.left = '0px';\n          this.root.style.width = '';\n          this.root.style.width = `${this.root.offsetWidth}px`;\n          const lines = this.quill.getLines(range.index, range.length);\n          if (lines.length === 1) {\n            this.position(this.quill.getBounds(range));\n          } else {\n            const lastLine = lines[lines.length - 1];\n            const index = this.quill.getIndex(lastLine);\n            const length = Math.min(\n              lastLine.length() - 1,\n              range.index + range.length - index,\n            );\n            const indexBounds = this.quill.getBounds(new Range(index, length));\n            this.position(indexBounds);\n          }\n        } else if (\n          document.activeElement !== this.textbox &&\n          this.quill.hasFocus()\n        ) {\n          this.hide();\n        }\n      },\n    );\n  }\n\n  listen() {\n    super.listen();\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\n      this.root.classList.remove('ql-editing');\n    });\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains('ql-hidden')) return;\n        const range = this.quill.getSelection();\n        if (range != null) {\n          this.position(this.quill.getBounds(range));\n        }\n      }, 1);\n    });\n  }\n\n  cancel() {\n    this.show();\n  }\n\n  position(reference) {\n    const shift = super.position(reference);\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\n    arrow.style.marginLeft = '';\n    if (shift !== 0) {\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\n    }\n    return shift;\n  }\n}\nBubbleTooltip.TEMPLATE = [\n  '<span class=\"ql-tooltip-arrow\"></span>',\n  '<div class=\"ql-tooltip-editor\">',\n  '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">',\n  '<a class=\"ql-close\"></a>',\n  '</div>',\n].join('');\n\nclass BubbleTheme extends BaseTheme {\n  constructor(quill, options) {\n    if (\n      options.modules.toolbar != null &&\n      options.modules.toolbar.container == null\n    ) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-bubble');\n  }\n\n  extendToolbar(toolbar) {\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    this.tooltip.root.appendChild(toolbar.container);\n    this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n    this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n  }\n}\nBubbleTheme.DEFAULTS = extend(true, {}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value) {\n          if (!value) {\n            this.quill.format('link', false);\n          } else {\n            this.quill.theme.tooltip.edit();\n          }\n        },\n      },\n    },\n  },\n});\n\nexport { BubbleTooltip, BubbleTheme as default };\n","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=ql-stroke points=\\\"7 11 9 13 11 11 7 11\\\"></polygon> <polygon class=ql-stroke points=\\\"7 7 9 5 11 7 7 7\\\"></polygon> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=2 width=3 x=5 y=5></rect> <rect class=ql-fill height=2 width=4 x=9 y=5></rect> <g class=\\\"ql-fill ql-transparent\\\"> <rect height=2 width=3 x=5 y=8></rect> <rect height=2 width=4 x=9 y=8></rect> <rect height=2 width=3 x=5 y=11></rect> <rect height=2 width=4 x=9 y=11></rect> </g> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-stroke ql-thin\\\" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class=\\\"ql-stroke ql-thin\\\" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class=\\\"ql-stroke ql-thin\\\" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class=\\\"ql-stroke ql-thin\\\" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>\";","module.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points=\\\"3 4 4 5 6 3\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points=\\\"3 14 4 15 6 13\\\"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"3 9 4 10 6 8\\\"></polyline> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class=\\\"ql-even ql-stroke\\\" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class=\\\"ql-even ql-stroke\\\" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points=\\\"5 7 5 11 3 9 5 7\\\"></polyline> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=\\\"ql-fill ql-stroke\\\" points=\\\"3 7 3 11 5 9 3 7\\\"></polyline> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class=\\\"ql-even ql-fill\\\" points=\\\"5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12\\\"></polyline> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>\";","module.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>\";","module.exports = \"<svg viewBox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"15 12 13 10 15 8 15 12\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"3 11 5 9 3 7 3 11\\\"></polygon> <line class=\\\"ql-stroke ql-fill\\\" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=\\\"ql-color-label ql-stroke ql-transparent\\\" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points=\\\"5.5 11 9 3 12.5 11\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"5 7 3 9 5 11\\\"></polyline> <polyline class=\\\"ql-even ql-stroke\\\" points=\\\"13 7 15 9 13 11\\\"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>\";","module.exports = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=4 y=5></rect> <rect class=\\\"ql-fill ql-stroke\\\" height=3 width=3 x=11 y=5></rect> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M7,8c0,4.031-3,5-3,5></path> <path class=\\\"ql-even ql-fill ql-stroke\\\" d=M14,8c0,4.031-3,5-3,5></path> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <g class=\\\"ql-fill ql-color-label\\\"> <polygon points=\\\"6 6.868 6 6 5 6 5 7 5.942 7 6 6.868\\\"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points=\\\"6.817 5 6 5 6 6 6.38 6 6.817 5\\\"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points=\\\"4 11.439 4 11 3 11 3 12 3.755 12 4 11.439\\\"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points=\\\"4.63 10 4 10 4 11 4.192 11 4.63 10\\\"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points=\\\"13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174\\\"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points=\\\"12 6.868 12 6 11.62 6 12 6.868\\\"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points=\\\"12.933 9 13 9 13 8 12.495 8 12.933 9\\\"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points=\\\"5.5 13 9 5 12.5 13\\\"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>\";","module.exports = \"<svg viewbox=\\\"0 0 18 18\\\"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>\";","import Delta from 'quill-delta';\nimport { EmbedBlot, Scope } from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nconst debug = logger('quill:toolbar');\n\nclass Toolbar extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      const container = document.createElement('div');\n      addControls(container, this.options.container);\n      quill.container.parentNode.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      return debug.error('Container required for toolbar', this.options);\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    Object.keys(this.options.handlers).forEach(format => {\n      this.addHandler(format, this.options.handlers[format]);\n    });\n    Array.from(this.container.querySelectorAll('button, select')).forEach(\n      input => {\n        this.attach(input);\n      },\n    );\n    this.quill.on(Quill.events.EDITOR_CHANGE, (type, range) => {\n      if (type === Quill.events.SELECTION_CHANGE) {\n        this.update(range);\n      }\n    });\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n\n  addHandler(format, handler) {\n    this.handlers[format] = handler;\n  }\n\n  attach(input) {\n    let format = Array.from(input.classList).find(className => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (\n      this.handlers[format] == null &&\n      this.quill.scroll.query(format) == null\n    ) {\n      debug.warn('ignoring attaching to nonexistent format', format, input);\n      return;\n    }\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, e => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        if (input.selectedIndex < 0) return;\n        const selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      const [range] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (\n        this.quill.scroll.query(format).prototype instanceof EmbedBlot\n      ) {\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\n        if (!value) return;\n        this.quill.updateContents(\n          new Delta()\n            .retain(range.index)\n            .delete(range.length)\n            .insert({ [format]: value }),\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    this.controls.push([format, input]);\n  }\n\n  update(range) {\n    const formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach(pair => {\n      const [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          input.value = ''; // TODO make configurable?\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else if (range == null) {\n        input.classList.remove('ql-active');\n      } else if (input.hasAttribute('value')) {\n        // both being null should match (default values)\n        // '1' should match with 1 (headers)\n        const isActive =\n          formats[format] === input.getAttribute('value') ||\n          (formats[format] != null &&\n            formats[format].toString() === input.getAttribute('value')) ||\n          (formats[format] == null && !input.getAttribute('value'));\n        input.classList.toggle('ql-active', isActive);\n      } else {\n        input.classList.toggle('ql-active', formats[format] != null);\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\n\nfunction addButton(container, format, value) {\n  const input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add(`ql-${format}`);\n  if (value != null) {\n    input.value = value;\n  }\n  container.appendChild(input);\n}\n\nfunction addControls(container, groups) {\n  if (!Array.isArray(groups[0])) {\n    groups = [groups];\n  }\n  groups.forEach(controls => {\n    const group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach(control => {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        const format = Object.keys(control)[0];\n        const value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\n\nfunction addSelect(container, format, values) {\n  const input = document.createElement('select');\n  input.classList.add(`ql-${format}`);\n  values.forEach(value => {\n    const option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', value);\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\n\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean() {\n      const range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length === 0) {\n        const formats = this.quill.getFormat();\n        Object.keys(formats).forEach(name => {\n          // Clean functionality in existing apps only clean inline formats\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\n            this.quill.format(name, false, Quill.sources.USER);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range, Quill.sources.USER);\n      }\n    },\n    direction(value) {\n      const { align } = this.quill.getFormat();\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent(value) {\n      const range = this.quill.getSelection();\n      const formats = this.quill.getFormat(range);\n      const indent = parseInt(formats.indent || 0, 10);\n      if (value === '+1' || value === '-1') {\n        let modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list(value) {\n      const range = this.quill.getSelection();\n      const formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    },\n  },\n};\n\nexport { Toolbar as default, addControls };\n","import Block from '../blots/block';\nimport Container from '../blots/container';\n\nclass TableCell extends Block {\n  static create(value) {\n    const node = super.create();\n    if (value) {\n      node.setAttribute('data-row', value);\n    } else {\n      node.setAttribute('data-row', tableId());\n    }\n    return node;\n  }\n\n  static formats(domNode) {\n    if (domNode.hasAttribute('data-row')) {\n      return domNode.getAttribute('data-row');\n    }\n    return undefined;\n  }\n\n  format(name, value) {\n    if (name === TableCell.blotName && value) {\n      this.domNode.setAttribute('data-row', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  table() {\n    let cur = this.parent;\n    while (cur != null && cur.statics.blotName !== 'table-container') {\n      cur = cur.parent;\n    }\n    return cur;\n  }\n}\nTableCell.blotName = 'table';\nTableCell.tagName = 'TD';\n\nclass TableRow extends Container {\n  checkMerge() {\n    if (super.checkMerge() && this.next.children.head != null) {\n      const thisHead = this.children.head.formats();\n      const thisTail = this.children.tail.formats();\n      const nextHead = this.next.children.head.formats();\n      const nextTail = this.next.children.tail.formats();\n      return (\n        thisHead.table === thisTail.table &&\n        thisHead.table === nextHead.table &&\n        thisHead.table === nextTail.table\n      );\n    }\n    return false;\n  }\n\n  optimize(...args) {\n    super.optimize(...args);\n    this.children.forEach(child => {\n      if (child.next == null) return;\n      const childFormats = child.formats();\n      const nextFormats = child.next.formats();\n      if (childFormats.table !== nextFormats.table) {\n        const next = this.splitAfter(child);\n        if (next) {\n          next.optimize();\n        }\n        // We might be able to merge with prev now\n        if (this.prev) {\n          this.prev.optimize();\n        }\n      }\n    });\n  }\n}\nTableRow.blotName = 'table-row';\nTableRow.tagName = 'TR';\n\nclass TableBody extends Container {}\nTableBody.blotName = 'table-body';\nTableBody.tagName = 'TBODY';\n\nclass TableContainer extends Container {\n  balanceCells() {\n    const rows = this.descendants(TableRow);\n    const maxColumns = rows.reduce((max, row) => {\n      return Math.max(row.children.length, max);\n    }, 0);\n    rows.forEach(row => {\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\n        let value;\n        if (row.children.head != null) {\n          value = TableCell.formats(row.children.head.domNode);\n        }\n        const blot = this.scroll.create(TableCell.blotName, value);\n        row.appendChild(blot);\n        blot.optimize(); // Add break blot\n      });\n    });\n  }\n\n  deleteColumn(index) {\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    body.children.forEach(row => {\n      const cell = row.children.at(index);\n      if (cell != null) {\n        cell.remove();\n      }\n    });\n  }\n\n  insertColumn(index) {\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    body.children.forEach(row => {\n      const ref = row.children.at(index);\n      const value = TableCell.formats(row.children.head.domNode);\n      const cell = this.scroll.create(TableCell.blotName, value);\n      row.insertBefore(cell, ref);\n    });\n  }\n\n  insertRow(index) {\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    const id = tableId();\n    const row = this.scroll.create(TableRow.blotName);\n    body.children.head.children.forEach(() => {\n      const cell = this.scroll.create(TableCell.blotName, id);\n      row.appendChild(cell);\n    });\n    const ref = body.children.at(index);\n    body.insertBefore(row, ref);\n  }\n}\nTableContainer.blotName = 'table-container';\nTableContainer.tagName = 'TABLE';\n\nTableContainer.allowedChildren = [TableBody];\nTableBody.requiredContainer = TableContainer;\n\nTableBody.allowedChildren = [TableRow];\nTableRow.requiredContainer = TableBody;\n\nTableRow.allowedChildren = [TableCell];\nTableCell.requiredContainer = TableRow;\n\nfunction tableId() {\n  const id = Math.random()\n    .toString(36)\n    .slice(2, 6);\n  return `row-${id}`;\n}\n\nexport { TableCell, TableRow, TableBody, TableContainer, tableId };\n","import Delta from 'quill-delta';\nimport Quill from '../core/quill';\nimport Module from '../core/module';\nimport {\n  TableCell,\n  TableRow,\n  TableBody,\n  TableContainer,\n  tableId,\n} from '../formats/table';\n\nclass Table extends Module {\n  static register() {\n    Quill.register(TableCell);\n    Quill.register(TableRow);\n    Quill.register(TableBody);\n    Quill.register(TableContainer);\n  }\n\n  constructor(...args) {\n    super(...args);\n    this.listenBalanceCells();\n  }\n\n  balanceTables() {\n    this.quill.scroll.descendants(TableContainer).forEach(table => {\n      table.balanceCells();\n    });\n  }\n\n  deleteColumn() {\n    const [table, row, cell] = this.getTable();\n    if (cell == null) return;\n    const column = row.children.indexOf(cell);\n    table.deleteColumn(column);\n    this.quill.update(Quill.sources.USER);\n  }\n\n  deleteRow() {\n    const [, row] = this.getTable();\n    if (row == null) return;\n    row.remove();\n    this.quill.update(Quill.sources.USER);\n  }\n\n  deleteTable() {\n    const [table] = this.getTable();\n    if (table == null) return;\n    const offset = table.offset();\n    table.remove();\n    this.quill.update(Quill.sources.USER);\n    this.quill.setSelection(offset, Quill.sources.SILENT);\n  }\n\n  getTable(range = this.quill.getSelection()) {\n    if (range == null) return [null, null, null, -1];\n    const [cell, offset] = this.quill.getLine(range.index);\n    if (cell == null || cell.statics.blotName !== TableCell.blotName) {\n      return [null, null, null, -1];\n    }\n    const row = cell.parent;\n    const table = row.parent.parent;\n    return [table, row, cell, offset];\n  }\n\n  insertColumn(offset) {\n    const range = this.quill.getSelection();\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const column = row.children.offset(cell);\n    table.insertColumn(column + offset);\n    this.quill.update(Quill.sources.USER);\n    let shift = row.parent.children.indexOf(row);\n    if (offset === 0) {\n      shift += 1;\n    }\n    this.quill.setSelection(\n      range.index + shift,\n      range.length,\n      Quill.sources.SILENT,\n    );\n  }\n\n  insertColumnLeft() {\n    this.insertColumn(0);\n  }\n\n  insertColumnRight() {\n    this.insertColumn(1);\n  }\n\n  insertRow(offset) {\n    const range = this.quill.getSelection();\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const index = row.parent.children.indexOf(row);\n    table.insertRow(index + offset);\n    this.quill.update(Quill.sources.USER);\n    if (offset > 0) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    } else {\n      this.quill.setSelection(\n        range.index + row.children.length,\n        range.length,\n        Quill.sources.SILENT,\n      );\n    }\n  }\n\n  insertRowAbove() {\n    this.insertRow(0);\n  }\n\n  insertRowBelow() {\n    this.insertRow(1);\n  }\n\n  insertTable(rows, columns) {\n    const range = this.quill.getSelection();\n    if (range == null) return;\n    const delta = new Array(rows).fill(0).reduce(memo => {\n      const text = new Array(columns).fill('\\n').join('');\n      return memo.insert(text, { table: tableId() });\n    }, new Delta().retain(range.index));\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\n    this.balanceTables();\n  }\n\n  listenBalanceCells() {\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, mutations => {\n      mutations.some(mutation => {\n        if (mutation.target.tagName === 'TABLE') {\n          this.quill.once(Quill.events.TEXT_CHANGE, (delta, old, source) => {\n            if (source !== Quill.sources.USER) return;\n            this.balanceTables();\n          });\n          return true;\n        }\n        return false;\n      });\n    });\n  }\n}\n\nexport default Table;\n","import Delta from 'quill-delta';\nimport { ClassAttributor, Scope } from 'parchment';\nimport Inline from '../blots/inline';\nimport Quill from '../core/quill';\nimport Module from '../core/module';\nimport { blockDelta } from '../blots/block';\nimport BreakBlot from '../blots/break';\nimport CursorBlot from '../blots/cursor';\nimport TextBlot from '../blots/text';\nimport CodeBlock, { CodeBlockContainer } from '../formats/code';\nimport { traverse } from '../modules/clipboard';\n\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\n  scope: Scope.INLINE,\n});\nclass CodeToken extends Inline {\n  static formats(node, scroll) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList.contains(CodeBlock.className)) {\n        return super.formats(node, scroll);\n      }\n      node = node.parentNode;\n    }\n    return undefined;\n  }\n\n  constructor(scroll, domNode, value) {\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n\n  format(format, value) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n\n  optimize(...args) {\n    super.optimize(...args);\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n}\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\n\nclass SyntaxCodeBlock extends CodeBlock {\n  static create(value) {\n    const domNode = super.create(value);\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n    return domNode;\n  }\n\n  static formats(domNode) {\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n\n  static register() {} // Syntax module will register\n\n  delta() {\n    if (this.cache.delta == null) {\n      const delta = super.delta();\n      this.cache.delta = delta.compose(\n        new Delta().retain(delta.length(), {\n          [CodeToken.blotName]: null,\n        }),\n      );\n    }\n    return this.cache.delta;\n  }\n\n  format(name, value) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  replaceWith(name, value) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n}\n\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    this.scroll.emitMount(this);\n  }\n\n  format(name, value) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach(child => {\n        child.format(name, value);\n      });\n    }\n  }\n\n  formatAt(index, length, name, value) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n    super.formatAt(index, length, name, value);\n  }\n\n  highlight(highlight, forced = false) {\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(\n      node => node !== this.uiNode,\n    );\n    const text = `${nodes.map(node => node.textContent).join('\\n')}\\n`;\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          return delta.concat(blockDelta(child));\n        }, new Delta());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, { retain, attributes }) => {\n          // Should be all retains\n          if (!retain) return index;\n          if (attributes) {\n            Object.keys(attributes).forEach(format => {\n              if (\n                [SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)\n              ) {\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n          return index + retain;\n        }, 0);\n      }\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n\n  optimize(context) {\n    super.optimize(context);\n    if (\n      this.parent != null &&\n      this.children.head != null &&\n      this.uiNode != null\n    ) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n      if (language !== this.uiNode.value) {\n        this.uiNode.value = language;\n      }\n    }\n  }\n}\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\n\nclass Syntax extends Module {\n  static register() {\n    Quill.register(CodeToken, true);\n    Quill.register(SyntaxCodeBlock, true);\n    Quill.register(SyntaxCodeBlockContainer, true);\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    if (this.options.hljs == null) {\n      throw new Error(\n        'Syntax module requires highlight.js. Please include the library on the page before Quill.',\n      );\n    }\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n\n  initListener() {\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, blot => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      this.options.languages.forEach(({ key, label }) => {\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n        this.highlight(blot, true);\n      });\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n\n  initTimer() {\n    let timer = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      clearTimeout(timer);\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n\n  highlight(blot = null, force = false) {\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    const range = this.quill.getSelection();\n    const blots =\n      blot == null\n        ? this.quill.scroll.descendants(SyntaxCodeBlockContainer)\n        : [blot];\n    blots.forEach(container => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n\n  highlightBlot(text, language = 'plain') {\n    if (language === 'plain') {\n      return text\n        .replace(/[&<>\"']/g, s => {\n          // https://lodash.com/docs#escape\n          const entityMap = {\n            '&': '&amp;',\n            '<': '&lt;',\n            '>': '&gt;',\n            '\"': '&quot;',\n            \"'\": '&#39;',\n          };\n          return entityMap[s];\n        })\n        .split('\\n')\n        .reduce((delta, line, i) => {\n          if (i !== 0) {\n            delta.insert('\\n', { [CodeBlock.blotName]: language });\n          }\n          return delta.insert(line);\n        }, new Delta());\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(CodeBlock.className);\n    container.innerHTML = this.options.hljs.highlight(language, text).value;\n    return traverse(\n      this.quill.scroll,\n      container,\n      [\n        (node, delta) => {\n          const value = TokenAttributor.value(node);\n          if (value) {\n            return delta.compose(\n              new Delta().retain(delta.length(), {\n                [CodeToken.blotName]: value,\n              }),\n            );\n          }\n          return delta;\n        },\n      ],\n      [\n        (node, delta) => {\n          return node.data.split('\\n').reduce((memo, nodeText, i) => {\n            if (i !== 0) memo.insert('\\n', { [CodeBlock.blotName]: language });\n            return memo.insert(nodeText);\n          }, delta);\n        },\n      ],\n      new WeakMap(),\n    );\n  }\n}\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [\n    { key: 'plain', label: 'Plain' },\n    { key: 'bash', label: 'Bash' },\n    { key: 'cpp', label: 'C++' },\n    { key: 'cs', label: 'C#' },\n    { key: 'css', label: 'CSS' },\n    { key: 'diff', label: 'Diff' },\n    { key: 'xml', label: 'HTML/XML' },\n    { key: 'java', label: 'Java' },\n    { key: 'javascript', label: 'Javascript' },\n    { key: 'markdown', label: 'Markdown' },\n    { key: 'php', label: 'PHP' },\n    { key: 'python', label: 'Python' },\n    { key: 'ruby', label: 'Ruby' },\n    { key: 'sql', label: 'SQL' },\n  ],\n};\n\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\n","import { BlockEmbed } from '../blots/block';\nimport Link from '../formats/link';\n\nconst ATTRIBUTES = ['height', 'width'];\n\nclass Video extends BlockEmbed {\n  static create(value) {\n    const node = super.create(value);\n    node.setAttribute('frameborder', '0');\n    node.setAttribute('allowfullscreen', true);\n    node.setAttribute('src', this.sanitize(value));\n    return node;\n  }\n\n  static formats(domNode) {\n    return ATTRIBUTES.reduce((formats, attribute) => {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n\n  static sanitize(url) {\n    return Link.sanitize(url); // eslint-disable-line import/no-named-as-default-member\n  }\n\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n\n  html() {\n    const { video } = this.value();\n    return `<a href=\"${video}\">${video}</a>`;\n  }\n}\nVideo.blotName = 'video';\nVideo.className = 'ql-video';\nVideo.tagName = 'IFRAME';\n\nexport default Video;\n","import { EmbedBlot } from 'parchment';\nimport { sanitize } from '../formats/link';\n\nconst ATTRIBUTES = ['alt', 'height', 'width'];\n\nclass Image extends EmbedBlot {\n  static create(value) {\n    const node = super.create(value);\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n    return node;\n  }\n\n  static formats(domNode) {\n    return ATTRIBUTES.reduce((formats, attribute) => {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n\n  static match(url) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n\n  static register() {\n    if (/Firefox/i.test(navigator.userAgent)) {\n      setTimeout(() => {\n        // Disable image resizing in Firefox\n        document.execCommand('enableObjectResizing', false, false);\n      }, 1);\n    }\n  }\n\n  static sanitize(url) {\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nImage.blotName = 'image';\nImage.tagName = 'IMG';\n\nexport default Image;\n","import Embed from '../blots/embed';\n\nclass Formula extends Embed {\n  static create(value) {\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    const node = super.create(value);\n    if (typeof value === 'string') {\n      window.katex.render(value, node, {\n        throwOnError: false,\n        errorColor: '#f00',\n      });\n      node.setAttribute('data-value', value);\n    }\n    return node;\n  }\n\n  static value(domNode) {\n    return domNode.getAttribute('data-value');\n  }\n\n  html() {\n    const { formula } = this.value();\n    return `<span>${formula}</span>`;\n  }\n}\nFormula.blotName = 'formula';\nFormula.className = 'ql-formula';\nFormula.tagName = 'SPAN';\n\nexport default Formula;\n","import Inline from '../blots/inline';\n\nclass Underline extends Inline {}\nUnderline.blotName = 'underline';\nUnderline.tagName = 'U';\n\nexport default Underline;\n","import Inline from '../blots/inline';\n\nclass Strike extends Inline {}\nStrike.blotName = 'strike';\nStrike.tagName = 'S';\n\nexport default Strike;\n","import Inline from '../blots/inline';\n\nclass Script extends Inline {\n  static create(value) {\n    if (value === 'super') {\n      return document.createElement('sup');\n    } else if (value === 'sub') {\n      return document.createElement('sub');\n    }\n    return super.create(value);\n  }\n\n  static formats(domNode) {\n    if (domNode.tagName === 'SUB') return 'sub';\n    if (domNode.tagName === 'SUP') return 'super';\n    return undefined;\n  }\n}\nScript.blotName = 'script';\nScript.tagName = ['SUB', 'SUP'];\n\nexport default Script;\n","import Bold from './bold';\n\nclass Italic extends Bold {}\nItalic.blotName = 'italic';\nItalic.tagName = ['EM', 'I'];\n\nexport default Italic;\n","import Block from '../blots/block';\nimport Container from '../blots/container';\nimport Quill from '../core/quill';\n\nclass ListContainer extends Container {}\nListContainer.blotName = 'list-container';\nListContainer.tagName = 'OL';\n\nclass ListItem extends Block {\n  static create(value) {\n    const node = super.create();\n    node.setAttribute('data-list', value);\n    return node;\n  }\n\n  static formats(domNode) {\n    return domNode.getAttribute('data-list') || undefined;\n  }\n\n  static register() {\n    Quill.register(ListContainer);\n  }\n\n  constructor(scroll, domNode) {\n    super(scroll, domNode);\n    const listEventHandler = e => {\n      if (e.target !== domNode) return;\n      const format = this.statics.formats(domNode, scroll);\n      if (format === 'checked') {\n        this.format('list', 'unchecked');\n      } else if (format === 'unchecked') {\n        this.format('list', 'checked');\n      }\n    };\n    domNode.addEventListener('touchstart', listEventHandler);\n    domNode.addEventListener('mousedown', listEventHandler);\n  }\n\n  format(name, value) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-list', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nListItem.blotName = 'list';\nListItem.tagName = 'LI';\n\nListContainer.allowedChildren = [ListItem];\nListItem.requiredContainer = ListContainer;\n\nexport { ListContainer, ListItem as default };\n","import Block from '../blots/block';\n\nclass Header extends Block {\n  static formats(domNode) {\n    return this.tagName.indexOf(domNode.tagName) + 1;\n  }\n}\nHeader.blotName = 'header';\nHeader.tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\nexport default Header;\n","import Block from '../blots/block';\n\nclass Blockquote extends Block {}\nBlockquote.blotName = 'blockquote';\nBlockquote.tagName = 'blockquote';\n\nexport default Blockquote;\n","import { ClassAttributor, Scope } from 'parchment';\n\nclass IndentAttributor extends ClassAttributor {\n  add(node, value) {\n    if (value === '+1' || value === '-1') {\n      const indent = this.value(node) || 0;\n      value = value === '+1' ? indent + 1 : indent - 1;\n    }\n    if (value === 0) {\n      this.remove(node);\n      return true;\n    }\n    return super.add(node, value);\n  }\n\n  canAdd(node, value) {\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\n  }\n\n  value(node) {\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\n  }\n}\n\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\n  scope: Scope.BLOCK,\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8],\n});\n\nexport default IndentClass;\n","import Delta from 'quill-delta';\nimport Emitter from '../core/emitter';\nimport Module from '../core/module';\n\nclass Uploader extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    quill.root.addEventListener('drop', e => {\n      e.preventDefault();\n      let native;\n      if (document.caretRangeFromPoint) {\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\n      } else if (document.caretPositionFromPoint) {\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\n        native = document.createRange();\n        native.setStart(position.offsetNode, position.offset);\n        native.setEnd(position.offsetNode, position.offset);\n      } else {\n        return;\n      }\n      const normalized = quill.selection.normalizeNative(native);\n      const range = quill.selection.normalizedToRange(normalized);\n      this.upload(range, e.dataTransfer.files);\n    });\n  }\n\n  upload(range, files) {\n    const uploads = [];\n    Array.from(files).forEach(file => {\n      if (file && this.options.mimetypes.includes(file.type)) {\n        uploads.push(file);\n      }\n    });\n    if (uploads.length > 0) {\n      this.options.handler.call(this, range, uploads);\n    }\n  }\n}\n\nUploader.DEFAULTS = {\n  mimetypes: ['image/png', 'image/jpeg'],\n  handler(range, files) {\n    const promises = files.map(file => {\n      return new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onload = e => {\n          resolve(e.target.result);\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    Promise.all(promises).then(images => {\n      const update = images.reduce((delta, image) => {\n        return delta.insert({ image });\n      }, new Delta().retain(range.index).delete(range.length));\n      this.quill.updateContents(update, Emitter.sources.USER);\n      this.quill.setSelection(\n        range.index + images.length,\n        Emitter.sources.SILENT,\n      );\n    });\n  },\n};\n\nexport default Uploader;\n","import clone from 'clone';\nimport equal from 'deep-equal';\nimport extend from 'extend';\nimport Delta from 'quill-delta';\nimport DeltaOp from 'quill-delta/lib/op';\nimport { EmbedBlot, Scope, TextBlot } from 'parchment';\nimport Quill from '../core/quill';\nimport logger from '../core/logger';\nimport Module from '../core/module';\n\nconst debug = logger('quill:keyboard');\n\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\n\nclass Keyboard extends Module {\n  static match(evt, binding) {\n    if (\n      ['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(key => {\n        return !!binding[key] !== evt[key] && binding[key] !== null;\n      })\n    ) {\n      return false;\n    }\n    return binding.key === evt.key || binding.key === evt.which;\n  }\n\n  constructor(quill, options) {\n    super(quill, options);\n    this.bindings = {};\n    Object.keys(this.options.bindings).forEach(name => {\n      if (this.options.bindings[name]) {\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({ key: 'Enter', shiftKey: null }, handleEnter);\n    this.addBinding(\n      { key: 'Enter', metaKey: null, ctrlKey: null, altKey: null },\n      () => {},\n    );\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding(\n        { key: 'Backspace' },\n        { collapsed: true },\n        handleBackspace,\n      );\n      this.addBinding({ key: 'Delete' }, { collapsed: true }, handleDelete);\n    } else {\n      this.addBinding(\n        { key: 'Backspace' },\n        { collapsed: true, prefix: /^.?$/ },\n        handleBackspace,\n      );\n      this.addBinding(\n        { key: 'Delete' },\n        { collapsed: true, suffix: /^.?$/ },\n        handleDelete,\n      );\n    }\n    this.addBinding(\n      { key: 'Backspace' },\n      { collapsed: false },\n      handleDeleteRange,\n    );\n    this.addBinding({ key: 'Delete' }, { collapsed: false }, handleDeleteRange);\n    this.addBinding(\n      {\n        key: 'Backspace',\n        altKey: null,\n        ctrlKey: null,\n        metaKey: null,\n        shiftKey: null,\n      },\n      { collapsed: true, offset: 0 },\n      handleBackspace,\n    );\n    this.listen();\n  }\n\n  addBinding(keyBinding, context = {}, handler = {}) {\n    const binding = normalize(keyBinding);\n    if (binding == null) {\n      debug.warn('Attempted to add invalid keyboard binding', binding);\n      return;\n    }\n    if (typeof context === 'function') {\n      context = { handler: context };\n    }\n    if (typeof handler === 'function') {\n      handler = { handler };\n    }\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\n    keys.forEach(key => {\n      const singleBinding = extend({}, binding, { key }, context, handler);\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\n      this.bindings[singleBinding.key].push(singleBinding);\n    });\n  }\n\n  listen() {\n    this.quill.root.addEventListener('keydown', evt => {\n      if (evt.defaultPrevented) return;\n      const bindings = (this.bindings[evt.key] || []).concat(\n        this.bindings[evt.which] || [],\n      );\n      const matches = bindings.filter(binding => Keyboard.match(evt, binding));\n      if (matches.length === 0) return;\n      const range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      const [line, offset] = this.quill.getLine(range.index);\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      const [leafEnd, offsetEnd] =\n        range.length === 0\n          ? [leafStart, offsetStart]\n          : this.quill.getLeaf(range.index + range.length);\n      const prefixText =\n        leafStart instanceof TextBlot\n          ? leafStart.value().slice(0, offsetStart)\n          : '';\n      const suffixText =\n        leafEnd instanceof TextBlot ? leafEnd.value().slice(offsetEnd) : '';\n      const curContext = {\n        collapsed: range.length === 0,\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        line,\n        offset,\n        prefix: prefixText,\n        suffix: suffixText,\n        event: evt,\n      };\n      const prevented = matches.some(binding => {\n        if (\n          binding.collapsed != null &&\n          binding.collapsed !== curContext.collapsed\n        ) {\n          return false;\n        }\n        if (binding.empty != null && binding.empty !== curContext.empty) {\n          return false;\n        }\n        if (binding.offset != null && binding.offset !== curContext.offset) {\n          return false;\n        }\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every(name => curContext.format[name] == null)) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (\n            !Object.keys(binding.format).every(name => {\n              if (binding.format[name] === true)\n                return curContext.format[name] != null;\n              if (binding.format[name] === false)\n                return curContext.format[name] == null;\n              return equal(binding.format[name], curContext.format[name]);\n            })\n          ) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\n          return false;\n        }\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\n          return false;\n        }\n        return binding.handler.call(this, range, curContext, binding) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n}\n\nKeyboard.DEFAULTS = {\n  bindings: {\n    bold: makeFormatHandler('bold'),\n    italic: makeFormatHandler('italic'),\n    underline: makeFormatHandler('underline'),\n    indent: {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: 'Tab',\n      format: ['blockquote', 'indent', 'list'],\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n        return false;\n      },\n    },\n    outdent: {\n      key: 'Tab',\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n        return false;\n      },\n    },\n    'outdent backspace': {\n      key: 'Backspace',\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      },\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: 'Tab',\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      },\n    },\n    tab: {\n      key: 'Tab',\n      handler(range, context) {\n        if (context.format.table) return true;\n        this.quill.history.cutoff();\n        const delta = new Delta()\n          .retain(range.index)\n          .delete(range.length)\n          .insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        return false;\n      },\n    },\n    'blockquote empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['blockquote'],\n      empty: true,\n      handler() {\n        this.quill.format('blockquote', false, Quill.sources.USER);\n      },\n    },\n    'list empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler(range, context) {\n        this.quill.format('list', false, Quill.sources.USER);\n        if (context.format.indent) {\n          this.quill.format('indent', false, Quill.sources.USER);\n        }\n      },\n    },\n    'checklist enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: { list: 'checked' },\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const formats = extend({}, line.formats(), { list: 'checked' });\n        const delta = new Delta()\n          .retain(range.index)\n          .insert('\\n', formats)\n          .retain(line.length() - offset - 1)\n          .retain(1, { list: 'unchecked' });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollIntoView();\n      },\n    },\n    'header enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler(range, context) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta()\n          .retain(range.index)\n          .insert('\\n', context.format)\n          .retain(line.length() - offset - 1)\n          .retain(1, { header: null });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollIntoView();\n      },\n    },\n    'table backspace': {\n      key: 'Backspace',\n      format: ['table'],\n      collapsed: true,\n      offset: 0,\n      handler() {},\n    },\n    'table delete': {\n      key: 'Delete',\n      format: ['table'],\n      collapsed: true,\n      suffix: /^$/,\n      handler() {},\n    },\n    'table enter': {\n      key: 'Enter',\n      shiftKey: null,\n      format: ['table'],\n      handler(range) {\n        const module = this.quill.getModule('table');\n        if (module) {\n          const [table, row, cell, offset] = module.getTable(range);\n          const shift = tableSide(table, row, cell, offset);\n          if (shift == null) return;\n          let index = table.offset();\n          if (shift < 0) {\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(\n              range.index + 1,\n              range.length,\n              Quill.sources.SILENT,\n            );\n          } else if (shift > 0) {\n            index += table.length();\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(index, Quill.sources.USER);\n          }\n        }\n      },\n    },\n    'table tab': {\n      key: 'Tab',\n      shiftKey: null,\n      format: ['table'],\n      handler(range, context) {\n        const { event, line: cell } = context;\n        const offset = cell.offset(this.quill.scroll);\n        if (event.shiftKey) {\n          this.quill.setSelection(offset - 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(offset + cell.length(), Quill.sources.USER);\n        }\n      },\n    },\n    'list autofill': {\n      key: ' ',\n      collapsed: true,\n      format: {\n        list: false,\n        'code-block': false,\n        blockquote: false,\n        header: false,\n        table: false,\n      },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler(range, context) {\n        if (this.quill.scroll.query('list') == null) return true;\n        const { length } = context.prefix;\n        const [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]':\n          case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':\n          case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        const delta = new Delta()\n          .retain(range.index - offset)\n          .delete(length + 1)\n          .retain(line.length() - 2 - offset)\n          .retain(1, { list: value });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n        return false;\n      },\n    },\n    'code exit': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /^$/,\n      suffix: /^\\s*$/,\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        let numLines = 2;\n        let cur = line;\n        while (\n          cur != null &&\n          cur.length() <= 1 &&\n          cur.formats()['code-block']\n        ) {\n          cur = cur.prev;\n          numLines -= 1;\n          // Requisite prev lines are empty\n          if (numLines <= 0) {\n            const delta = new Delta()\n              .retain(range.index + line.length() - offset - 2)\n              .retain(1, { 'code-block': null })\n              .delete(1);\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index - 1, Quill.sources.SILENT);\n            return false;\n          }\n        }\n        return true;\n      },\n    },\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\n    'table down': makeTableArrowHandler(false),\n    'table up': makeTableArrowHandler(true),\n  },\n};\n\nfunction handleBackspace(range, context) {\n  if (range.index === 0 || this.quill.getLength() <= 1) return;\n  const [line] = this.quill.getLine(range.index);\n  let formats = {};\n  if (context.offset === 0) {\n    const [prev] = this.quill.getLine(range.index - 1);\n    if (prev != null) {\n      if (prev.length() > 1 || prev.statics.blotName === 'table') {\n        const curFormats = line.formats();\n        const prevFormats = this.quill.getFormat(range.index - 1, 1);\n        formats = DeltaOp.attributes.diff(curFormats, prevFormats) || {};\n      }\n    }\n  }\n  // Check for astral symbols\n  const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n  this.quill.deleteText(range.index - length, length, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(\n      range.index - length,\n      length,\n      formats,\n      Quill.sources.USER,\n    );\n  }\n  this.quill.focus();\n}\n\nfunction handleDelete(range, context) {\n  // Check for astral symbols\n  const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n  if (range.index >= this.quill.getLength() - length) return;\n  let formats = {};\n  let nextLength = 0;\n  const [line] = this.quill.getLine(range.index);\n  if (context.offset >= line.length() - 1) {\n    const [next] = this.quill.getLine(range.index + 1);\n    if (next) {\n      const curFormats = line.formats();\n      const nextFormats = this.quill.getFormat(range.index, 1);\n      formats = DeltaOp.attributes.diff(curFormats, nextFormats) || {};\n      nextLength = next.length();\n    }\n  }\n  this.quill.deleteText(range.index, length, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(\n      range.index + nextLength - 1,\n      length,\n      formats,\n      Quill.sources.USER,\n    );\n  }\n}\n\nfunction handleDeleteRange(range) {\n  const lines = this.quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    const firstFormats = lines[0].formats();\n    const lastFormats = lines[lines.length - 1].formats();\n    formats = DeltaOp.attributes.diff(lastFormats, firstFormats) || {};\n  }\n  this.quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    this.quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  this.quill.setSelection(range.index, Quill.sources.SILENT);\n  this.quill.focus();\n}\n\n// TODO use just updateContents()\nfunction handleEnter(range, context) {\n  if (range.length > 0) {\n    this.quill.scroll.deleteAt(range.index, range.length); // So we do not trigger text-change\n  }\n  const lineFormats = Object.keys(context.format).reduce((formats, format) => {\n    if (\n      this.quill.scroll.query(format, Scope.BLOCK) &&\n      !Array.isArray(context.format[format])\n    ) {\n      formats[format] = context.format[format];\n    }\n    return formats;\n  }, {});\n  this.quill.insertText(range.index, '\\n', lineFormats, Quill.sources.USER);\n  // Earlier scroll.deleteAt might have messed up our selection,\n  // so insertText's built in selection preservation is not reliable\n  this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n  this.quill.focus();\n  Object.keys(context.format).forEach(name => {\n    if (lineFormats[name] != null) return;\n    if (Array.isArray(context.format[name])) return;\n    if (name === 'link') return;\n    this.quill.format(name, context.format[name], Quill.sources.USER);\n  });\n}\n\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: 'Tab',\n    shiftKey: !indent,\n    format: { 'code-block': true },\n    handler(range) {\n      const CodeBlock = this.quill.scroll.query('code-block');\n      const lines =\n        range.length === 0\n          ? this.quill.getLines(range.index, 1)\n          : this.quill.getLines(range);\n      let { index, length } = range;\n      lines.forEach((line, i) => {\n        if (indent) {\n          line.insertAt(0, CodeBlock.TAB);\n          if (i === 0) {\n            index += CodeBlock.TAB.length;\n          } else {\n            length += CodeBlock.TAB.length;\n          }\n        } else if (line.domNode.textContent.startsWith(CodeBlock.TAB)) {\n          line.deleteAt(0, CodeBlock.TAB.length);\n          if (i === 0) {\n            index -= CodeBlock.TAB.length;\n          } else {\n            length -= CodeBlock.TAB.length;\n          }\n        }\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    },\n  };\n}\n\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler(range) {\n      let { index } = range;\n      if (key === 'ArrowRight') {\n        index += range.length + 1;\n      }\n      const [leaf] = this.quill.getLeaf(index);\n      if (!(leaf instanceof EmbedBlot)) return true;\n      if (key === 'ArrowLeft') {\n        if (shiftKey) {\n          this.quill.setSelection(\n            range.index - 1,\n            range.length + 1,\n            Quill.sources.USER,\n          );\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else if (shiftKey) {\n        this.quill.setSelection(\n          range.index,\n          range.length + 1,\n          Quill.sources.USER,\n        );\n      } else {\n        this.quill.setSelection(\n          range.index + range.length + 1,\n          Quill.sources.USER,\n        );\n      }\n      return false;\n    },\n  };\n}\n\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0],\n    shortKey: true,\n    handler(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    },\n  };\n}\n\nfunction makeTableArrowHandler(up) {\n  return {\n    key: up ? 'ArrowUp' : 'ArrowDown',\n    collapsed: true,\n    format: ['table'],\n    handler(range, context) {\n      // TODO move to table module\n      const key = up ? 'prev' : 'next';\n      const cell = context.line;\n      const targetRow = cell.parent[key];\n      if (targetRow != null) {\n        if (targetRow.statics.blotName === 'table-row') {\n          let targetCell = targetRow.children.head;\n          let cur = cell;\n          while (cur.prev != null) {\n            cur = cur.prev;\n            targetCell = targetCell.next;\n          }\n          const index =\n            targetCell.offset(this.quill.scroll) +\n            Math.min(context.offset, targetCell.length() - 1);\n          this.quill.setSelection(index, 0, Quill.sources.USER);\n        }\n      } else {\n        const targetLine = cell.table()[key];\n        if (targetLine != null) {\n          if (up) {\n            this.quill.setSelection(\n              targetLine.offset(this.quill.scroll) + targetLine.length() - 1,\n              0,\n              Quill.sources.USER,\n            );\n          } else {\n            this.quill.setSelection(\n              targetLine.offset(this.quill.scroll),\n              0,\n              Quill.sources.USER,\n            );\n          }\n        }\n      }\n      return false;\n    },\n  };\n}\n\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    binding = { key: binding };\n  } else if (typeof binding === 'object') {\n    binding = clone(binding, false);\n  } else {\n    return null;\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\nfunction tableSide(table, row, cell, offset) {\n  if (row.prev == null && row.next == null) {\n    if (cell.prev == null && cell.next == null) {\n      return offset === 0 ? -1 : 1;\n    }\n    return cell.prev == null ? -1 : 1;\n  } else if (row.prev == null) {\n    return -1;\n  } else if (row.next == null) {\n    return 1;\n  }\n  return null;\n}\n\nexport { Keyboard as default, SHORTKEY, normalize };\n","import { Scope } from 'parchment';\nimport Quill from '../core/quill';\nimport Module from '../core/module';\n\nclass History extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    this.lastRecorded = 0;\n    this.ignoreChange = false;\n    this.clear();\n    this.quill.on(\n      Quill.events.EDITOR_CHANGE,\n      (eventName, delta, oldDelta, source) => {\n        if (eventName !== Quill.events.TEXT_CHANGE || this.ignoreChange) return;\n        if (!this.options.userOnly || source === Quill.sources.USER) {\n          this.record(delta, oldDelta);\n        } else {\n          this.transform(delta);\n        }\n      },\n    );\n    this.quill.keyboard.addBinding(\n      { key: 'z', shortKey: true },\n      this.undo.bind(this),\n    );\n    this.quill.keyboard.addBinding(\n      { key: 'z', shortKey: true, shiftKey: true },\n      this.redo.bind(this),\n    );\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding(\n        { key: 'y', shortKey: true },\n        this.redo.bind(this),\n      );\n    }\n  }\n\n  change(source, dest) {\n    if (this.stack[source].length === 0) return;\n    const delta = this.stack[source].pop();\n    this.stack[dest].push(delta);\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(delta[source], Quill.sources.USER);\n    this.ignoreChange = false;\n    const index = getLastChangeIndex(this.quill.scroll, delta[source]);\n    this.quill.setSelection(index);\n  }\n\n  clear() {\n    this.stack = { undo: [], redo: [] };\n  }\n\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n\n  record(changeDelta, oldDelta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = this.quill.getContents().diff(oldDelta);\n    const timestamp = Date.now();\n    if (\n      this.lastRecorded + this.options.delay > timestamp &&\n      this.stack.undo.length > 0\n    ) {\n      const delta = this.stack.undo.pop();\n      undoDelta = undoDelta.compose(delta.undo);\n      changeDelta = delta.redo.compose(changeDelta);\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    this.stack.undo.push({\n      redo: changeDelta,\n      undo: undoDelta,\n    });\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n\n  redo() {\n    this.change('redo', 'undo');\n  }\n\n  transform(delta) {\n    this.stack.undo.forEach(change => {\n      change.undo = delta.transform(change.undo, true);\n      change.redo = delta.transform(change.redo, true);\n    });\n    this.stack.redo.forEach(change => {\n      change.undo = delta.transform(change.undo, true);\n      change.redo = delta.transform(change.redo, true);\n    });\n  }\n\n  undo() {\n    this.change('undo', 'redo');\n  }\n}\nHistory.DEFAULTS = {\n  delay: 1000,\n  maxStack: 100,\n  userOnly: false,\n};\n\nfunction endsWithNewlineChange(scroll, delta) {\n  const lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(attr => {\n      return scroll.query(attr, Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\n\nfunction getLastChangeIndex(scroll, delta) {\n  const deleteLength = delta.reduce((length, op) => {\n    return length + (op.delete || 0);\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(scroll, delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\n\nexport { History as default, getLastChangeIndex };\n","import { Scope, ScrollBlot, ContainerBlot } from 'parchment';\nimport Emitter from '../core/emitter';\nimport Block, { BlockEmbed } from './block';\nimport Break from './break';\nimport Container from './container';\n\nfunction isLine(blot) {\n  return blot instanceof Block || blot instanceof BlockEmbed;\n}\n\nclass Scroll extends ScrollBlot {\n  constructor(registry, domNode, { emitter }) {\n    super(registry, domNode);\n    this.emitter = emitter;\n    // Some reason fixes composition issues with character languages in Windows/Chrome, Safari\n    this.domNode.addEventListener('DOMNodeInserted', () => {});\n    this.optimize();\n    this.enable();\n  }\n\n  batchStart() {\n    this.batch = true;\n  }\n\n  batchEnd() {\n    this.batch = false;\n    this.optimize();\n  }\n\n  emitMount(blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT, blot);\n  }\n\n  emitUnmount(blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT, blot);\n  }\n\n  deleteAt(index, length) {\n    const [first, offset] = this.line(index);\n    const [last] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      const ref =\n        last.children.head instanceof Break ? null : last.children.head;\n      first.moveChildren(last, ref);\n      first.remove();\n    }\n    this.optimize();\n  }\n\n  enable(enabled = true) {\n    this.domNode.setAttribute('contenteditable', enabled);\n  }\n\n  formatAt(index, length, format, value) {\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n\n  insertAt(index, value, def) {\n    if (index >= this.length()) {\n      if (def == null || this.scroll.query(value, Scope.BLOCK) == null) {\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          blot.insertAt(0, value.slice(0, -1), def);\n        } else {\n          blot.insertAt(0, value, def);\n        }\n      } else {\n        const embed = this.scroll.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n\n  insertBefore(blot, ref) {\n    if (blot.statics.scope === Scope.INLINE_BLOT) {\n      const wrapper = this.scroll.create(this.statics.defaultChild.blotName);\n      wrapper.appendChild(blot);\n      super.insertBefore(wrapper, ref);\n    } else {\n      super.insertBefore(blot, ref);\n    }\n  }\n\n  leaf(index) {\n    return this.path(index).pop() || [null, -1];\n  }\n\n  line(index) {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    return this.descendant(isLine, index);\n  }\n\n  lines(index = 0, length = Number.MAX_VALUE) {\n    const getLines = (blot, blotIndex, blotLength) => {\n      let lines = [];\n      let lengthLeft = blotLength;\n      blot.children.forEachAt(\n        blotIndex,\n        blotLength,\n        (child, childIndex, childLength) => {\n          if (isLine(child)) {\n            lines.push(child);\n          } else if (child instanceof ContainerBlot) {\n            lines = lines.concat(getLines(child, childIndex, lengthLeft));\n          }\n          lengthLeft -= childLength;\n        },\n      );\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n\n  optimize(mutations = [], context = {}) {\n    if (this.batch === true) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n\n  path(index) {\n    return super.path(index).slice(1); // Exclude self\n  }\n\n  remove() {\n    // Never remove self\n  }\n\n  update(mutations) {\n    if (this.batch === true) return;\n    let source = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([])); // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n}\nScroll.blotName = 'scroll';\nScroll.className = 'ql-editor';\nScroll.tagName = 'DIV';\nScroll.defaultChild = Block;\nScroll.allowedChildren = [Block, BlockEmbed, Container];\n\nexport default Scroll;\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import clone from 'clone';\nimport equal from 'deep-equal';\nimport extend from 'extend';\nimport Delta from 'quill-delta';\nimport DeltaOp from 'quill-delta/lib/op';\nimport { LeafBlot } from 'parchment';\nimport CursorBlot from '../blots/cursor';\nimport Block, { bubbleFormats } from '../blots/block';\nimport Break from '../blots/break';\nimport TextBlot from '../blots/text';\n\nconst ASCII = /^[ -~]*$/;\n\nclass Editor {\n  constructor(scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n\n  applyDelta(delta) {\n    let consumeNextNewline = false;\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    const normalizedDelta = normalizeDelta(delta);\n    normalizedDelta.reduce((index, op) => {\n      const length = op.retain || op.delete || op.insert.length || 1;\n      let attributes = op.attributes || {};\n      if (op.insert != null) {\n        if (typeof op.insert === 'string') {\n          let text = op.insert;\n          if (text.endsWith('\\n') && consumeNextNewline) {\n            consumeNextNewline = false;\n            text = text.slice(0, -1);\n          }\n          if (index >= scrollLength && !text.endsWith('\\n')) {\n            consumeNextNewline = true;\n          }\n          this.scroll.insertAt(index, text);\n          const [line, offset] = this.scroll.line(index);\n          let formats = extend({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            const [leaf] = line.descendant(LeafBlot, offset);\n            formats = extend(formats, bubbleFormats(leaf));\n          }\n          attributes = DeltaOp.attributes.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          const key = Object.keys(op.insert)[0]; // There should only be one key\n          if (key == null) return index;\n          this.scroll.insertAt(index, key, op.insert[key]);\n        }\n        scrollLength += length;\n      }\n      Object.keys(attributes).forEach(name => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      return index + length;\n    }, 0);\n    normalizedDelta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + (op.retain || op.insert.length || 1);\n    }, 0);\n    this.scroll.batchEnd();\n    this.scroll.optimize();\n    return this.update(normalizedDelta);\n  }\n\n  deleteText(index, length) {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n\n  formatLine(index, length, formats = {}) {\n    this.scroll.update();\n    Object.keys(formats).forEach(format => {\n      this.scroll.lines(index, Math.max(length, 1)).forEach(line => {\n        line.format(format, formats[format]);\n      });\n    });\n    this.scroll.optimize();\n    const delta = new Delta().retain(index).retain(length, clone(formats));\n    return this.update(delta);\n  }\n\n  formatText(index, length, formats = {}) {\n    Object.keys(formats).forEach(format => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    const delta = new Delta().retain(index).retain(length, clone(formats));\n    return this.update(delta);\n  }\n\n  getContents(index, length) {\n    return this.delta.slice(index, index + length);\n  }\n\n  getDelta() {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n\n  getFormat(index, length = 0) {\n    let lines = [];\n    let leaves = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach(path => {\n        const [blot] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof LeafBlot) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(LeafBlot, index, length);\n    }\n    const formatsArr = [lines, leaves].map(blots => {\n      if (blots.length === 0) return {};\n      let formats = bubbleFormats(blots.shift());\n      while (Object.keys(formats).length > 0) {\n        const blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return extend.apply(extend, formatsArr);\n  }\n\n  getHTML(index, length) {\n    const [line, lineOffset] = this.scroll.line(index);\n    if (line.length() >= lineOffset + length) {\n      return convertHTML(line, lineOffset, length, true);\n    }\n    return convertHTML(this.scroll, index, length, true);\n  }\n\n  getText(index, length) {\n    return this.getContents(index, length)\n      .filter(op => typeof op.insert === 'string')\n      .map(op => op.insert)\n      .join('');\n  }\n\n  insertEmbed(index, embed, value) {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({ [embed]: value }));\n  }\n\n  insertText(index, text, formats = {}) {\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach(format => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(new Delta().retain(index).insert(text, clone(formats)));\n  }\n\n  isBlank() {\n    if (this.scroll.children.length === 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    const block = this.scroll.children.head;\n    if (block.statics.blotName !== Block.blotName) return false;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n\n  removeFormat(index, length) {\n    const text = this.getText(index, length);\n    const [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0;\n    let suffix = new Delta();\n    if (line != null) {\n      suffixLength = line.length() - offset;\n      suffix = line\n        .delta()\n        .slice(offset, offset + suffixLength - 1)\n        .insert('\\n');\n    }\n    const contents = this.getContents(index, length + suffixLength);\n    const diff = contents.diff(new Delta().insert(text).concat(suffix));\n    const delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n\n  update(change, mutations = [], cursorIndex = undefined) {\n    const oldDelta = this.delta;\n    if (\n      mutations.length === 1 &&\n      mutations[0].type === 'characterData' &&\n      mutations[0].target.data.match(ASCII) &&\n      this.scroll.find(mutations[0].target)\n    ) {\n      // Optimization for character changes\n      const textBlot = this.scroll.find(mutations[0].target);\n      const formats = bubbleFormats(textBlot);\n      const index = textBlot.offset(this.scroll);\n      const oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      const oldText = new Delta().insert(oldValue);\n      const newText = new Delta().insert(textBlot.value());\n      const diffDelta = new Delta()\n        .retain(index)\n        .concat(oldText.diff(newText, cursorIndex));\n      change = diffDelta.reduce((delta, op) => {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        }\n        return delta.push(op);\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !equal(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, cursorIndex);\n      }\n    }\n    return change;\n  }\n}\n\nfunction convertListHTML(items, lastIndent, types) {\n  if (items.length === 0) {\n    const [endTag] = getListType(types.pop());\n    if (lastIndent <= 0) {\n      return `</li></${endTag}>`;\n    }\n    return `</li></${endTag}>${convertListHTML([], lastIndent - 1, types)}`;\n  }\n  const [{ child, offset, length, indent, type }, ...rest] = items;\n  const [tag, attribute] = getListType(type);\n  if (indent > lastIndent) {\n    types.push(tag);\n    return `<${tag}><li${attribute}>${convertHTML(\n      child,\n      offset,\n      length,\n    )}${convertListHTML(rest, indent, types)}`;\n  } else if (indent === lastIndent) {\n    return `</li><li${attribute}>${convertHTML(\n      child,\n      offset,\n      length,\n    )}${convertListHTML(rest, indent, types)}`;\n  } else if (indent === lastIndent - 1) {\n    const [endTag] = getListType(types.pop());\n    return `</li></${endTag}></li><li${attribute}>${convertHTML(\n      child,\n      offset,\n      length,\n    )}${convertListHTML(rest, indent, types)}`;\n  }\n  const [endTag] = getListType(types.pop());\n  return `</li></${endTag}>${convertListHTML(items, lastIndent - 1, types)}`;\n}\n\nfunction convertHTML(blot, index, length, isRoot = false) {\n  if (typeof blot.html === 'function') {\n    return blot.html(index, length);\n  } else if (blot instanceof TextBlot) {\n    return blot.value().slice(index, index + length);\n  } else if (blot.children) {\n    // TODO fix API\n    if (blot.statics.blotName === 'list-container') {\n      const items = [];\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\n        const formats = child.formats();\n        items.push({\n          child,\n          offset,\n          length: childLength,\n          indent: formats.indent || 0,\n          type: formats.list,\n        });\n      });\n      return convertListHTML(items, -1, []);\n    }\n    const parts = [];\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\n      parts.push(convertHTML(child, offset, childLength));\n    });\n    if (isRoot || blot.statics.blotName === 'list') {\n      return parts.join('');\n    }\n    const { outerHTML, innerHTML } = blot.domNode;\n    const [start, end] = outerHTML.split(`>${innerHTML}<`);\n    return `${start}>${parts.join('')}<${end}`;\n  }\n  return blot.domNode.outerHTML;\n}\n\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce((merged, name) => {\n    if (formats[name] == null) return merged;\n    if (combined[name] === formats[name]) {\n      merged[name] = combined[name];\n    } else if (Array.isArray(combined[name])) {\n      if (combined[name].indexOf(formats[name]) < 0) {\n        merged[name] = combined[name].concat([formats[name]]);\n      }\n    } else {\n      merged[name] = [combined[name], formats[name]];\n    }\n    return merged;\n  }, {});\n}\n\nfunction getListType(type) {\n  const tag = type === 'ordered' ? 'ol' : 'ul';\n  switch (type) {\n    case 'checked':\n      return [tag, ' data-list=\"checked\"'];\n    case 'unchecked':\n      return [tag, ' data-list=\"unchecked\"'];\n    default:\n      return [tag, ''];\n  }\n}\n\nfunction normalizeDelta(delta) {\n  return delta.reduce((normalizedDelta, op) => {\n    if (typeof op.insert === 'string') {\n      const text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return normalizedDelta.insert(text, op.attributes);\n    }\n    return normalizedDelta.push(op);\n  }, new Delta());\n}\n\nexport default Editor;\n","var supportsArgumentsClass = (function(){\n  return Object.prototype.toString.call(arguments)\n})() == '[object Arguments]';\n\nexports = module.exports = supportsArgumentsClass ? supported : unsupported;\n\nexports.supported = supported;\nfunction supported(object) {\n  return Object.prototype.toString.call(object) == '[object Arguments]';\n};\n\nexports.unsupported = unsupported;\nfunction unsupported(object){\n  return object &&\n    typeof object == 'object' &&\n    typeof object.length == 'number' &&\n    Object.prototype.hasOwnProperty.call(object, 'callee') &&\n    !Object.prototype.propertyIsEnumerable.call(object, 'callee') ||\n    false;\n};\n","exports = module.exports = typeof Object.keys === 'function'\n  ? Object.keys : shim;\n\nexports.shim = shim;\nfunction shim (obj) {\n  var keys = [];\n  for (var key in obj) keys.push(key);\n  return keys;\n}\n","/**\n * This library modifies the diff-patch-match library by Neil Fraser\n * by removing the patch and match functionality and certain advanced\n * options in the diff function. The original license is as follows:\n *\n * ===\n *\n * Diff Match and Patch\n *\n * Copyright 2006 Google Inc.\n * http://code.google.com/p/google-diff-match-patch/\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n\n/**\n * The data structure representing a diff is an array of tuples:\n * [[DIFF_DELETE, 'Hello'], [DIFF_INSERT, 'Goodbye'], [DIFF_EQUAL, ' world.']]\n * which means: delete 'Hello', add 'Goodbye' and keep ' world.'\n */\nvar DIFF_DELETE = -1;\nvar DIFF_INSERT = 1;\nvar DIFF_EQUAL = 0;\n\n\n/**\n * Find the differences between two texts.  Simplifies the problem by stripping\n * any common prefix or suffix off the texts before diffing.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {Int} cursor_pos Expected edit position in text1 (optional)\n * @return {Array} Array of diff tuples.\n */\nfunction diff_main(text1, text2, cursor_pos) {\n  // Check for equality (speedup).\n  if (text1 == text2) {\n    if (text1) {\n      return [[DIFF_EQUAL, text1]];\n    }\n    return [];\n  }\n\n  // Check cursor_pos within bounds\n  if (cursor_pos < 0 || text1.length < cursor_pos) {\n    cursor_pos = null;\n  }\n\n  // Trim off common prefix (speedup).\n  var commonlength = diff_commonPrefix(text1, text2);\n  var commonprefix = text1.substring(0, commonlength);\n  text1 = text1.substring(commonlength);\n  text2 = text2.substring(commonlength);\n\n  // Trim off common suffix (speedup).\n  commonlength = diff_commonSuffix(text1, text2);\n  var commonsuffix = text1.substring(text1.length - commonlength);\n  text1 = text1.substring(0, text1.length - commonlength);\n  text2 = text2.substring(0, text2.length - commonlength);\n\n  // Compute the diff on the middle block.\n  var diffs = diff_compute_(text1, text2);\n\n  // Restore the prefix and suffix.\n  if (commonprefix) {\n    diffs.unshift([DIFF_EQUAL, commonprefix]);\n  }\n  if (commonsuffix) {\n    diffs.push([DIFF_EQUAL, commonsuffix]);\n  }\n  diff_cleanupMerge(diffs);\n  if (cursor_pos != null) {\n    diffs = fix_cursor(diffs, cursor_pos);\n  }\n  diffs = fix_emoji(diffs);\n  return diffs;\n};\n\n\n/**\n * Find the differences between two texts.  Assumes that the texts do not\n * have any common prefix or suffix.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_compute_(text1, text2) {\n  var diffs;\n\n  if (!text1) {\n    // Just add some text (speedup).\n    return [[DIFF_INSERT, text2]];\n  }\n\n  if (!text2) {\n    // Just delete some text (speedup).\n    return [[DIFF_DELETE, text1]];\n  }\n\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  var i = longtext.indexOf(shorttext);\n  if (i != -1) {\n    // Shorter text is inside the longer text (speedup).\n    diffs = [[DIFF_INSERT, longtext.substring(0, i)],\n             [DIFF_EQUAL, shorttext],\n             [DIFF_INSERT, longtext.substring(i + shorttext.length)]];\n    // Swap insertions for deletions if diff is reversed.\n    if (text1.length > text2.length) {\n      diffs[0][0] = diffs[2][0] = DIFF_DELETE;\n    }\n    return diffs;\n  }\n\n  if (shorttext.length == 1) {\n    // Single character string.\n    // After the previous speedup, the character can't be an equality.\n    return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n  }\n\n  // Check to see if the problem can be split in two.\n  var hm = diff_halfMatch_(text1, text2);\n  if (hm) {\n    // A half-match was found, sort out the return data.\n    var text1_a = hm[0];\n    var text1_b = hm[1];\n    var text2_a = hm[2];\n    var text2_b = hm[3];\n    var mid_common = hm[4];\n    // Send both pairs off for separate processing.\n    var diffs_a = diff_main(text1_a, text2_a);\n    var diffs_b = diff_main(text1_b, text2_b);\n    // Merge the results.\n    return diffs_a.concat([[DIFF_EQUAL, mid_common]], diffs_b);\n  }\n\n  return diff_bisect_(text1, text2);\n};\n\n\n/**\n * Find the 'middle snake' of a diff, split the problem in two\n * and return the recursively constructed diff.\n * See Myers 1986 paper: An O(ND) Difference Algorithm and Its Variations.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @return {Array} Array of diff tuples.\n * @private\n */\nfunction diff_bisect_(text1, text2) {\n  // Cache the text lengths to prevent multiple calls.\n  var text1_length = text1.length;\n  var text2_length = text2.length;\n  var max_d = Math.ceil((text1_length + text2_length) / 2);\n  var v_offset = max_d;\n  var v_length = 2 * max_d;\n  var v1 = new Array(v_length);\n  var v2 = new Array(v_length);\n  // Setting all elements to -1 is faster in Chrome & Firefox than mixing\n  // integers and undefined.\n  for (var x = 0; x < v_length; x++) {\n    v1[x] = -1;\n    v2[x] = -1;\n  }\n  v1[v_offset + 1] = 0;\n  v2[v_offset + 1] = 0;\n  var delta = text1_length - text2_length;\n  // If the total number of characters is odd, then the front path will collide\n  // with the reverse path.\n  var front = (delta % 2 != 0);\n  // Offsets for start and end of k loop.\n  // Prevents mapping of space beyond the grid.\n  var k1start = 0;\n  var k1end = 0;\n  var k2start = 0;\n  var k2end = 0;\n  for (var d = 0; d < max_d; d++) {\n    // Walk the front path one step.\n    for (var k1 = -d + k1start; k1 <= d - k1end; k1 += 2) {\n      var k1_offset = v_offset + k1;\n      var x1;\n      if (k1 == -d || (k1 != d && v1[k1_offset - 1] < v1[k1_offset + 1])) {\n        x1 = v1[k1_offset + 1];\n      } else {\n        x1 = v1[k1_offset - 1] + 1;\n      }\n      var y1 = x1 - k1;\n      while (x1 < text1_length && y1 < text2_length &&\n             text1.charAt(x1) == text2.charAt(y1)) {\n        x1++;\n        y1++;\n      }\n      v1[k1_offset] = x1;\n      if (x1 > text1_length) {\n        // Ran off the right of the graph.\n        k1end += 2;\n      } else if (y1 > text2_length) {\n        // Ran off the bottom of the graph.\n        k1start += 2;\n      } else if (front) {\n        var k2_offset = v_offset + delta - k1;\n        if (k2_offset >= 0 && k2_offset < v_length && v2[k2_offset] != -1) {\n          // Mirror x2 onto top-left coordinate system.\n          var x2 = text1_length - v2[k2_offset];\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n\n    // Walk the reverse path one step.\n    for (var k2 = -d + k2start; k2 <= d - k2end; k2 += 2) {\n      var k2_offset = v_offset + k2;\n      var x2;\n      if (k2 == -d || (k2 != d && v2[k2_offset - 1] < v2[k2_offset + 1])) {\n        x2 = v2[k2_offset + 1];\n      } else {\n        x2 = v2[k2_offset - 1] + 1;\n      }\n      var y2 = x2 - k2;\n      while (x2 < text1_length && y2 < text2_length &&\n             text1.charAt(text1_length - x2 - 1) ==\n             text2.charAt(text2_length - y2 - 1)) {\n        x2++;\n        y2++;\n      }\n      v2[k2_offset] = x2;\n      if (x2 > text1_length) {\n        // Ran off the left of the graph.\n        k2end += 2;\n      } else if (y2 > text2_length) {\n        // Ran off the top of the graph.\n        k2start += 2;\n      } else if (!front) {\n        var k1_offset = v_offset + delta - k2;\n        if (k1_offset >= 0 && k1_offset < v_length && v1[k1_offset] != -1) {\n          var x1 = v1[k1_offset];\n          var y1 = v_offset + x1 - k1_offset;\n          // Mirror x2 onto top-left coordinate system.\n          x2 = text1_length - x2;\n          if (x1 >= x2) {\n            // Overlap detected.\n            return diff_bisectSplit_(text1, text2, x1, y1);\n          }\n        }\n      }\n    }\n  }\n  // Diff took too long and hit the deadline or\n  // number of diffs equals number of characters, no commonality at all.\n  return [[DIFF_DELETE, text1], [DIFF_INSERT, text2]];\n};\n\n\n/**\n * Given the location of the 'middle snake', split the diff in two parts\n * and recurse.\n * @param {string} text1 Old string to be diffed.\n * @param {string} text2 New string to be diffed.\n * @param {number} x Index of split point in text1.\n * @param {number} y Index of split point in text2.\n * @return {Array} Array of diff tuples.\n */\nfunction diff_bisectSplit_(text1, text2, x, y) {\n  var text1a = text1.substring(0, x);\n  var text2a = text2.substring(0, y);\n  var text1b = text1.substring(x);\n  var text2b = text2.substring(y);\n\n  // Compute both diffs serially.\n  var diffs = diff_main(text1a, text2a);\n  var diffsb = diff_main(text1b, text2b);\n\n  return diffs.concat(diffsb);\n};\n\n\n/**\n * Determine the common prefix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the start of each\n *     string.\n */\nfunction diff_commonPrefix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 || text1.charAt(0) != text2.charAt(0)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerstart = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(pointerstart, pointermid) ==\n        text2.substring(pointerstart, pointermid)) {\n      pointermin = pointermid;\n      pointerstart = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Determine the common suffix of two strings.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {number} The number of characters common to the end of each string.\n */\nfunction diff_commonSuffix(text1, text2) {\n  // Quick check for common null cases.\n  if (!text1 || !text2 ||\n      text1.charAt(text1.length - 1) != text2.charAt(text2.length - 1)) {\n    return 0;\n  }\n  // Binary search.\n  // Performance analysis: http://neil.fraser.name/news/2007/10/09/\n  var pointermin = 0;\n  var pointermax = Math.min(text1.length, text2.length);\n  var pointermid = pointermax;\n  var pointerend = 0;\n  while (pointermin < pointermid) {\n    if (text1.substring(text1.length - pointermid, text1.length - pointerend) ==\n        text2.substring(text2.length - pointermid, text2.length - pointerend)) {\n      pointermin = pointermid;\n      pointerend = pointermin;\n    } else {\n      pointermax = pointermid;\n    }\n    pointermid = Math.floor((pointermax - pointermin) / 2 + pointermin);\n  }\n  return pointermid;\n};\n\n\n/**\n * Do the two texts share a substring which is at least half the length of the\n * longer text?\n * This speedup can produce non-minimal diffs.\n * @param {string} text1 First string.\n * @param {string} text2 Second string.\n * @return {Array.<string>} Five element Array, containing the prefix of\n *     text1, the suffix of text1, the prefix of text2, the suffix of\n *     text2 and the common middle.  Or null if there was no match.\n */\nfunction diff_halfMatch_(text1, text2) {\n  var longtext = text1.length > text2.length ? text1 : text2;\n  var shorttext = text1.length > text2.length ? text2 : text1;\n  if (longtext.length < 4 || shorttext.length * 2 < longtext.length) {\n    return null;  // Pointless.\n  }\n\n  /**\n   * Does a substring of shorttext exist within longtext such that the substring\n   * is at least half the length of longtext?\n   * Closure, but does not reference any external variables.\n   * @param {string} longtext Longer string.\n   * @param {string} shorttext Shorter string.\n   * @param {number} i Start index of quarter length substring within longtext.\n   * @return {Array.<string>} Five element Array, containing the prefix of\n   *     longtext, the suffix of longtext, the prefix of shorttext, the suffix\n   *     of shorttext and the common middle.  Or null if there was no match.\n   * @private\n   */\n  function diff_halfMatchI_(longtext, shorttext, i) {\n    // Start with a 1/4 length substring at position i as a seed.\n    var seed = longtext.substring(i, i + Math.floor(longtext.length / 4));\n    var j = -1;\n    var best_common = '';\n    var best_longtext_a, best_longtext_b, best_shorttext_a, best_shorttext_b;\n    while ((j = shorttext.indexOf(seed, j + 1)) != -1) {\n      var prefixLength = diff_commonPrefix(longtext.substring(i),\n                                           shorttext.substring(j));\n      var suffixLength = diff_commonSuffix(longtext.substring(0, i),\n                                           shorttext.substring(0, j));\n      if (best_common.length < suffixLength + prefixLength) {\n        best_common = shorttext.substring(j - suffixLength, j) +\n            shorttext.substring(j, j + prefixLength);\n        best_longtext_a = longtext.substring(0, i - suffixLength);\n        best_longtext_b = longtext.substring(i + prefixLength);\n        best_shorttext_a = shorttext.substring(0, j - suffixLength);\n        best_shorttext_b = shorttext.substring(j + prefixLength);\n      }\n    }\n    if (best_common.length * 2 >= longtext.length) {\n      return [best_longtext_a, best_longtext_b,\n              best_shorttext_a, best_shorttext_b, best_common];\n    } else {\n      return null;\n    }\n  }\n\n  // First check if the second quarter is the seed for a half-match.\n  var hm1 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 4));\n  // Check again based on the third quarter.\n  var hm2 = diff_halfMatchI_(longtext, shorttext,\n                             Math.ceil(longtext.length / 2));\n  var hm;\n  if (!hm1 && !hm2) {\n    return null;\n  } else if (!hm2) {\n    hm = hm1;\n  } else if (!hm1) {\n    hm = hm2;\n  } else {\n    // Both matched.  Select the longest.\n    hm = hm1[4].length > hm2[4].length ? hm1 : hm2;\n  }\n\n  // A half-match was found, sort out the return data.\n  var text1_a, text1_b, text2_a, text2_b;\n  if (text1.length > text2.length) {\n    text1_a = hm[0];\n    text1_b = hm[1];\n    text2_a = hm[2];\n    text2_b = hm[3];\n  } else {\n    text2_a = hm[0];\n    text2_b = hm[1];\n    text1_a = hm[2];\n    text1_b = hm[3];\n  }\n  var mid_common = hm[4];\n  return [text1_a, text1_b, text2_a, text2_b, mid_common];\n};\n\n\n/**\n * Reorder and merge like edit sections.  Merge equalities.\n * Any edit section can move as long as it doesn't cross an equality.\n * @param {Array} diffs Array of diff tuples.\n */\nfunction diff_cleanupMerge(diffs) {\n  diffs.push([DIFF_EQUAL, '']);  // Add a dummy entry at the end.\n  var pointer = 0;\n  var count_delete = 0;\n  var count_insert = 0;\n  var text_delete = '';\n  var text_insert = '';\n  var commonlength;\n  while (pointer < diffs.length) {\n    switch (diffs[pointer][0]) {\n      case DIFF_INSERT:\n        count_insert++;\n        text_insert += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_DELETE:\n        count_delete++;\n        text_delete += diffs[pointer][1];\n        pointer++;\n        break;\n      case DIFF_EQUAL:\n        // Upon reaching an equality, check for prior redundancies.\n        if (count_delete + count_insert > 1) {\n          if (count_delete !== 0 && count_insert !== 0) {\n            // Factor out any common prefixies.\n            commonlength = diff_commonPrefix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              if ((pointer - count_delete - count_insert) > 0 &&\n                  diffs[pointer - count_delete - count_insert - 1][0] ==\n                  DIFF_EQUAL) {\n                diffs[pointer - count_delete - count_insert - 1][1] +=\n                    text_insert.substring(0, commonlength);\n              } else {\n                diffs.splice(0, 0, [DIFF_EQUAL,\n                                    text_insert.substring(0, commonlength)]);\n                pointer++;\n              }\n              text_insert = text_insert.substring(commonlength);\n              text_delete = text_delete.substring(commonlength);\n            }\n            // Factor out any common suffixies.\n            commonlength = diff_commonSuffix(text_insert, text_delete);\n            if (commonlength !== 0) {\n              diffs[pointer][1] = text_insert.substring(text_insert.length -\n                  commonlength) + diffs[pointer][1];\n              text_insert = text_insert.substring(0, text_insert.length -\n                  commonlength);\n              text_delete = text_delete.substring(0, text_delete.length -\n                  commonlength);\n            }\n          }\n          // Delete the offending records and add the merged ones.\n          if (count_delete === 0) {\n            diffs.splice(pointer - count_insert,\n                count_delete + count_insert, [DIFF_INSERT, text_insert]);\n          } else if (count_insert === 0) {\n            diffs.splice(pointer - count_delete,\n                count_delete + count_insert, [DIFF_DELETE, text_delete]);\n          } else {\n            diffs.splice(pointer - count_delete - count_insert,\n                count_delete + count_insert, [DIFF_DELETE, text_delete],\n                [DIFF_INSERT, text_insert]);\n          }\n          pointer = pointer - count_delete - count_insert +\n                    (count_delete ? 1 : 0) + (count_insert ? 1 : 0) + 1;\n        } else if (pointer !== 0 && diffs[pointer - 1][0] == DIFF_EQUAL) {\n          // Merge this equality with the previous one.\n          diffs[pointer - 1][1] += diffs[pointer][1];\n          diffs.splice(pointer, 1);\n        } else {\n          pointer++;\n        }\n        count_insert = 0;\n        count_delete = 0;\n        text_delete = '';\n        text_insert = '';\n        break;\n    }\n  }\n  if (diffs[diffs.length - 1][1] === '') {\n    diffs.pop();  // Remove the dummy entry at the end.\n  }\n\n  // Second pass: look for single edits surrounded on both sides by equalities\n  // which can be shifted sideways to eliminate an equality.\n  // e.g: A<ins>BA</ins>C -> <ins>AB</ins>AC\n  var changes = false;\n  pointer = 1;\n  // Intentionally ignore the first and last element (don't need checking).\n  while (pointer < diffs.length - 1) {\n    if (diffs[pointer - 1][0] == DIFF_EQUAL &&\n        diffs[pointer + 1][0] == DIFF_EQUAL) {\n      // This is a single edit surrounded by equalities.\n      if (diffs[pointer][1].substring(diffs[pointer][1].length -\n          diffs[pointer - 1][1].length) == diffs[pointer - 1][1]) {\n        // Shift the edit over the previous equality.\n        diffs[pointer][1] = diffs[pointer - 1][1] +\n            diffs[pointer][1].substring(0, diffs[pointer][1].length -\n                                        diffs[pointer - 1][1].length);\n        diffs[pointer + 1][1] = diffs[pointer - 1][1] + diffs[pointer + 1][1];\n        diffs.splice(pointer - 1, 1);\n        changes = true;\n      } else if (diffs[pointer][1].substring(0, diffs[pointer + 1][1].length) ==\n          diffs[pointer + 1][1]) {\n        // Shift the edit over the next equality.\n        diffs[pointer - 1][1] += diffs[pointer + 1][1];\n        diffs[pointer][1] =\n            diffs[pointer][1].substring(diffs[pointer + 1][1].length) +\n            diffs[pointer + 1][1];\n        diffs.splice(pointer + 1, 1);\n        changes = true;\n      }\n    }\n    pointer++;\n  }\n  // If shifts were made, the diff needs reordering and another shift sweep.\n  if (changes) {\n    diff_cleanupMerge(diffs);\n  }\n};\n\n\nvar diff = diff_main;\ndiff.INSERT = DIFF_INSERT;\ndiff.DELETE = DIFF_DELETE;\ndiff.EQUAL = DIFF_EQUAL;\n\nmodule.exports = diff;\n\n/*\n * Modify a diff such that the cursor position points to the start of a change:\n * E.g.\n *   cursor_normalize_diff([[DIFF_EQUAL, 'abc']], 1)\n *     => [1, [[DIFF_EQUAL, 'a'], [DIFF_EQUAL, 'bc']]]\n *   cursor_normalize_diff([[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xyz']], 2)\n *     => [2, [[DIFF_INSERT, 'new'], [DIFF_DELETE, 'xy'], [DIFF_DELETE, 'z']]]\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} A tuple [cursor location in the modified diff, modified diff]\n */\nfunction cursor_normalize_diff (diffs, cursor_pos) {\n  if (cursor_pos === 0) {\n    return [DIFF_EQUAL, diffs];\n  }\n  for (var current_pos = 0, i = 0; i < diffs.length; i++) {\n    var d = diffs[i];\n    if (d[0] === DIFF_DELETE || d[0] === DIFF_EQUAL) {\n      var next_pos = current_pos + d[1].length;\n      if (cursor_pos === next_pos) {\n        return [i + 1, diffs];\n      } else if (cursor_pos < next_pos) {\n        // copy to prevent side effects\n        diffs = diffs.slice();\n        // split d into two diff changes\n        var split_pos = cursor_pos - current_pos;\n        var d_left = [d[0], d[1].slice(0, split_pos)];\n        var d_right = [d[0], d[1].slice(split_pos)];\n        diffs.splice(i, 1, d_left, d_right);\n        return [i + 1, diffs];\n      } else {\n        current_pos = next_pos;\n      }\n    }\n  }\n  throw new Error('cursor_pos is out of bounds!')\n}\n\n/*\n * Modify a diff such that the edit position is \"shifted\" to the proposed edit location (cursor_position).\n *\n * Case 1)\n *   Check if a naive shift is possible:\n *     [0, X], [ 1, Y] -> [ 1, Y], [0, X]    (if X + Y === Y + X)\n *     [0, X], [-1, Y] -> [-1, Y], [0, X]    (if X + Y === Y + X) - holds same result\n * Case 2)\n *   Check if the following shifts are possible:\n *     [0, 'pre'], [ 1, 'prefix'] -> [ 1, 'pre'], [0, 'pre'], [ 1, 'fix']\n *     [0, 'pre'], [-1, 'prefix'] -> [-1, 'pre'], [0, 'pre'], [-1, 'fix']\n *         ^            ^\n *         d          d_next\n *\n * @param {Array} diffs Array of diff tuples\n * @param {Int} cursor_pos Suggested edit position. Must not be out of bounds!\n * @return {Array} Array of diff tuples\n */\nfunction fix_cursor (diffs, cursor_pos) {\n  var norm = cursor_normalize_diff(diffs, cursor_pos);\n  var ndiffs = norm[1];\n  var cursor_pointer = norm[0];\n  var d = ndiffs[cursor_pointer];\n  var d_next = ndiffs[cursor_pointer + 1];\n\n  if (d == null) {\n    // Text was deleted from end of original string,\n    // cursor is now out of bounds in new string\n    return diffs;\n  } else if (d[0] !== DIFF_EQUAL) {\n    // A modification happened at the cursor location.\n    // This is the expected outcome, so we can return the original diff.\n    return diffs;\n  } else {\n    if (d_next != null && d[1] + d_next[1] === d_next[1] + d[1]) {\n      // Case 1)\n      // It is possible to perform a naive shift\n      ndiffs.splice(cursor_pointer, 2, d_next, d)\n      return merge_tuples(ndiffs, cursor_pointer, 2)\n    } else if (d_next != null && d_next[1].indexOf(d[1]) === 0) {\n      // Case 2)\n      // d[1] is a prefix of d_next[1]\n      // We can assume that d_next[0] !== 0, since d[0] === 0\n      // Shift edit locations..\n      ndiffs.splice(cursor_pointer, 2, [d_next[0], d[1]], [0, d[1]]);\n      var suffix = d_next[1].slice(d[1].length);\n      if (suffix.length > 0) {\n        ndiffs.splice(cursor_pointer + 2, 0, [d_next[0], suffix]);\n      }\n      return merge_tuples(ndiffs, cursor_pointer, 3)\n    } else {\n      // Not possible to perform any modification\n      return diffs;\n    }\n  }\n}\n\n/*\n * Check diff did not split surrogate pairs.\n * Ex. [0, '\\uD83D'], [-1, '\\uDC36'], [1, '\\uDC2F'] -> [-1, '\\uD83D\\uDC36'], [1, '\\uD83D\\uDC2F']\n *     '\\uD83D\\uDC36' === '🐶', '\\uD83D\\uDC2F' === '🐯'\n *\n * @param {Array} diffs Array of diff tuples\n * @return {Array} Array of diff tuples\n */\nfunction fix_emoji (diffs) {\n  var compact = false;\n  var starts_with_pair_end = function(str) {\n    return str.charCodeAt(0) >= 0xDC00 && str.charCodeAt(0) <= 0xDFFF;\n  }\n  var ends_with_pair_start = function(str) {\n    return str.charCodeAt(str.length-1) >= 0xD800 && str.charCodeAt(str.length-1) <= 0xDBFF;\n  }\n  for (var i = 2; i < diffs.length; i += 1) {\n    if (diffs[i-2][0] === DIFF_EQUAL && ends_with_pair_start(diffs[i-2][1]) &&\n        diffs[i-1][0] === DIFF_DELETE && starts_with_pair_end(diffs[i-1][1]) &&\n        diffs[i][0] === DIFF_INSERT && starts_with_pair_end(diffs[i][1])) {\n      compact = true;\n\n      diffs[i-1][1] = diffs[i-2][1].slice(-1) + diffs[i-1][1];\n      diffs[i][1] = diffs[i-2][1].slice(-1) + diffs[i][1];\n\n      diffs[i-2][1] = diffs[i-2][1].slice(0, -1);\n    }\n  }\n  if (!compact) {\n    return diffs;\n  }\n  var fixed_diffs = [];\n  for (var i = 0; i < diffs.length; i += 1) {\n    if (diffs[i][1].length > 0) {\n      fixed_diffs.push(diffs[i]);\n    }\n  }\n  return fixed_diffs;\n}\n\n/*\n * Try to merge tuples with their neigbors in a given range.\n * E.g. [0, 'a'], [0, 'b'] -> [0, 'ab']\n *\n * @param {Array} diffs Array of diff tuples.\n * @param {Int} start Position of the first element to merge (diffs[start] is also merged with diffs[start - 1]).\n * @param {Int} length Number of consecutive elements to check.\n * @return {Array} Array of merged diff tuples.\n */\nfunction merge_tuples (diffs, start, length) {\n  // Check from (start-1) to (start+length).\n  for (var i = start + length - 1; i >= 0 && i >= start - 1; i--) {\n    if (i + 1 < diffs.length) {\n      var left_d = diffs[i];\n      var right_d = diffs[i+1];\n      if (left_d[0] === right_d[1]) {\n        diffs.splice(i, 2, [left_d[0], left_d[1] + right_d[1]]);\n      }\n    }\n  }\n  return diffs;\n}\n","import Quill from './core/quill';\n\nimport Block, { BlockEmbed } from './blots/block';\nimport Break from './blots/break';\nimport Container from './blots/container';\nimport Cursor from './blots/cursor';\nimport Embed from './blots/embed';\nimport Inline from './blots/inline';\nimport Scroll from './blots/scroll';\nimport TextBlot from './blots/text';\n\nimport Clipboard from './modules/clipboard';\nimport History from './modules/history';\nimport Keyboard from './modules/keyboard';\nimport Uploader from './modules/uploader';\n\nQuill.register({\n  'blots/block': Block,\n  'blots/block/embed': BlockEmbed,\n  'blots/break': Break,\n  'blots/container': Container,\n  'blots/cursor': Cursor,\n  'blots/embed': Embed,\n  'blots/inline': Inline,\n  'blots/scroll': Scroll,\n  'blots/text': TextBlot,\n\n  'modules/clipboard': Clipboard,\n  'modules/history': History,\n  'modules/keyboard': Keyboard,\n  'modules/uploader': Uploader,\n});\n\nexport default Quill;\n","import Quill from './core';\n\nimport { AlignClass, AlignStyle } from './formats/align';\nimport {\n  DirectionAttribute,\n  DirectionClass,\n  DirectionStyle,\n} from './formats/direction';\nimport Indent from './formats/indent';\n\nimport Blockquote from './formats/blockquote';\nimport Header from './formats/header';\nimport List from './formats/list';\n\nimport { BackgroundClass, BackgroundStyle } from './formats/background';\nimport { ColorClass, ColorStyle } from './formats/color';\nimport { FontClass, FontStyle } from './formats/font';\nimport { SizeClass, SizeStyle } from './formats/size';\n\nimport Bold from './formats/bold';\nimport Italic from './formats/italic';\nimport Link from './formats/link';\nimport Script from './formats/script';\nimport Strike from './formats/strike';\nimport Underline from './formats/underline';\n\nimport Formula from './formats/formula';\nimport Image from './formats/image';\nimport Video from './formats/video';\n\nimport CodeBlock, { Code as InlineCode } from './formats/code';\n\nimport Syntax from './modules/syntax';\nimport Table from './modules/table';\nimport Toolbar from './modules/toolbar';\n\nimport Icons from './ui/icons';\nimport Picker from './ui/picker';\nimport ColorPicker from './ui/color-picker';\nimport IconPicker from './ui/icon-picker';\nimport Tooltip from './ui/tooltip';\n\nimport BubbleTheme from './themes/bubble';\nimport SnowTheme from './themes/snow';\n\nQuill.register(\n  {\n    'attributors/attribute/direction': DirectionAttribute,\n\n    'attributors/class/align': AlignClass,\n    'attributors/class/background': BackgroundClass,\n    'attributors/class/color': ColorClass,\n    'attributors/class/direction': DirectionClass,\n    'attributors/class/font': FontClass,\n    'attributors/class/size': SizeClass,\n\n    'attributors/style/align': AlignStyle,\n    'attributors/style/background': BackgroundStyle,\n    'attributors/style/color': ColorStyle,\n    'attributors/style/direction': DirectionStyle,\n    'attributors/style/font': FontStyle,\n    'attributors/style/size': SizeStyle,\n  },\n  true,\n);\n\nQuill.register(\n  {\n    'formats/align': AlignClass,\n    'formats/direction': DirectionClass,\n    'formats/indent': Indent,\n\n    'formats/background': BackgroundStyle,\n    'formats/color': ColorStyle,\n    'formats/font': FontClass,\n    'formats/size': SizeClass,\n\n    'formats/blockquote': Blockquote,\n    'formats/code-block': CodeBlock,\n    'formats/header': Header,\n    'formats/list': List,\n\n    'formats/bold': Bold,\n    'formats/code': InlineCode,\n    'formats/italic': Italic,\n    'formats/link': Link,\n    'formats/script': Script,\n    'formats/strike': Strike,\n    'formats/underline': Underline,\n\n    'formats/formula': Formula,\n    'formats/image': Image,\n    'formats/video': Video,\n\n    'modules/syntax': Syntax,\n    'modules/table': Table,\n    'modules/toolbar': Toolbar,\n\n    'themes/bubble': BubbleTheme,\n    'themes/snow': SnowTheme,\n\n    'ui/icons': Icons,\n    'ui/picker': Picker,\n    'ui/icon-picker': IconPicker,\n    'ui/color-picker': ColorPicker,\n    'ui/tooltip': Tooltip,\n  },\n  true,\n);\n\nexport default Quill;\n"],"sourceRoot":""}